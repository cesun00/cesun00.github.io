<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>| Infinity Architect</title>
<link rel=stylesheet href=/main.css><script type=importmap>
  {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.167.1/+esm"
      }
  }
  </script><script type=module src=/theme.mjs></script><style>.tag-android{background-color:hsl(0deg 80% 70%)}.dark .tag-android{background-color:hsl(0deg 80% 20%)}.tag-annotation{background-color:hsl(50deg 80% 70%)}.dark .tag-annotation{background-color:hsl(50deg 80% 20%)}.tag-assembly{background-color:hsl(100deg 80% 70%)}.dark .tag-assembly{background-color:hsl(100deg 80% 20%)}.tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 70%)}.dark .tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 20%)}.tag-awk{background-color:hsl(200deg 80% 70%)}.dark .tag-awk{background-color:hsl(200deg 80% 20%)}.tag-bootloader{background-color:hsl(250deg 80% 70%)}.dark .tag-bootloader{background-color:hsl(250deg 80% 20%)}.tag-bytecode{background-color:hsl(300deg 80% 70%)}.dark .tag-bytecode{background-color:hsl(300deg 80% 20%)}.tag-c{background-color:hsl(350deg 80% 70%)}.dark .tag-c{background-color:hsl(350deg 80% 20%)}.tag-cxx{background-color:hsl(40deg 80% 70%)}.dark .tag-cxx{background-color:hsl(40deg 80% 20%)}.tag-cxx-stl{background-color:hsl(90deg 80% 70%)}.dark .tag-cxx-stl{background-color:hsl(90deg 80% 20%)}.tag-cgroup{background-color:hsl(140deg 80% 70%)}.dark .tag-cgroup{background-color:hsl(140deg 80% 20%)}.tag-cheetsheet{background-color:hsl(190deg 80% 70%)}.dark .tag-cheetsheet{background-color:hsl(190deg 80% 20%)}.tag-clang{background-color:hsl(240deg 80% 70%)}.dark .tag-clang{background-color:hsl(240deg 80% 20%)}.tag-coding-theory{background-color:hsl(290deg 80% 70%)}.dark .tag-coding-theory{background-color:hsl(290deg 80% 20%)}.tag-compression{background-color:hsl(340deg 80% 70%)}.dark .tag-compression{background-color:hsl(340deg 80% 20%)}.tag-concept{background-color:hsl(30deg 80% 70%)}.dark .tag-concept{background-color:hsl(30deg 80% 20%)}.tag-cpu{background-color:hsl(80deg 80% 70%)}.dark .tag-cpu{background-color:hsl(80deg 80% 20%)}.tag-crawler{background-color:hsl(130deg 80% 70%)}.dark .tag-crawler{background-color:hsl(130deg 80% 20%)}.tag-cryptography{background-color:hsl(180deg 80% 70%)}.dark .tag-cryptography{background-color:hsl(180deg 80% 20%)}.tag-css{background-color:hsl(230deg 80% 70%)}.dark .tag-css{background-color:hsl(230deg 80% 20%)}.tag-database{background-color:hsl(280deg 80% 70%)}.dark .tag-database{background-color:hsl(280deg 80% 20%)}.tag-deflate{background-color:hsl(330deg 80% 70%)}.dark .tag-deflate{background-color:hsl(330deg 80% 20%)}.tag-design{background-color:hsl(20deg 80% 70%)}.dark .tag-design{background-color:hsl(20deg 80% 20%)}.tag-dns{background-color:hsl(70deg 80% 70%)}.dark .tag-dns{background-color:hsl(70deg 80% 20%)}.tag-dom{background-color:hsl(120deg 80% 70%)}.dark .tag-dom{background-color:hsl(120deg 80% 20%)}.tag-driver{background-color:hsl(170deg 80% 70%)}.dark .tag-driver{background-color:hsl(170deg 80% 20%)}.tag-elastic{background-color:hsl(220deg 80% 70%)}.dark .tag-elastic{background-color:hsl(220deg 80% 20%)}.tag-elf{background-color:hsl(270deg 80% 70%)}.dark .tag-elf{background-color:hsl(270deg 80% 20%)}.tag-elk{background-color:hsl(320deg 80% 70%)}.dark .tag-elk{background-color:hsl(320deg 80% 20%)}.tag-flex{background-color:hsl(10deg 80% 70%)}.dark .tag-flex{background-color:hsl(10deg 80% 20%)}.tag-gc{background-color:hsl(60deg 80% 70%)}.dark .tag-gc{background-color:hsl(60deg 80% 20%)}.tag-gcc{background-color:hsl(110deg 80% 70%)}.dark .tag-gcc{background-color:hsl(110deg 80% 20%)}.tag-gnu{background-color:hsl(160deg 80% 70%)}.dark .tag-gnu{background-color:hsl(160deg 80% 20%)}.tag-go{background-color:hsl(210deg 80% 70%)}.dark .tag-go{background-color:hsl(210deg 80% 20%)}.tag-gzip{background-color:hsl(260deg 80% 70%)}.dark .tag-gzip{background-color:hsl(260deg 80% 20%)}.tag-hash{background-color:hsl(310deg 80% 70%)}.dark .tag-hash{background-color:hsl(310deg 80% 20%)}.tag-http{background-color:hsl(0deg 80% 70%)}.dark .tag-http{background-color:hsl(0deg 80% 20%)}.tag-huffman{background-color:hsl(50deg 80% 70%)}.dark .tag-huffman{background-color:hsl(50deg 80% 20%)}.tag-java{background-color:hsl(100deg 80% 70%)}.dark .tag-java{background-color:hsl(100deg 80% 20%)}.tag-java-module{background-color:hsl(150deg 80% 70%)}.dark .tag-java-module{background-color:hsl(150deg 80% 20%)}.tag-javascript{background-color:hsl(200deg 80% 70%)}.dark .tag-javascript{background-color:hsl(200deg 80% 20%)}.tag-jdk{background-color:hsl(250deg 80% 70%)}.dark .tag-jdk{background-color:hsl(250deg 80% 20%)}.tag-js{background-color:hsl(300deg 80% 70%)}.dark .tag-js{background-color:hsl(300deg 80% 20%)}.tag-jvm{background-color:hsl(350deg 80% 70%)}.dark .tag-jvm{background-color:hsl(350deg 80% 20%)}.tag-kernel{background-color:hsl(40deg 80% 70%)}.dark .tag-kernel{background-color:hsl(40deg 80% 20%)}.tag-lexer{background-color:hsl(90deg 80% 70%)}.dark .tag-lexer{background-color:hsl(90deg 80% 20%)}.tag-linux{background-color:hsl(140deg 80% 70%)}.dark .tag-linux{background-color:hsl(140deg 80% 20%)}.tag-log4j2{background-color:hsl(190deg 80% 70%)}.dark .tag-log4j2{background-color:hsl(190deg 80% 20%)}.tag-lz77{background-color:hsl(240deg 80% 70%)}.dark .tag-lz77{background-color:hsl(240deg 80% 20%)}.tag-make{background-color:hsl(290deg 80% 70%)}.dark .tag-make{background-color:hsl(290deg 80% 20%)}.tag-makefile{background-color:hsl(340deg 80% 70%)}.dark .tag-makefile{background-color:hsl(340deg 80% 20%)}.tag-maven{background-color:hsl(30deg 80% 70%)}.dark .tag-maven{background-color:hsl(30deg 80% 20%)}.tag-memory{background-color:hsl(80deg 80% 70%)}.dark .tag-memory{background-color:hsl(80deg 80% 20%)}.tag-multithreading{background-color:hsl(130deg 80% 70%)}.dark .tag-multithreading{background-color:hsl(130deg 80% 20%)}.tag-mybatis{background-color:hsl(180deg 80% 70%)}.dark .tag-mybatis{background-color:hsl(180deg 80% 20%)}.tag-mysql{background-color:hsl(230deg 80% 70%)}.dark .tag-mysql{background-color:hsl(230deg 80% 20%)}.tag-nasm{background-color:hsl(280deg 80% 70%)}.dark .tag-nasm{background-color:hsl(280deg 80% 20%)}.tag-node{background-color:hsl(330deg 80% 70%)}.dark .tag-node{background-color:hsl(330deg 80% 20%)}.tag-nodejs{background-color:hsl(20deg 80% 70%)}.dark .tag-nodejs{background-color:hsl(20deg 80% 20%)}.tag-openssl{background-color:hsl(70deg 80% 70%)}.dark .tag-openssl{background-color:hsl(70deg 80% 20%)}.tag-playwright{background-color:hsl(120deg 80% 70%)}.dark .tag-playwright{background-color:hsl(120deg 80% 20%)}.tag-posix{background-color:hsl(170deg 80% 70%)}.dark .tag-posix{background-color:hsl(170deg 80% 20%)}.tag-powershell{background-color:hsl(220deg 80% 70%)}.dark .tag-powershell{background-color:hsl(220deg 80% 20%)}.tag-programming-langauge{background-color:hsl(270deg 80% 70%)}.dark .tag-programming-langauge{background-color:hsl(270deg 80% 20%)}.tag-programming-language{background-color:hsl(320deg 80% 70%)}.dark .tag-programming-language{background-color:hsl(320deg 80% 20%)}.tag-qemu{background-color:hsl(10deg 80% 70%)}.dark .tag-qemu{background-color:hsl(10deg 80% 20%)}.tag-redis{background-color:hsl(60deg 80% 70%)}.dark .tag-redis{background-color:hsl(60deg 80% 20%)}.tag-retrocomputing{background-color:hsl(110deg 80% 70%)}.dark .tag-retrocomputing{background-color:hsl(110deg 80% 20%)}.tag-rfc{background-color:hsl(160deg 80% 70%)}.dark .tag-rfc{background-color:hsl(160deg 80% 20%)}.tag-sdram{background-color:hsl(210deg 80% 70%)}.dark .tag-sdram{background-color:hsl(210deg 80% 20%)}.tag-sed{background-color:hsl(260deg 80% 70%)}.dark .tag-sed{background-color:hsl(260deg 80% 20%)}.tag-slf4j{background-color:hsl(310deg 80% 70%)}.dark .tag-slf4j{background-color:hsl(310deg 80% 20%)}.tag-spring{background-color:hsl(0deg 80% 70%)}.dark .tag-spring{background-color:hsl(0deg 80% 20%)}.tag-spring-boot{background-color:hsl(50deg 80% 70%)}.dark .tag-spring-boot{background-color:hsl(50deg 80% 20%)}.tag-spring-data{background-color:hsl(100deg 80% 70%)}.dark .tag-spring-data{background-color:hsl(100deg 80% 20%)}.tag-spring-ioc{background-color:hsl(150deg 80% 70%)}.dark .tag-spring-ioc{background-color:hsl(150deg 80% 20%)}.tag-sql{background-color:hsl(200deg 80% 70%)}.dark .tag-sql{background-color:hsl(200deg 80% 20%)}.tag-streaming{background-color:hsl(250deg 80% 70%)}.dark .tag-streaming{background-color:hsl(250deg 80% 20%)}.tag-template{background-color:hsl(300deg 80% 70%)}.dark .tag-template{background-color:hsl(300deg 80% 20%)}.tag-testing{background-color:hsl(350deg 80% 70%)}.dark .tag-testing{background-color:hsl(350deg 80% 20%)}.tag-thymeleaf{background-color:hsl(40deg 80% 70%)}.dark .tag-thymeleaf{background-color:hsl(40deg 80% 20%)}.tag-tls{background-color:hsl(90deg 80% 70%)}.dark .tag-tls{background-color:hsl(90deg 80% 20%)}.tag-tomcat{background-color:hsl(140deg 80% 70%)}.dark .tag-tomcat{background-color:hsl(140deg 80% 20%)}.tag-transaction{background-color:hsl(190deg 80% 70%)}.dark .tag-transaction{background-color:hsl(190deg 80% 20%)}.tag-transistor{background-color:hsl(240deg 80% 70%)}.dark .tag-transistor{background-color:hsl(240deg 80% 20%)}.tag-ts{background-color:hsl(290deg 80% 70%)}.dark .tag-ts{background-color:hsl(290deg 80% 20%)}.tag-typescript{background-color:hsl(340deg 80% 70%)}.dark .tag-typescript{background-color:hsl(340deg 80% 20%)}.tag-unix{background-color:hsl(30deg 80% 70%)}.dark .tag-unix{background-color:hsl(30deg 80% 20%)}.tag-web{background-color:hsl(80deg 80% 70%)}.dark .tag-web{background-color:hsl(80deg 80% 20%)}.tag-x86{background-color:hsl(130deg 80% 70%)}.dark .tag-x86{background-color:hsl(130deg 80% 20%)}.tag-x86_64{background-color:hsl(180deg 80% 70%)}.dark .tag-x86_64{background-color:hsl(180deg 80% 20%)}.tag-x86-64{background-color:hsl(230deg 80% 70%)}.dark .tag-x86-64{background-color:hsl(230deg 80% 20%)}.tag-xpath{background-color:hsl(280deg 80% 70%)}.dark .tag-xpath{background-color:hsl(280deg 80% 20%)}.tag-zlib{background-color:hsl(330deg 80% 70%)}.dark .tag-zlib{background-color:hsl(330deg 80% 20%)}</style></head><body><script>localStorage.getItem("dark-theme")&&document.body.classList.add("dark")</script><header><h2 id=banner><a href=/>Infinity Architect</a></h2><div id=top-sections><a href=/android/ class=hoverable>Android </a><a href=/cxx/ class=hoverable>C/C++ </a><a href=/compression/ class=hoverable>Compression </a><a href=/cpu/ class=hoverable>CPU </a><a href=/crypto/ class=hoverable>Cryptography </a><a href=/db/ class=hoverable>Database </a><a href=/ee/ class=hoverable>Electronic Engineering </a><a href=/linux/ class=hoverable>GNU/Linux </a><a href=/go/ class=hoverable>Golang </a><a href=/java/ class=hoverable>Java </a><a href=/microservice/ class=hoverable>Microservice </a><a href=/net/ class=hoverable>Network & Protocol </a><a href=/physics/ class=hoverable>Physics </a><a href=/retro/ class=hoverable>Retro-Computing </a><a href=/toy/ class=hoverable>Toys </a><a href=/windev/ class=hoverable>Window</a></div><div class=theme-switch style="align-self:center;margin:auto 20px"><input type=checkbox id=theme-checkbox>
<label for=theme-checkbox><div></div><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path fill-rule="evenodd" d="M9.528 1.718a.75.75.0 01.162.819A8.97 8.97.0 009 6a9 9 0 009 9 8.97 8.97.0 003.463-.69.75.75.0 01.981.98 10.503 10.503.0 01-9.694 6.46c-5.799.0-10.5-4.701-10.5-10.5.0-4.368 2.667-8.112 6.46-9.694a.75.75.0 01.818.162z" clip-rule="evenodd"/></svg>
</span><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path d="M12 2.25a.75.75.0 01.75.75v2.25a.75.75.0 01-1.5.0V3a.75.75.0 01.75-.75zM7.5 12a4.5 4.5.0 119 0 4.5 4.5.0 01-9 0zM18.894 6.166a.75.75.0 00-1.06-1.06l-1.591 1.59a.75.75.0 101.06 1.061l1.591-1.59zM21.75 12a.75.75.0 01-.75.75h-2.25a.75.75.0 010-1.5H21a.75.75.0 01.75.75zm-3.916 6.894a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 10-1.061 1.06l1.59 1.591zM12 18a.75.75.0 01.75.75V21a.75.75.0 01-1.5.0v-2.25A.75.75.0 0112 18zM7.758 17.303a.75.75.0 00-1.061-1.06l-1.591 1.59a.75.75.0 001.06 1.061l1.591-1.59zM6 12a.75.75.0 01-.75.75H3a.75.75.0 010-1.5h2.25A.75.75.0 016 12zm.697-4.243a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 00-1.061 1.06l1.59 1.591z"/></svg></span></label></div></header><main><article class=basic-text><div style=font-family:monospace;font-size:1.5em><div class=basic-text>/<a href=/>HOME</a>/<a href>Misc</a>/<a href=/misc/gtk/>GTK</a>/
$</div></div><div style=margin-bottom:60px><h1 style=margin-bottom:0></h1><p class=aux-text style=margin-top:0>Published at: January 1, 0001
| Last modification: January 1, 0001</p><div style=line-height:2em></div></div><div><h1 id=final-type-combos>Final type combos</h1><h2 id=g_declare_final_type><code>G_DECLARE_FINAL_TYPE()</code></h2><ol><li>DECLARED <code>foo_bar_get_type(void)</code><ul><li><code>G_DEFINE_TYPE</code> in .c file will provide the implementation</li><li>By convention, users are expected to <code>#define FOO_TYPE_BAR foo_bar_get_type()</code></li></ul></li><li>typedef<ol><li>imcomplete <code>struct _FooBar</code> to <code>FooBar</code>; expecting user to define <code>struct _FooBar</code> later.</li><li>a complete anonymous struct to <code>FooBarClass</code>. The struct holds only a <code>ParentObjectClass</code> field.</li></ol></li><li>DEFINED<ol><li><code>FooBar* FOO_BAR(gpointer)</code> pointer-to-instance casting function</li><li><code>gboolean FOO_IS_BAR(gpointer)</code> pointer-to-instance runtime type check</li></ol></li></ol><p>Plus, instance struct & class struct internal typedefs and freeing functions implementation.
Note the mixed snake and camel and the difference between <code>clear</code> (pointer) vs <code>cleanup</code>(pointer-to-pointer):</p><ol><li>new typedef available:<ol><li><code>FooBar_autoptr</code> & <code>FooBarClass_autoptr</code></li><li><code>FooBar_listautoptr</code> & <code>FooBarClass_listautoptr</code></li><li><code>FooBar_slistautoptr</code> & <code>FooBarClass_slistautoptr</code></li><li><code>FooBar_queueautoptr</code> & <code>FooBarClass_queueautoptr</code></li></ol></li><li>DEFINE freeing functions:<ol><li><code>static inline glib_autoptr_clear_FooBar(FooBar*)</code> & <code>static inline glib_autoptr_clear_FooBarClass(FooBarClass*)</code></li><li><code>static inline glib_autoptr_cleanup_FooBar(FooBar**)</code> & <code>static inline glib_autoptr_cleanup_FooBarClass(FooBarClass**)</code>.</li><li><code>static inline glib_listautoptr_cleanup_FooBar(GList **)</code> & <code>static inline glib_listautoptr_cleanup_FooBarClass(GList **)</code></li><li><code>static inline glib_slistautoptr_cleanup_FooBar(GSList **)</code> & <code>static inline glib_slistautoptr_cleanup_FooBarClass(GSList **)</code></li><li><code>static inline glib_queueautoptr_cleanup_FooBar(GQueue **)</code> & <code>static inline glib_queueautoptr_cleanup_FooBarClass(GQueue **)</code></li></ol></li></ol><h2 id=g_define_type><code>G_DEFINE_TYPE()</code></h2><ol><li>DECLARED <code>foo_bar_init(FooBar *)</code> and <code>foo_bar_class_init(FooBarClass *)</code><ul><li>will be registered as <code>instance_init</code> and <code>class_init</code> by <code>foo_bar_get_type</code>. User must implement these 2 later.</li></ul></li><li>DEFINED <code>static GType foo_bar_get_type(void)</code><ul><li>with utility functions <code>foo_bar_get_type_once(void)</code> and <code>foo_bar_class_intern_init()</code> implementations</li><li>with auxillary translation-unit-local variable <code>FooBar_private_offset</code></li></ul></li><li><code>static gpointer foo_bar_parent_class = ((void *) 0)</code>;</li></ol><h1 id=derivable-type-combos>Derivable type combos</h1><p>Use <code>G_DECLARE_DERIVABLE_TYPE</code> in header file, with one of the follows in .c file:</p><ol><li><code>G_DEFINE_ABSTRACT_TYPE</code>, for abstract type (i.e. non-instantiable type, only intended to become base)</li><li><code>G_DEFINE_TYPE_WITH_PRIVATE</code>, for instantiable type.</li></ol><h2 id=g_declare_derivable_type><code>G_DECLARE_DERIVABLE_TYPE</code></h2><ol><li>DECLARED <code>foo_bar_get_type(void)</code><ul><li><code>G_DEFINE_ABSTRACT_TYPE</code> or <code>G_DEFINE_TYPE_WITH_PRIVATE</code> in .c file will provide the implementation</li><li>By convention, users are expected to <code>#define FOO_TYPE_BAR foo_bar_get_type()</code></li></ul></li><li>typedef<ol><li><strong>complete</strong> <code>struct _FooBar</code> to <code>FooBar</code>;<ul><li>The struct holds only a <code>ParentInstance</code> field. To associate more fields with instance struct of derivable types, use <code>G_DEFINE_TYPE_WITH_PRIVATE</code> in .c file.</li></ul></li><li>incomplete <code>struct _FooBarClass</code> to <code>FooBarClass</code>;</li></ol></li><li>DEFINED<ol><li><code>FooBar* FOO_BAR(gpointer)</code> pointer-to-instance & <code>FooBarClass* FOO_BAR_CLASS(gpointer)</code> pointer-to-class casting function</li><li><code>gboolean FOO_IS_BAR(gpointer)</code> pointer-to-instance & <code>gboolean FOO_IS_BAR_CLASS(gpointer)</code> pointer-to-class runtime type check</li><li><code>TNumberClass* T_NUMBER_GET_CLASS(gpointer)</code> get class from instance</li></ol></li></ol><h2 id=g_define_abstract_type><code>G_DEFINE_ABSTRACT_TYPE</code></h2><ol><li>DECLARED <code>foo_bar_init(FooBar *)</code> and <code>foo_bar_class_init(FooBarClass *)</code><ul><li>will be registered as <code>instance_init</code> and <code>class_init</code> by <code>foo_bar_get_type</code>. User must implement these 2 later.</li></ul></li><li>DEFINED <code>static GType foo_bar_get_type(void)</code><ul><li>with utility functions <code>foo_bar_get_type_once(void)</code> and <code>foo_bar_class_intern_init()</code> implementations</li><li>with auxillary translation-unit-local variable <code>FooBar_private_offset</code></li></ul></li><li><code>static gpointer foo_bar_parent_class = ((void *) 0)</code>;</li></ol><h2 id=g_define_type_with_private><code>G_DEFINE_TYPE_WITH_PRIVATE</code></h2><p>Almost identical to <code>G_DEFINE_TYPE</code>, but additionally:</p><ol><li><p>defined a static global gint <code>FooBar_private_offset</code></p></li><li><p>and also initialize it (done by <code>G_ADD_PRIVATE</code> as snippet)</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>FooBar_private_offset <span style=color:#f92672>=</span> <span style=color:#a6e22e>g_type_add_instance_private</span>(
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>   g_define_type_id,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>   <span style=color:#66d9ef>sizeof</span>(FooBarPrivate)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>);</span></span></code></pre></div><button>copy</button></div></li><li><p><strong>!important</strong> DEFINED a static function <code>gpointer foo_bar_get_instance_private(FooBar*)</code> to retrieve private instance from public instance.</p></li></ol><h1 id=interface-and-implementation-combo>interface and implementation combo</h1><h2 id=g_declare_interface><code>G_DECLARE_INTERFACE</code></h2><ol><li>DECLARED <code>GType t_comparable_get_type(void);</code>;<ul><li>will be later implemented by <code>G_DEFINE_INTERFACE</code> in .c file.</li></ul></li><li>DEFINED:<ol><li><code>TComparable* T_COMPARABLE(gpointer)</code> casting function</li><li><code>gboolean T_IS_COMPARABLE(gpointer)</code> type check function</li><li><code>TComparableInterface* T_COMPARABLE_GET_IFACE(gpointer)</code> TODO</li></ol></li><li>typedef<ol><li><code>struct _TComparable</code> to <code>TComparable</code></li><li><code>struct _TComparableInterface</code> to <code>TComparableInterface</code></li></ol></li></ol><h2 id=g_define_interface><code>G_DEFINE_INTERFACE</code></h2><ol><li>DECLARED <code>void t_comparable_default_init(TComparableInterface *)</code>; User must provide implementation later.</li><li>DEFINED <code>GType t_comparable_get_type(void)</code>; which register <code>TComparable</code> type and use <code>t_comparable_default_init</code> as class_init function.</li></ol><h2 id=g_define_type_with_code-tint-t_int-t_type_number-snippet><code>G_DEFINE_TYPE_WITH_CODE (TInt, t_int, T_TYPE_NUMBER, snippet)</code></h2><p>Like <code>G_DEFINE_TYPE</code>, i.e. mainly implements the <code>foo_bar_get_type</code> function,
Additionally, this macro insert <code>snippet</code> into the <code>*_get_once*()</code> implementation prior to its return.</p><p><code>snippet</code> is usually <code>G_IMPLEMENT_INTERFACE</code>, so that the defined type is also registered to implement an interface.</p><h3 id=g_implement_interfacefoo_type_bar-foo_bar_interface_init><code>G_IMPLEMENT_INTERFACE(FOO_TYPE_BAR, foo_bar_interface_init)</code></h3><p><code>G_IMPLEMENT_INTERFACE</code> fills a <code>GInterfaceInfo</code> structure and call <code>g_type_add_interface_static</code> with it.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e>// G_IMPLEMENT_INTERFACE (T_TYPE_COMPARABLE, t_comparable_interface_init)
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e>// expands to
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>{
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>  <span style=color:#66d9ef>const</span> GInterfaceInfo g_implement_interface_info <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>      (GInterfaceInitFunc)(<span style=color:#66d9ef>void</span> (<span style=color:#f92672>*</span>)(<span style=color:#66d9ef>void</span>))
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>      t_comparable_interface_init,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>      NULL,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>      NULL,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>  };
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>  <span style=color:#a6e22e>g_type_add_interface_static</span>(g_define_type_id, (<span style=color:#a6e22e>t_comparable_get_type</span>()), <span style=color:#f92672>&amp;</span>g_implement_interface_info);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>}</span></span></code></pre></div><button>copy</button></div><h3 id=g_add_privatefoobar><code>G_ADD_PRIVATE(FooBar)</code></h3><p>Simply initialize <code>FooBar_private_offset</code>, which is defined by <code>G_DEFINE_TYPE_WITH_PRIVATE</code> as an static global <code>gint</code>.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e>// expands to
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e></span>{
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>  FooBar_private_offset <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>      <span style=color:#a6e22e>g_type_add_instance_private</span>(g_define_type_id, <span style=color:#66d9ef>sizeof</span>(FooBarPrivate));
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>}</span></span></code></pre></div><button>copy</button></div></div></article></main><footer>Unless otherwise noted, content of this site is licensed under
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ style=text-decoration:underline>the CC BY-NC-SA 4.0</a>.<br>cesun.info copyright 2024.</footer></body></html>