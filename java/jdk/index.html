<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Java Standard SDK | Infinity Architect</title>
<link rel=stylesheet href=/main.css><script type=importmap>
  {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.167.1/+esm"
      }
  }
  </script><script type=module src=/theme.mjs></script><style>.tag-android{background-color:hsl(0deg 80% 70%)}.dark .tag-android{background-color:hsl(0deg 80% 20%)}.tag-annotation{background-color:hsl(50deg 80% 70%)}.dark .tag-annotation{background-color:hsl(50deg 80% 20%)}.tag-assembly{background-color:hsl(100deg 80% 70%)}.dark .tag-assembly{background-color:hsl(100deg 80% 20%)}.tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 70%)}.dark .tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 20%)}.tag-awk{background-color:hsl(200deg 80% 70%)}.dark .tag-awk{background-color:hsl(200deg 80% 20%)}.tag-bootloader{background-color:hsl(250deg 80% 70%)}.dark .tag-bootloader{background-color:hsl(250deg 80% 20%)}.tag-bytecode{background-color:hsl(300deg 80% 70%)}.dark .tag-bytecode{background-color:hsl(300deg 80% 20%)}.tag-c{background-color:hsl(350deg 80% 70%)}.dark .tag-c{background-color:hsl(350deg 80% 20%)}.tag-cxx{background-color:hsl(40deg 80% 70%)}.dark .tag-cxx{background-color:hsl(40deg 80% 20%)}.tag-cxx-stl{background-color:hsl(90deg 80% 70%)}.dark .tag-cxx-stl{background-color:hsl(90deg 80% 20%)}.tag-cgroup{background-color:hsl(140deg 80% 70%)}.dark .tag-cgroup{background-color:hsl(140deg 80% 20%)}.tag-cheetsheet{background-color:hsl(190deg 80% 70%)}.dark .tag-cheetsheet{background-color:hsl(190deg 80% 20%)}.tag-clang{background-color:hsl(240deg 80% 70%)}.dark .tag-clang{background-color:hsl(240deg 80% 20%)}.tag-coding-theory{background-color:hsl(290deg 80% 70%)}.dark .tag-coding-theory{background-color:hsl(290deg 80% 20%)}.tag-compression{background-color:hsl(340deg 80% 70%)}.dark .tag-compression{background-color:hsl(340deg 80% 20%)}.tag-concept{background-color:hsl(30deg 80% 70%)}.dark .tag-concept{background-color:hsl(30deg 80% 20%)}.tag-cpu{background-color:hsl(80deg 80% 70%)}.dark .tag-cpu{background-color:hsl(80deg 80% 20%)}.tag-crawler{background-color:hsl(130deg 80% 70%)}.dark .tag-crawler{background-color:hsl(130deg 80% 20%)}.tag-cryptography{background-color:hsl(180deg 80% 70%)}.dark .tag-cryptography{background-color:hsl(180deg 80% 20%)}.tag-css{background-color:hsl(230deg 80% 70%)}.dark .tag-css{background-color:hsl(230deg 80% 20%)}.tag-database{background-color:hsl(280deg 80% 70%)}.dark .tag-database{background-color:hsl(280deg 80% 20%)}.tag-deflate{background-color:hsl(330deg 80% 70%)}.dark .tag-deflate{background-color:hsl(330deg 80% 20%)}.tag-design{background-color:hsl(20deg 80% 70%)}.dark .tag-design{background-color:hsl(20deg 80% 20%)}.tag-dns{background-color:hsl(70deg 80% 70%)}.dark .tag-dns{background-color:hsl(70deg 80% 20%)}.tag-dom{background-color:hsl(120deg 80% 70%)}.dark .tag-dom{background-color:hsl(120deg 80% 20%)}.tag-driver{background-color:hsl(170deg 80% 70%)}.dark .tag-driver{background-color:hsl(170deg 80% 20%)}.tag-elastic{background-color:hsl(220deg 80% 70%)}.dark .tag-elastic{background-color:hsl(220deg 80% 20%)}.tag-elf{background-color:hsl(270deg 80% 70%)}.dark .tag-elf{background-color:hsl(270deg 80% 20%)}.tag-elk{background-color:hsl(320deg 80% 70%)}.dark .tag-elk{background-color:hsl(320deg 80% 20%)}.tag-flex{background-color:hsl(10deg 80% 70%)}.dark .tag-flex{background-color:hsl(10deg 80% 20%)}.tag-gc{background-color:hsl(60deg 80% 70%)}.dark .tag-gc{background-color:hsl(60deg 80% 20%)}.tag-gcc{background-color:hsl(110deg 80% 70%)}.dark .tag-gcc{background-color:hsl(110deg 80% 20%)}.tag-gnu{background-color:hsl(160deg 80% 70%)}.dark .tag-gnu{background-color:hsl(160deg 80% 20%)}.tag-go{background-color:hsl(210deg 80% 70%)}.dark .tag-go{background-color:hsl(210deg 80% 20%)}.tag-gzip{background-color:hsl(260deg 80% 70%)}.dark .tag-gzip{background-color:hsl(260deg 80% 20%)}.tag-hash{background-color:hsl(310deg 80% 70%)}.dark .tag-hash{background-color:hsl(310deg 80% 20%)}.tag-http{background-color:hsl(0deg 80% 70%)}.dark .tag-http{background-color:hsl(0deg 80% 20%)}.tag-huffman{background-color:hsl(50deg 80% 70%)}.dark .tag-huffman{background-color:hsl(50deg 80% 20%)}.tag-java{background-color:hsl(100deg 80% 70%)}.dark .tag-java{background-color:hsl(100deg 80% 20%)}.tag-java-module{background-color:hsl(150deg 80% 70%)}.dark .tag-java-module{background-color:hsl(150deg 80% 20%)}.tag-javascript{background-color:hsl(200deg 80% 70%)}.dark .tag-javascript{background-color:hsl(200deg 80% 20%)}.tag-jdk{background-color:hsl(250deg 80% 70%)}.dark .tag-jdk{background-color:hsl(250deg 80% 20%)}.tag-js{background-color:hsl(300deg 80% 70%)}.dark .tag-js{background-color:hsl(300deg 80% 20%)}.tag-jvm{background-color:hsl(350deg 80% 70%)}.dark .tag-jvm{background-color:hsl(350deg 80% 20%)}.tag-kernel{background-color:hsl(40deg 80% 70%)}.dark .tag-kernel{background-color:hsl(40deg 80% 20%)}.tag-lexer{background-color:hsl(90deg 80% 70%)}.dark .tag-lexer{background-color:hsl(90deg 80% 20%)}.tag-linux{background-color:hsl(140deg 80% 70%)}.dark .tag-linux{background-color:hsl(140deg 80% 20%)}.tag-log4j2{background-color:hsl(190deg 80% 70%)}.dark .tag-log4j2{background-color:hsl(190deg 80% 20%)}.tag-lz77{background-color:hsl(240deg 80% 70%)}.dark .tag-lz77{background-color:hsl(240deg 80% 20%)}.tag-make{background-color:hsl(290deg 80% 70%)}.dark .tag-make{background-color:hsl(290deg 80% 20%)}.tag-makefile{background-color:hsl(340deg 80% 70%)}.dark .tag-makefile{background-color:hsl(340deg 80% 20%)}.tag-maven{background-color:hsl(30deg 80% 70%)}.dark .tag-maven{background-color:hsl(30deg 80% 20%)}.tag-memory{background-color:hsl(80deg 80% 70%)}.dark .tag-memory{background-color:hsl(80deg 80% 20%)}.tag-multithreading{background-color:hsl(130deg 80% 70%)}.dark .tag-multithreading{background-color:hsl(130deg 80% 20%)}.tag-mybatis{background-color:hsl(180deg 80% 70%)}.dark .tag-mybatis{background-color:hsl(180deg 80% 20%)}.tag-mysql{background-color:hsl(230deg 80% 70%)}.dark .tag-mysql{background-color:hsl(230deg 80% 20%)}.tag-nasm{background-color:hsl(280deg 80% 70%)}.dark .tag-nasm{background-color:hsl(280deg 80% 20%)}.tag-node{background-color:hsl(330deg 80% 70%)}.dark .tag-node{background-color:hsl(330deg 80% 20%)}.tag-nodejs{background-color:hsl(20deg 80% 70%)}.dark .tag-nodejs{background-color:hsl(20deg 80% 20%)}.tag-openssl{background-color:hsl(70deg 80% 70%)}.dark .tag-openssl{background-color:hsl(70deg 80% 20%)}.tag-playwright{background-color:hsl(120deg 80% 70%)}.dark .tag-playwright{background-color:hsl(120deg 80% 20%)}.tag-posix{background-color:hsl(170deg 80% 70%)}.dark .tag-posix{background-color:hsl(170deg 80% 20%)}.tag-powershell{background-color:hsl(220deg 80% 70%)}.dark .tag-powershell{background-color:hsl(220deg 80% 20%)}.tag-programming-langauge{background-color:hsl(270deg 80% 70%)}.dark .tag-programming-langauge{background-color:hsl(270deg 80% 20%)}.tag-programming-language{background-color:hsl(320deg 80% 70%)}.dark .tag-programming-language{background-color:hsl(320deg 80% 20%)}.tag-qemu{background-color:hsl(10deg 80% 70%)}.dark .tag-qemu{background-color:hsl(10deg 80% 20%)}.tag-redis{background-color:hsl(60deg 80% 70%)}.dark .tag-redis{background-color:hsl(60deg 80% 20%)}.tag-retrocomputing{background-color:hsl(110deg 80% 70%)}.dark .tag-retrocomputing{background-color:hsl(110deg 80% 20%)}.tag-rfc{background-color:hsl(160deg 80% 70%)}.dark .tag-rfc{background-color:hsl(160deg 80% 20%)}.tag-sdram{background-color:hsl(210deg 80% 70%)}.dark .tag-sdram{background-color:hsl(210deg 80% 20%)}.tag-sed{background-color:hsl(260deg 80% 70%)}.dark .tag-sed{background-color:hsl(260deg 80% 20%)}.tag-slf4j{background-color:hsl(310deg 80% 70%)}.dark .tag-slf4j{background-color:hsl(310deg 80% 20%)}.tag-spring{background-color:hsl(0deg 80% 70%)}.dark .tag-spring{background-color:hsl(0deg 80% 20%)}.tag-spring-boot{background-color:hsl(50deg 80% 70%)}.dark .tag-spring-boot{background-color:hsl(50deg 80% 20%)}.tag-spring-data{background-color:hsl(100deg 80% 70%)}.dark .tag-spring-data{background-color:hsl(100deg 80% 20%)}.tag-spring-ioc{background-color:hsl(150deg 80% 70%)}.dark .tag-spring-ioc{background-color:hsl(150deg 80% 20%)}.tag-sql{background-color:hsl(200deg 80% 70%)}.dark .tag-sql{background-color:hsl(200deg 80% 20%)}.tag-streaming{background-color:hsl(250deg 80% 70%)}.dark .tag-streaming{background-color:hsl(250deg 80% 20%)}.tag-template{background-color:hsl(300deg 80% 70%)}.dark .tag-template{background-color:hsl(300deg 80% 20%)}.tag-testing{background-color:hsl(350deg 80% 70%)}.dark .tag-testing{background-color:hsl(350deg 80% 20%)}.tag-thymeleaf{background-color:hsl(40deg 80% 70%)}.dark .tag-thymeleaf{background-color:hsl(40deg 80% 20%)}.tag-tls{background-color:hsl(90deg 80% 70%)}.dark .tag-tls{background-color:hsl(90deg 80% 20%)}.tag-tomcat{background-color:hsl(140deg 80% 70%)}.dark .tag-tomcat{background-color:hsl(140deg 80% 20%)}.tag-transaction{background-color:hsl(190deg 80% 70%)}.dark .tag-transaction{background-color:hsl(190deg 80% 20%)}.tag-transistor{background-color:hsl(240deg 80% 70%)}.dark .tag-transistor{background-color:hsl(240deg 80% 20%)}.tag-ts{background-color:hsl(290deg 80% 70%)}.dark .tag-ts{background-color:hsl(290deg 80% 20%)}.tag-typescript{background-color:hsl(340deg 80% 70%)}.dark .tag-typescript{background-color:hsl(340deg 80% 20%)}.tag-unix{background-color:hsl(30deg 80% 70%)}.dark .tag-unix{background-color:hsl(30deg 80% 20%)}.tag-web{background-color:hsl(80deg 80% 70%)}.dark .tag-web{background-color:hsl(80deg 80% 20%)}.tag-x86{background-color:hsl(130deg 80% 70%)}.dark .tag-x86{background-color:hsl(130deg 80% 20%)}.tag-x86_64{background-color:hsl(180deg 80% 70%)}.dark .tag-x86_64{background-color:hsl(180deg 80% 20%)}.tag-x86-64{background-color:hsl(230deg 80% 70%)}.dark .tag-x86-64{background-color:hsl(230deg 80% 20%)}.tag-xpath{background-color:hsl(280deg 80% 70%)}.dark .tag-xpath{background-color:hsl(280deg 80% 20%)}.tag-zlib{background-color:hsl(330deg 80% 70%)}.dark .tag-zlib{background-color:hsl(330deg 80% 20%)}</style></head><body><script>localStorage.getItem("dark-theme")&&document.body.classList.add("dark")</script><header><h2 id=banner><a href=/>Infinity Architect</a></h2><div id=top-sections><a href=/android/ class=hoverable>Android </a><a href=/cxx/ class=hoverable>C/C++ </a><a href=/compression/ class=hoverable>Compression </a><a href=/cpu/ class=hoverable>CPU </a><a href=/crypto/ class=hoverable>Cryptography </a><a href=/db/ class=hoverable>Database </a><a href=/ee/ class=hoverable>Electronic Engineering </a><a href=/linux/ class=hoverable>GNU/Linux </a><a href=/go/ class=hoverable>Golang </a><a href=/java/ class=active>Java </a><a href=/microservice/ class=hoverable>Microservice </a><a href=/net/ class=hoverable>Network & Protocol </a><a href=/physics/ class=hoverable>Physics </a><a href=/retro/ class=hoverable>Retro-Computing </a><a href=/toy/ class=hoverable>Toys </a><a href=/windev/ class=hoverable>Window</a></div><div class=theme-switch style="align-self:center;margin:auto 20px"><input type=checkbox id=theme-checkbox>
<label for=theme-checkbox><div></div><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path fill-rule="evenodd" d="M9.528 1.718a.75.75.0 01.162.819A8.97 8.97.0 009 6a9 9 0 009 9 8.97 8.97.0 003.463-.69.75.75.0 01.981.98 10.503 10.503.0 01-9.694 6.46c-5.799.0-10.5-4.701-10.5-10.5.0-4.368 2.667-8.112 6.46-9.694a.75.75.0 01.818.162z" clip-rule="evenodd"/></svg>
</span><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path d="M12 2.25a.75.75.0 01.75.75v2.25a.75.75.0 01-1.5.0V3a.75.75.0 01.75-.75zM7.5 12a4.5 4.5.0 119 0 4.5 4.5.0 01-9 0zM18.894 6.166a.75.75.0 00-1.06-1.06l-1.591 1.59a.75.75.0 101.06 1.061l1.591-1.59zM21.75 12a.75.75.0 01-.75.75h-2.25a.75.75.0 010-1.5H21a.75.75.0 01.75.75zm-3.916 6.894a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 10-1.061 1.06l1.59 1.591zM12 18a.75.75.0 01.75.75V21a.75.75.0 01-1.5.0v-2.25A.75.75.0 0112 18zM7.758 17.303a.75.75.0 00-1.061-1.06l-1.591 1.59a.75.75.0 001.06 1.061l1.591-1.59zM6 12a.75.75.0 01-.75.75H3a.75.75.0 010-1.5h2.25A.75.75.0 016 12zm.697-4.243a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 00-1.061 1.06l1.59 1.591z"/></svg></span></label></div></header><main><div style=font-family:monospace;font-size:1.5em><div class=basic-text>/<a href=/>HOME</a>/<a href=/java/>Java</a>/
$</div></div><div id=section-flex class=basic-text><div style=flex:2;min-width:0><h1>Section: Java Standard SDK</h1><h2 id=javalangobject><code>java.lang.Object</code></h2><h3 id=clone><code>clone()</code></h3><p><strong>Never use this method.</strong> If you really need to create an object based on another object (e.g. the prototype pattern), implement a copy ctor. [<a href=https://stackoverflow.com/questions/5802118/why-do-we-use-the-clone-method-in-java>ref0</a>,<a href=https://stackoverflow.com/questions/26578517/should-i-use-clone-method-in-java>ref1</a>].</p><p>The following are just for fun or interview.</p><p>The <code>Object.clone()</code> method is a native <strong>protected</strong> method, meaning that it&rsquo;s not available everywhere. Any object can <code>clone()</code> itself in its own method, but there is no way to call <code>clone()</code> directly on other objects.</p><p>Again we see the cohesion of a language and its runtime: if a class want to call <code>clone()</code> in some its own methods, it must implement the <code>Clonable</code> marker interface, directly or indirectly. JVM takes special care for this interface, and reject the <code>clone()</code> call by throwing a <code>CloneNotSupportedException</code> if the class in question doesn&rsquo;t <code>implement</code> it.</p><p><code>CloneNotSupportedException</code> <strong>is a checked exception</strong>. <code>catch</code> or <code>throws</code> it.</p><h3 id=equals-contract><code>equals()</code> contract</h3><p>Javadoc of <code>Object.equals()</code> from OpenJDK documents the following 5 properties that an implementation of <code>equals()</code> needs to satisfy:</p><ol><li>Reflexive: any object should equals to itself, i.e. <code>x.equals(x)</code> is always true;</li><li>Symmetric: <code>x.equals(y)</code> should always returns the same result as <code>y.equals(x)</code>;</li><li>Transitive: if <code>x.equals(y)</code> is true and <code>y.equals(z)</code> is true, then <code>x.equals(z)</code> must be true;</li><li>Consistent: multiple invocations of <code>x.equals(y)</code> must return the same result, given that no information used in the <code>equals()</code> comparison is modified;</li><li>For non-null reference <code>x</code>, <code>x.equals(null)</code> should return false.</li></ol><p>A common pitfall happens when inheritance is abused: <a href=https://www.baeldung.com/java-equals-hashcode-contracts>https://www.baeldung.com/java-equals-hashcode-contracts</a></p><p>Again recall Scott Meyers said that</p><blockquote><p>Public inheritance represents a &ldquo;is-a&rdquo; relationship.</p></blockquote><p>Some considerations when implementing a <code>equals()</code> override:</p><ol><li><p>Can the current class <code>equals()</code> its subclasses?</p><p>See the example below for different handling.</p></li><li><p>Is it allowed that some fields used in <code>equals()</code> might be <code>null</code>? If yes, are 2 <code>null</code> fields considered equal?</p><p>Consider use the free function <code>Objects.equals()</code> for null-safety. This static method consider 2 <code>null</code> reference to be equal.</p></li><li><p>Are fields read directly or via getters?</p><p>Read directly if no special reason.</p></li></ol><h3 id=hashcode-contract><code>hashCode()</code> contract</h3><ol><li>Multiple invocations of <code>hashCode()</code> on the same object should return the same int, given that no information used in <strong><code>equals()</code></strong> is modified. (<strong>yes, <code>equals()</code></strong>).</li><li>If <code>a.equals(b)</code> is true, then <code>hashCode()</code> of <code>a</code> and <code>b</code> must equal as well.</li></ol><p>These contract indicates that: <strong>whenever <code>equals()</code> is overridden, hashCode() must be overriden as well</strong>.</p><p>Some take-aways:</p><ol><li><code>hashCode()</code> return int and negative result is perfect valid;</li></ol><p>Some utility functions are:</p><ul><li><code>Objects.hash(Object... values)</code>: a variadic free function; collect <code>values</code> as an array and delegate to <code>Arrays.hash(value)</code>.</li><li><code>Arrays.hash(?[] a)</code> (? be a primitive type): a collection of overloads that compute a rolling hash over the primitive array.</li><li><code>Arrays.hash(Object[] a)</code>: compute a rolling hash over a reference array using each object&rsquo;s <code>hashCode()</code> in the array.</li></ul><h3 id=example>Example</h3><p>A common implementations of <code>equals()</code> and hashCode() has the following step:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Foo</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>    <span style=color:#66d9ef>int</span> a, b, c;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>    <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> d, e, f;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    String g, h, i;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    ArrayList<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> j, k, l;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>equals</span>(Object o) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>        <span style=color:#75715e>// #1 ensure reflexivity</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>        <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span> <span style=color:#f92672>==</span> o) <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>        <span style=color:#75715e>// #2 test null parameter and type compatibility</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>        <span style=color:#75715e>// when subclass equality is not allowed:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>        <span style=color:#66d9ef>if</span> (o <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> getClass() <span style=color:#f92672>!=</span> o.<span style=color:#a6e22e>getClass</span>()) <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>        <span style=color:#75715e>// or when allowed:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>        <span style=color:#75715e>// if (!(o instanceof Foo)) return false;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>        Foo foo <span style=color:#f92672>=</span> (Foo) o; <span style=color:#75715e>// downcast is safe now</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>        <span style=color:#75715e>// #3 Return a big `&amp;&amp;` of boolean expression:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>        <span style=color:#75715e>// 1. for primitive types, compare using `==` directly</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>        <span style=color:#75715e>// 2. for array, delegate to Arrays.equals()</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span>        <span style=color:#75715e>// 3. For other reference, delegate to `Object.equals(), or `Objects.equals()` for null-safety</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>        <span style=color:#66d9ef>return</span> a <span style=color:#f92672>==</span> foo.<span style=color:#a6e22e>a</span> <span style=color:#f92672>&amp;&amp;</span> b <span style=color:#f92672>==</span> foo.<span style=color:#a6e22e>b</span> <span style=color:#f92672>&amp;&amp;</span> c <span style=color:#f92672>==</span> foo.<span style=color:#a6e22e>c</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span>                <span style=color:#f92672>&amp;&amp;</span> Arrays.<span style=color:#a6e22e>equals</span>(d, foo.<span style=color:#a6e22e>d</span>) <span style=color:#f92672>&amp;&amp;</span> Arrays.<span style=color:#a6e22e>equals</span>(e, foo.<span style=color:#a6e22e>e</span>) <span style=color:#f92672>&amp;&amp;</span> Arrays.<span style=color:#a6e22e>equals</span>(f, foo.<span style=color:#a6e22e>f</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>                <span style=color:#f92672>&amp;&amp;</span> g.<span style=color:#a6e22e>equals</span>(foo.<span style=color:#a6e22e>g</span>) <span style=color:#f92672>&amp;&amp;</span> Objects.<span style=color:#a6e22e>equals</span>(h, foo.<span style=color:#a6e22e>h</span>) <span style=color:#f92672>&amp;&amp;</span> Objects.<span style=color:#a6e22e>equals</span>(i, foo.<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span>                <span style=color:#f92672>&amp;&amp;</span> j.<span style=color:#a6e22e>equals</span>(foo.<span style=color:#a6e22e>j</span>) <span style=color:#f92672>&amp;&amp;</span> Objects.<span style=color:#a6e22e>equals</span>(k, foo.<span style=color:#a6e22e>k</span>) <span style=color:#f92672>&amp;&amp;</span> Objects.<span style=color:#a6e22e>equals</span>(l, foo.<span style=color:#a6e22e>l</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>hashCode</span>() {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span>        <span style=color:#75715e>// auto-box primitives</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span>        <span style=color:#66d9ef>int</span> result <span style=color:#f92672>=</span> Objects.<span style=color:#a6e22e>hash</span>(a, b, c, g, h, i, j, k, l);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span>        <span style=color:#75715e>// for array, rolling hash with the traditional 31 as multiplier</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span>        result <span style=color:#f92672>=</span> 31 <span style=color:#f92672>*</span> result <span style=color:#f92672>+</span> Arrays.<span style=color:#a6e22e>hashCode</span>(d);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span>        result <span style=color:#f92672>=</span> 31 <span style=color:#f92672>*</span> result <span style=color:#f92672>+</span> Arrays.<span style=color:#a6e22e>hashCode</span>(e);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span>        result <span style=color:#f92672>=</span> 31 <span style=color:#f92672>*</span> result <span style=color:#f92672>+</span> Arrays.<span style=color:#a6e22e>hashCode</span>(f);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span>        <span style=color:#66d9ef>return</span> result;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span><span>}</span></span></code></pre></div><button>copy</button></div><p><a href=https://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier>The number 31 is an empirical choice</a>.</p><h2 id=regex>Regex</h2><p>Given 2 String instance <code>text</code> and <code>pattern</code>, the procedure to use regex is:</p><ol><li>Get (compile) a <code>java.util.regex.Pattern</code> instance <code>p</code> from a String;</li><li>Get a <code>java.util.regex.Matcher</code> instance <code>m</code> from <code>p.matcher(text)</code>, and do queryies against <code>m</code> directly.</li></ol><p>A simple static util method exists: <code>Pattern.matches(pattern, text)</code> return directly a boolean indicating if <code>pattern</code> finds a match in <code>text</code>. This compile <code>pattern</code> internally, and assumes no reuse of compiled regex, thus slow if call multiple times.</p><h2 id=prefer-java-8-longadder-over-atomicinteger>Prefer Java 8 <code>LongAdder</code> over <code>AtomicInteger</code></h2><p><a href=https://stackoverflow.com/questions/30691083/how-longadder-performs-better-than-atomiclong>https://stackoverflow.com/questions/30691083/how-longadder-performs-better-than-atomiclong</a></p><h2 id=crtp-in-enume-extends-enume>CRTP in <code>Enum&lt;E extends Enum&lt;E>></code></h2><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>enum</span> Fruit{Apple,Banana,Citrus}</span></span></code></pre></div><button>copy</button></div><p>is a syntax sugar for the following class definition</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Fruit</span> <span style=color:#66d9ef>extends</span> Enum<span style=color:#f92672>&lt;</span>Fruit<span style=color:#f92672>&gt;</span> {...}</span></span></code></pre></div><button>copy</button></div><p>This is known as the <em>curious recurring template pattern</em> (CRTP).
CRTP allows a parent class to refer to the type of its subclass, without even knowing what subclass there will be in the future.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>A</span><span style=color:#f92672>&lt;</span>T <span style=color:#66d9ef>extends</span> A<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;&gt;</span> { <span style=color:#66d9ef>abstract</span> T <span style=color:#a6e22e>foo</span>();}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>B</span> <span style=color:#66d9ef>extends</span> A<span style=color:#f92672>&lt;</span>B<span style=color:#f92672>&gt;</span> { <span style=color:#a6e22e>@Override</span> B <span style=color:#a6e22e>foo</span>() { <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>; }}</span></span></code></pre></div><button>copy</button></div><p>In the CRTP above, we expressed the following contract:</p><ol><li><code>A</code> can only be instantiated by its subtype. Those subtypes will inherit useful methods directly from <code>A</code>.</li><li>Parameter <code>T</code> is enforced to be a subclass of <code>A</code>. This is important because our code in <code>A</code> (the superclass)</li><li>Whatever type argument that passed in as <code>T</code> must indeed be a subclass of A.</li><li>Overrides of <code>foo()</code> must return the subclass itself.</li></ol><blockquote><p>This idiom allows a superclass (such as an Abstract Factory) to define methods whose argument types and return types are in terms of the subclass type, not the superclass type.</p></blockquote><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Enum</span><span style=color:#f92672>&lt;</span>E <span style=color:#66d9ef>extends</span> Enum<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>        <span style=color:#66d9ef>implements</span> Constable, Comparable<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span>, Serializable { ... }</span></span></code></pre></div><button>copy</button></div><p>Back to <code>Enum&lt;E extends Enum&lt;E>></code>. So we know <code>Enum</code> is a generic class that takes a type parameter <code>E</code> which must be a subclass of <code>Enum</code> itself. This allows codes in the body of <code>Enum</code> to refer to <code>E</code> with the confidence that <code>E</code> is a subclass of <code>Enum</code>. We want <code>E</code> to be subclass of <code>Enum</code>, because in this way instance of <code>Fruit</code> can directly call methods defined on <code>Enum</code>:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e>// Enum&lt;E extends Enum&lt;E&gt;&gt; implements Comparable&lt;E&gt; for us.</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#66d9ef>int</span> flag <span style=color:#f92672>=</span> Fruit.<span style=color:#a6e22e>Apple</span>.<span style=color:#a6e22e>compareTo</span>(Fruit.<span style=color:#a6e22e>Banana</span>);</span></span></code></pre></div><button>copy</button></div><h2 id=java-9-char-and-string-encoding>Java 9 char and String encoding</h2><p>JLS mandates</p><ul><li>a <code>char</code> variable is always 2 bytes in UTF-16 <a href=https://stackoverflow.com/questions/11666266/is-java-char-big-endian-in-jvm-memory>big endian</a>.</li><li>a char literal enclosed in <code>''</code> must be in the range <code>\u0000</code> to <code>\uFFFF</code>.</li></ul><p>This means that a char or char literal can only represent Unicode codepoints in the BMP.</p><p>Prior to Java 9, content of a <code>String</code> is stored in a <code>char</code> array:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e>// openjdk 8: java.lang.String</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>String</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>    <span style=color:#66d9ef>implements</span> java.<span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Serializable</span>, Comparable<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span>, CharSequence {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>	    <span style=color:#75715e>/** The value is used for character storage. */</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>		    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>char</span> value<span style=color:#f92672>[]</span>;</span></span></code></pre></div><button>copy</button></div><p>So a UTF-16 surrogate pair is 2 char in a <code>String</code> instance.</p><p>Java 9 introduced compact string, and <code>value</code> becomes a <code>byte[]</code> in latest JDK.</p><h3 id=java-9-compact-string>Java 9 Compact String</h3><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>String</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    <span style=color:#66d9ef>implements</span> java.<span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Serializable</span>, Comparable<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span>, CharSequence,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>               Constable, ConstantDesc {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#75715e>     * The value is used for character storage. ...
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>    <span style=color:#a6e22e>@Stable</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> value;</span></span></code></pre></div><button>copy</button></div><h2 id=javalangthread><code>java.lang.Thread</code></h2><p>A nested enum <code>java.lang.Thread.State</code> defines 6 states of JVM threads:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e>// /java.base/java/lang/Thread.java</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>enum</span> State {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>	NEW, RUNNABLE, BLOCKED, WAITING, TIMED_WAITING, TERMINATED;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>}</span></span></code></pre></div><button>copy</button></div><p><em>Note that a nested enum is always static.</em></p><ul><li><p><code>NEW</code>: when you get a <code>Thread</code> object but has not yet called <code>start()</code> on it.</p></li><li><p><code>RUNNABLE</code>: running <strong>or waiting for I/O, CPU or other resources</strong>.</p></li><li><p><code>BLOCKED</code>: <strong>waiting for a monitor lock.</strong> That is, current thread is waiting to enter a <code>sychronized</code> method/block or re-enter it after <code>Object.wait()</code>.</p><p><code>BLOCKED</code> differs drastically from <code>WAITING</code> in that <code>BLOCKED</code> <strong>is not interruptable</strong>. There is not way to interrupt a thread blocked on trying acquiring a monitor lock, as you can see there is no way to handle such interruption.</p><p>A thread blocked for acquiring an explicit lock implementing the <code>java.util.concurrent.locks.Lock</code> interface is in the state <code>WAITING</code>, not <code>BLOCKED</code>.</p></li><li><p><code>WAITING</code>: waiting for other thread to perform a specific action, infinitely, <strong>interruptably</strong>.</p><p>All methods that make the current thread become <code>WAITING</code> is interruptable, and throw the classic <code>InterruptedException</code> so that the user can handle the interruption condition. Javadoc from OpenJDK explicitly lists the only 3 methods that cause <code>WAITING</code>:</p><ul><li><code>Object.wait()</code></li><li><code>Thread.join()</code></li><li><code>LockSupport.park()</code></li></ul><p>Implementations of <code>java.util.concurrent.locks.Lock</code> internally use <code>LockSupport.park()</code>.</p></li><li><p><code>TIMED_WAITING</code>: <code>WAITING</code> but give up after specified number of time. A thread in this state may as well be waiting for a timer, e.g. <code>Thread.sleep()</code>, rather than an operation performed by another thread.</p></li><li><p><code>TERMINATED</code>: thread has finished.</p></li></ul></div><div style=flex:1><div style=border-radius:30px><h4>You are looking at a section page.</h3><p>Section pages are navigation nodes of this site.
A section contains articles and sub-sections.</p><div><h4>Direct sub-sections of this section are:</h3><ul><li><a class=deco href=/java/jdk/concurrent/>Java Concurrent Utilities</a></li></ul></div></div></div></div><div style=margin-top:200px><hr><h2>Articles in this section:</h2><div><div class=page-list><div class=hoverable><a href=/java/jdk/concurrent/thread-pool/><div>In section:
> Java
> Java Standard SDK
> Java Concurrent Utilities</div><h2 style=margin:0>JDK `ExecutorService` and Thread Pool</h2><div style=margin-top:4px;margin-bottom:22px class=aux-text>July 16, 2024</div><div class=aux-text><p>Despite its being a JDK stock utility, the <code>java.util.concurrent.Executor</code> hierarchy since Java 1.5 is a fairly good thread pool implementation.</p></div><div style=margin-top:20px><div style=line-height:2em><span class="page-tag tag-java">java</span>
<span class="page-tag tag-multithreading">multithreading</span></div></div></a></div><div class=hoverable><a href=/java/jdk/class-loading/><div>In section:
> Java
> Java Standard SDK</div><h2 style=margin:0>Class loading & The `java.lang.ClassLoader`</h2><div style=margin-top:4px;margin-bottom:22px class=aux-text>February 15, 2024</div><div class=aux-text>A class loader is an object responsible for creating Class&lt;?> instances by the binary name of a class. The class of such object must be a subclass of the abstract class java.lang.ClassLoader. Among others, the most important API is public Class&lt;?> loadClass(String name) which converts an array of bytes into an instance of Class&lt;?>.
First, bootstrap classes (was rt.jar prior to java 9) was found by looking at system property sun.</div><div style=margin-top:20px><div style=line-height:2em></div></div></a></div><div class=hoverable><a href=/java/jdk/collection/><div>In section:
> Java
> Java Standard SDK</div><h2 style=margin:0>Memo: using `java.util` Collections</h2><div style=margin-top:4px;margin-bottom:22px class=aux-text>January 29, 2024</div><div class=aux-text>null key in java.util.Map Map.put doesn&rsquo;t &ldquo;throws&rdquo; checked exception, but runtime exceptions e.g. NPE may be thrown depending on whether the underlying implementation supports null as key.
TreeMap doesn&rsquo;t support null key, since it&rsquo;s red-black tree based on comparison. Compare null with non-null reference doesn&rsquo;t make much sense.
1public class App5 { 2 public static void main(String[] args) { 3 Map&lt;String, String> m =new HashMap&lt;>(); 4 m.put(null, "123"); // HashMap supports null key as if it hash to 0 5 System.</div><div style=margin-top:20px><div style=line-height:2em></div></div></a></div><div class=hoverable><a href=/java/jdk/time/><div>In section:
> Java
> Java Standard SDK</div><h2 style=margin:0>Memo: Java Datetime-Related SDK</h2><div style=margin-top:4px;margin-bottom:22px class=aux-text>January 29, 2024</div><div class=aux-text><p>Datetime-related SDKs.</p></div><div style=margin-top:20px><div style=line-height:2em><span class="page-tag tag-java">Java</span>
<span class="page-tag tag-jdk">JDK</span></div></div></a></div></div></div></div></main><footer>Unless otherwise noted, content of this site is licensed under
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ style=text-decoration:underline>the CC BY-NC-SA 4.0</a>.<br>cesun.info copyright 2024.</footer></body></html>