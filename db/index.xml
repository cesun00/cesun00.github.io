<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Database on Infinity Architect</title><link>https://cesun.info/db/</link><description>Recent content in Database on Infinity Architect</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Sat, 20 Jul 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://cesun.info/db/index.xml" rel="self" type="application/rss+xml"/><item><title>MySQL Variable</title><link>https://cesun.info/db/mysql/vars/</link><pubDate>Sun, 21 Apr 2024 00:00:00 +0000</pubDate><guid>https://cesun.info/db/mysql/vars/</guid><description>User-Defined Variable https://dev.mysql.com/doc/refman/8.0/en/user-variables.htm
UDV can only stored a scalar value, e.g. the result of an aggregation function. For storing non-scalar result of a query, see temporary table.
Note the := operator. = operator outside SET or UPDATE &amp;lt;table&amp;gt; SET ... is considered a equality test.
1SELECT @myvar:=SUM(Population) from city; 2# +-------------------------+ 3# | @myvar:=SUM(Population) | 4# +-------------------------+ 5# | 1429559884 | 6# +-------------------------+ 7# 1 row in set, 1 warning (0.</description></item><item><title>SQL Locking Pattern</title><link>https://cesun.info/db/mysql/patterns/</link><pubDate>Tue, 05 Mar 2024 00:00:00 +0000</pubDate><guid>https://cesun.info/db/mysql/patterns/</guid><description>pessimistic locking #1 1CREATE TABLE `lock_table` ( 2 `id` BIGINT NOT NULL AUTO_INCREMENT, 3 `flag` int NOT NULL, 4 5 PRIMARY KEY (`id`), 6 CONSTRAINT UNIQUE KEY (flag) 7) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 8 9 10INSERT INTO lock_table(flag) VALUES (1) 11-- OBTAIN AUTO GENERATED KEY as x 12-- GO EXCLUSIVE BUSINESS 13DELETE FROM lock_table where id = x copy One client will succeed in inserting, while all other client will get a duplicated unique key &amp;quot;flag&amp;quot; error on insert.</description></item><item><title>MongoDB (misc)</title><link>https://cesun.info/db/mongo/</link><pubDate>Sat, 16 Dec 2023 00:00:00 +0000</pubDate><guid>https://cesun.info/db/mongo/</guid><description>View view is read-only aggregate of collections or other views. view is not cached on disk; each query against a view is computed online everytime. more fields can be added to a view based on the result of computation of old fields from collections/other views.</description></item><item><title>Elastic Search (MISC)</title><link>https://cesun.info/db/elastic/</link><pubDate>Mon, 04 Dec 2023 00:00:00 +0000</pubDate><guid>https://cesun.info/db/elastic/</guid><description>Glossary node: a physical deployment of Elasticsearch on a single machine (or docker/VM deplyment) shard: a part of data consists of an logical index; You can have multiple shards, each belongs to different index, deployed on a single node. Excerpt Itâ€™s often useful to index the same field in different ways for different purposes. For example, you might want to index a string field as both a text field for full-text search and as a keyword field for sorting or aggregating your data.</description></item><item><title>MySQL MISC</title><link>https://cesun.info/db/mysql/misc/</link><pubDate>Wed, 15 Nov 2023 00:00:00 +0000</pubDate><guid>https://cesun.info/db/mysql/misc/</guid><description>test null json 1select * from lark.task_detail where task_id = 100329 and task_resource = CAST(&amp;#39;null&amp;#39; as JSON); copy Limits Max # of indexes per table is 64. Max index width for InnoDB table is 767 or 3072 bytes. Max # of columns per table is 4096, but almost always we can&amp;rsquo;t reach that number, since other factors are also limiting the # of columns per table. User User At its simplest form, create a user with no password and no privileges:</description></item><item><title>MySQL Charset and Collation</title><link>https://cesun.info/db/mysql/locale/</link><pubDate>Wed, 11 Oct 2023 00:00:00 +0000</pubDate><guid>https://cesun.info/db/mysql/locale/</guid><description>Character Set (charset) and Collations https://dev.mysql.com/doc/refman/8.0/en/charset-general.html
Mind the terminology abuse: &amp;ldquo;character set&amp;rdquo; or &amp;ldquo;charset&amp;rdquo; here is actually &amp;ldquo;encoding&amp;rdquo; in common sense. e.g. utf8 is said to be a charset here in MySQL, but in unicode terms &amp;ldquo;Unicode&amp;rdquo; is a charset and &amp;ldquo;utf8&amp;rdquo; is a encoding of Unicode.
A character set is a set of characters, while a collation is the rules for comparing and sorting a particular character set. A character set can have many collations associated with it, while each collation is only associated with one character set.</description></item><item><title>MySQL Index</title><link>https://cesun.info/db/mysql/sql-index/</link><pubDate>Wed, 20 Sep 2023 00:00:00 +0000</pubDate><guid>https://cesun.info/db/mysql/sql-index/</guid><description>Primary Key Primary key, if presented, is used as the clustered index, meaning that it determine the order of row on disk. Refman recommends that one always specifies a PK when creating a table. When choosing PK, the following columns are recommended by the refman:
Columns that are referenced by the most important queries. Columns that are never left blank. Columns that never have duplicate values. Columns that rarely if ever change value once inserted.</description></item><item><title>MySQL Table and View</title><link>https://cesun.info/db/mysql/table/</link><pubDate>Sat, 02 Sep 2023 00:00:00 +0000</pubDate><guid>https://cesun.info/db/mysql/table/</guid><description>Table Info A &amp;ldquo;table&amp;rdquo; can refer to both tradition table (termed &amp;ldquo;base table&amp;rdquo;) or view. They are equally returned upon SHOW TABLES;. Use SHOW FULL TABLES; to print their type as well.
The following statements provides more infomation about tables in a database, and a specific table:
1SHOW TABLE STATUS FROM &amp;lt;db_name&amp;gt;; 2SELECT * FROM INFORMATION_SCHEMA.INNODB_TABLES WHERE NAME=&amp;#39;db_name/table_name&amp;#39; \G copy Row format 4 row format are supported by InnoDB: REDUNDANT, COMPACT, DYNAMIC, and COMPRESSED.</description></item><item><title>SELECT and Optimization Techniques</title><link>https://cesun.info/db/mysql/select/</link><pubDate>Sat, 26 Aug 2023 00:00:00 +0000</pubDate><guid>https://cesun.info/db/mysql/select/</guid><description>The notorious query statement being excessively versatile.
1SELECT [DISTINCT] ... 2FROM ... PARTITION ... 3WHERE ... 4GROUP BY ... 5HAVING ... 6WINDOW ... 7ORDER BY ... [DESC] 8LIMIT ... copy display huge number of columns in terminal 1select * from user\G copy https://stackoverflow.com/questions/924729/how-to-best-display-in-terminal-a-mysql-select-returning-too-many-fields
Pattern Matching [NOT] LIKE 1SELECT ... FROM ... 2WHERE &amp;lt;column&amp;gt; [NOT] LIKE &amp;lt;pattern&amp;gt; copy Only 2 meta char allowed:
% matches any number of characters, including zero. _ matches any single character.</description></item><item><title>MySQL Basics</title><link>https://cesun.info/db/mysql/overview/</link><pubDate>Tue, 22 Aug 2023 00:00:00 +0000</pubDate><guid>https://cesun.info/db/mysql/overview/</guid><description>Installation Grab from AUR. Don&amp;rsquo;t forget to change MAKEFLAGS (e.g. -jn for parallel compilation) in /etc/makepkg.conf if this is the first time aur package is built on the current machine.
1git clone https://aur.archlinux.org/mysql.git 2makepkg -si copy Default charset and collation are set in PKGBUILD:
-DDEFAULT_CHARSET=utf8mb4 \ -DDEFAULT_COLLATION=utf8mb4_unicode_ci \ copy AUR script mysql.install will
create group mysql (gid=89) and user mysql (uid=89) whose primary group is mysql. create group mysqlrouter and user mysqlrouter whose primary group is mysqlrouter.</description></item><item><title>SQL ER Model</title><link>https://cesun.info/db/mysql/model/</link><pubDate>Mon, 21 Aug 2023 00:00:00 +0000</pubDate><guid>https://cesun.info/db/mysql/model/</guid><description>Entity-Relationship Model Note for terminology: In the original research by Peter Chen, &amp;ldquo;entity&amp;rdquo; is an instance of an &amp;ldquo;entity-type&amp;rdquo;. There, each entity-type corresponds to 1 table, each row in the table is an &amp;ldquo;entity&amp;rdquo;, i.e. instance of entity-type. But for simplicity people now just use &amp;ldquo;entity&amp;rdquo; for &amp;ldquo;entity-type&amp;rdquo;.
Because the term entity-type is somewhat cumbersome, most people tend to use the term entity as a synonym for this term. &amp;ndash; wikipedia</description></item><item><title>MySQL DevOps / Technical Interals</title><link>https://cesun.info/db/mysql/internals/</link><pubDate>Sat, 12 Aug 2023 00:00:00 +0000</pubDate><guid>https://cesun.info/db/mysql/internals/</guid><description>data dictionary MySQL &amp;ldquo;data dictionary&amp;rdquo; is the runtime structure where all important metadata (e.g. views, stored procedure, triggers, user tables columns structure &amp;hellip;) in the current server instance are stored.
Modern version of MySQL persists the data dictionary also as InnoDB tables, thus providing the same transaction ability and crash-recovery as ordinary user tables. These tables are hidden, and is in the mysql schema. They can only be seen in a debug build (cmake -DWITH_DEBUG=1).</description></item><item><title>MySQL Transaction</title><link>https://cesun.info/db/mysql/tx/</link><pubDate>Tue, 01 Aug 2023 00:00:00 +0000</pubDate><guid>https://cesun.info/db/mysql/tx/</guid><description>Locking Locking is heavily used in any database system to ensure ACID.
MyISAM only supports locking at table level, i.e. readers-writer lock on each entire table. No other level of protection are supported. Apparently, such granularity of locking is too large, and is detrimental the concurrency of transactions. Well, MyISAM doesn&amp;rsquo;t support transaction, anyway.
InnoDB supports transaction, and claim itself supports &amp;ldquo;multiple granularity locking&amp;rdquo;, meaning that both table level and row level locks are supported.</description></item></channel></rss>