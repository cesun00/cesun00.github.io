<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Bash Shell Tricks & Memos | Infinity Architect</title>
<link rel=stylesheet href=/main.css><script type=importmap>
  {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.167.1/+esm"
      }
  }
  </script><script type=module src=/theme.mjs></script><style>.tag-android{background-color:hsl(0deg 80% 70%)}.dark .tag-android{background-color:hsl(0deg 80% 20%)}.tag-annotation{background-color:hsl(50deg 80% 70%)}.dark .tag-annotation{background-color:hsl(50deg 80% 20%)}.tag-assembly{background-color:hsl(100deg 80% 70%)}.dark .tag-assembly{background-color:hsl(100deg 80% 20%)}.tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 70%)}.dark .tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 20%)}.tag-awk{background-color:hsl(200deg 80% 70%)}.dark .tag-awk{background-color:hsl(200deg 80% 20%)}.tag-bootloader{background-color:hsl(250deg 80% 70%)}.dark .tag-bootloader{background-color:hsl(250deg 80% 20%)}.tag-bytecode{background-color:hsl(300deg 80% 70%)}.dark .tag-bytecode{background-color:hsl(300deg 80% 20%)}.tag-c{background-color:hsl(350deg 80% 70%)}.dark .tag-c{background-color:hsl(350deg 80% 20%)}.tag-cxx{background-color:hsl(40deg 80% 70%)}.dark .tag-cxx{background-color:hsl(40deg 80% 20%)}.tag-cxx-stl{background-color:hsl(90deg 80% 70%)}.dark .tag-cxx-stl{background-color:hsl(90deg 80% 20%)}.tag-cgroup{background-color:hsl(140deg 80% 70%)}.dark .tag-cgroup{background-color:hsl(140deg 80% 20%)}.tag-cheetsheet{background-color:hsl(190deg 80% 70%)}.dark .tag-cheetsheet{background-color:hsl(190deg 80% 20%)}.tag-clang{background-color:hsl(240deg 80% 70%)}.dark .tag-clang{background-color:hsl(240deg 80% 20%)}.tag-coding-theory{background-color:hsl(290deg 80% 70%)}.dark .tag-coding-theory{background-color:hsl(290deg 80% 20%)}.tag-compression{background-color:hsl(340deg 80% 70%)}.dark .tag-compression{background-color:hsl(340deg 80% 20%)}.tag-concept{background-color:hsl(30deg 80% 70%)}.dark .tag-concept{background-color:hsl(30deg 80% 20%)}.tag-cpu{background-color:hsl(80deg 80% 70%)}.dark .tag-cpu{background-color:hsl(80deg 80% 20%)}.tag-crawler{background-color:hsl(130deg 80% 70%)}.dark .tag-crawler{background-color:hsl(130deg 80% 20%)}.tag-cryptography{background-color:hsl(180deg 80% 70%)}.dark .tag-cryptography{background-color:hsl(180deg 80% 20%)}.tag-css{background-color:hsl(230deg 80% 70%)}.dark .tag-css{background-color:hsl(230deg 80% 20%)}.tag-database{background-color:hsl(280deg 80% 70%)}.dark .tag-database{background-color:hsl(280deg 80% 20%)}.tag-deflate{background-color:hsl(330deg 80% 70%)}.dark .tag-deflate{background-color:hsl(330deg 80% 20%)}.tag-design{background-color:hsl(20deg 80% 70%)}.dark .tag-design{background-color:hsl(20deg 80% 20%)}.tag-dns{background-color:hsl(70deg 80% 70%)}.dark .tag-dns{background-color:hsl(70deg 80% 20%)}.tag-dom{background-color:hsl(120deg 80% 70%)}.dark .tag-dom{background-color:hsl(120deg 80% 20%)}.tag-driver{background-color:hsl(170deg 80% 70%)}.dark .tag-driver{background-color:hsl(170deg 80% 20%)}.tag-elastic{background-color:hsl(220deg 80% 70%)}.dark .tag-elastic{background-color:hsl(220deg 80% 20%)}.tag-elf{background-color:hsl(270deg 80% 70%)}.dark .tag-elf{background-color:hsl(270deg 80% 20%)}.tag-elk{background-color:hsl(320deg 80% 70%)}.dark .tag-elk{background-color:hsl(320deg 80% 20%)}.tag-flex{background-color:hsl(10deg 80% 70%)}.dark .tag-flex{background-color:hsl(10deg 80% 20%)}.tag-gc{background-color:hsl(60deg 80% 70%)}.dark .tag-gc{background-color:hsl(60deg 80% 20%)}.tag-gcc{background-color:hsl(110deg 80% 70%)}.dark .tag-gcc{background-color:hsl(110deg 80% 20%)}.tag-gnu{background-color:hsl(160deg 80% 70%)}.dark .tag-gnu{background-color:hsl(160deg 80% 20%)}.tag-go{background-color:hsl(210deg 80% 70%)}.dark .tag-go{background-color:hsl(210deg 80% 20%)}.tag-gzip{background-color:hsl(260deg 80% 70%)}.dark .tag-gzip{background-color:hsl(260deg 80% 20%)}.tag-hash{background-color:hsl(310deg 80% 70%)}.dark .tag-hash{background-color:hsl(310deg 80% 20%)}.tag-http{background-color:hsl(0deg 80% 70%)}.dark .tag-http{background-color:hsl(0deg 80% 20%)}.tag-huffman{background-color:hsl(50deg 80% 70%)}.dark .tag-huffman{background-color:hsl(50deg 80% 20%)}.tag-java{background-color:hsl(100deg 80% 70%)}.dark .tag-java{background-color:hsl(100deg 80% 20%)}.tag-java-module{background-color:hsl(150deg 80% 70%)}.dark .tag-java-module{background-color:hsl(150deg 80% 20%)}.tag-javascript{background-color:hsl(200deg 80% 70%)}.dark .tag-javascript{background-color:hsl(200deg 80% 20%)}.tag-jdk{background-color:hsl(250deg 80% 70%)}.dark .tag-jdk{background-color:hsl(250deg 80% 20%)}.tag-js{background-color:hsl(300deg 80% 70%)}.dark .tag-js{background-color:hsl(300deg 80% 20%)}.tag-jvm{background-color:hsl(350deg 80% 70%)}.dark .tag-jvm{background-color:hsl(350deg 80% 20%)}.tag-kernel{background-color:hsl(40deg 80% 70%)}.dark .tag-kernel{background-color:hsl(40deg 80% 20%)}.tag-lexer{background-color:hsl(90deg 80% 70%)}.dark .tag-lexer{background-color:hsl(90deg 80% 20%)}.tag-linux{background-color:hsl(140deg 80% 70%)}.dark .tag-linux{background-color:hsl(140deg 80% 20%)}.tag-log4j2{background-color:hsl(190deg 80% 70%)}.dark .tag-log4j2{background-color:hsl(190deg 80% 20%)}.tag-lz77{background-color:hsl(240deg 80% 70%)}.dark .tag-lz77{background-color:hsl(240deg 80% 20%)}.tag-make{background-color:hsl(290deg 80% 70%)}.dark .tag-make{background-color:hsl(290deg 80% 20%)}.tag-makefile{background-color:hsl(340deg 80% 70%)}.dark .tag-makefile{background-color:hsl(340deg 80% 20%)}.tag-maven{background-color:hsl(30deg 80% 70%)}.dark .tag-maven{background-color:hsl(30deg 80% 20%)}.tag-memory{background-color:hsl(80deg 80% 70%)}.dark .tag-memory{background-color:hsl(80deg 80% 20%)}.tag-multithreading{background-color:hsl(130deg 80% 70%)}.dark .tag-multithreading{background-color:hsl(130deg 80% 20%)}.tag-mybatis{background-color:hsl(180deg 80% 70%)}.dark .tag-mybatis{background-color:hsl(180deg 80% 20%)}.tag-mysql{background-color:hsl(230deg 80% 70%)}.dark .tag-mysql{background-color:hsl(230deg 80% 20%)}.tag-nasm{background-color:hsl(280deg 80% 70%)}.dark .tag-nasm{background-color:hsl(280deg 80% 20%)}.tag-node{background-color:hsl(330deg 80% 70%)}.dark .tag-node{background-color:hsl(330deg 80% 20%)}.tag-nodejs{background-color:hsl(20deg 80% 70%)}.dark .tag-nodejs{background-color:hsl(20deg 80% 20%)}.tag-openssl{background-color:hsl(70deg 80% 70%)}.dark .tag-openssl{background-color:hsl(70deg 80% 20%)}.tag-playwright{background-color:hsl(120deg 80% 70%)}.dark .tag-playwright{background-color:hsl(120deg 80% 20%)}.tag-posix{background-color:hsl(170deg 80% 70%)}.dark .tag-posix{background-color:hsl(170deg 80% 20%)}.tag-powershell{background-color:hsl(220deg 80% 70%)}.dark .tag-powershell{background-color:hsl(220deg 80% 20%)}.tag-programming-langauge{background-color:hsl(270deg 80% 70%)}.dark .tag-programming-langauge{background-color:hsl(270deg 80% 20%)}.tag-programming-language{background-color:hsl(320deg 80% 70%)}.dark .tag-programming-language{background-color:hsl(320deg 80% 20%)}.tag-qemu{background-color:hsl(10deg 80% 70%)}.dark .tag-qemu{background-color:hsl(10deg 80% 20%)}.tag-redis{background-color:hsl(60deg 80% 70%)}.dark .tag-redis{background-color:hsl(60deg 80% 20%)}.tag-retrocomputing{background-color:hsl(110deg 80% 70%)}.dark .tag-retrocomputing{background-color:hsl(110deg 80% 20%)}.tag-rfc{background-color:hsl(160deg 80% 70%)}.dark .tag-rfc{background-color:hsl(160deg 80% 20%)}.tag-sdram{background-color:hsl(210deg 80% 70%)}.dark .tag-sdram{background-color:hsl(210deg 80% 20%)}.tag-sed{background-color:hsl(260deg 80% 70%)}.dark .tag-sed{background-color:hsl(260deg 80% 20%)}.tag-slf4j{background-color:hsl(310deg 80% 70%)}.dark .tag-slf4j{background-color:hsl(310deg 80% 20%)}.tag-spring{background-color:hsl(0deg 80% 70%)}.dark .tag-spring{background-color:hsl(0deg 80% 20%)}.tag-spring-boot{background-color:hsl(50deg 80% 70%)}.dark .tag-spring-boot{background-color:hsl(50deg 80% 20%)}.tag-spring-data{background-color:hsl(100deg 80% 70%)}.dark .tag-spring-data{background-color:hsl(100deg 80% 20%)}.tag-spring-ioc{background-color:hsl(150deg 80% 70%)}.dark .tag-spring-ioc{background-color:hsl(150deg 80% 20%)}.tag-sql{background-color:hsl(200deg 80% 70%)}.dark .tag-sql{background-color:hsl(200deg 80% 20%)}.tag-streaming{background-color:hsl(250deg 80% 70%)}.dark .tag-streaming{background-color:hsl(250deg 80% 20%)}.tag-template{background-color:hsl(300deg 80% 70%)}.dark .tag-template{background-color:hsl(300deg 80% 20%)}.tag-testing{background-color:hsl(350deg 80% 70%)}.dark .tag-testing{background-color:hsl(350deg 80% 20%)}.tag-thymeleaf{background-color:hsl(40deg 80% 70%)}.dark .tag-thymeleaf{background-color:hsl(40deg 80% 20%)}.tag-tls{background-color:hsl(90deg 80% 70%)}.dark .tag-tls{background-color:hsl(90deg 80% 20%)}.tag-tomcat{background-color:hsl(140deg 80% 70%)}.dark .tag-tomcat{background-color:hsl(140deg 80% 20%)}.tag-transaction{background-color:hsl(190deg 80% 70%)}.dark .tag-transaction{background-color:hsl(190deg 80% 20%)}.tag-transistor{background-color:hsl(240deg 80% 70%)}.dark .tag-transistor{background-color:hsl(240deg 80% 20%)}.tag-ts{background-color:hsl(290deg 80% 70%)}.dark .tag-ts{background-color:hsl(290deg 80% 20%)}.tag-typescript{background-color:hsl(340deg 80% 70%)}.dark .tag-typescript{background-color:hsl(340deg 80% 20%)}.tag-unix{background-color:hsl(30deg 80% 70%)}.dark .tag-unix{background-color:hsl(30deg 80% 20%)}.tag-web{background-color:hsl(80deg 80% 70%)}.dark .tag-web{background-color:hsl(80deg 80% 20%)}.tag-x86{background-color:hsl(130deg 80% 70%)}.dark .tag-x86{background-color:hsl(130deg 80% 20%)}.tag-x86_64{background-color:hsl(180deg 80% 70%)}.dark .tag-x86_64{background-color:hsl(180deg 80% 20%)}.tag-x86-64{background-color:hsl(230deg 80% 70%)}.dark .tag-x86-64{background-color:hsl(230deg 80% 20%)}.tag-xpath{background-color:hsl(280deg 80% 70%)}.dark .tag-xpath{background-color:hsl(280deg 80% 20%)}.tag-zlib{background-color:hsl(330deg 80% 70%)}.dark .tag-zlib{background-color:hsl(330deg 80% 20%)}</style></head><body><script>localStorage.getItem("dark-theme")&&document.body.classList.add("dark")</script><header><h2 id=banner><a href=/>Infinity Architect</a></h2><div id=top-sections><a href=/android/ class=hoverable>Android </a><a href=/cxx/ class=hoverable>C/C++ </a><a href=/compression/ class=hoverable>Compression </a><a href=/cpu/ class=hoverable>CPU </a><a href=/crypto/ class=hoverable>Cryptography </a><a href=/db/ class=hoverable>Database </a><a href=/ee/ class=hoverable>Electronic Engineering </a><a href=/linux/ class=active>GNU/Linux </a><a href=/go/ class=hoverable>Golang </a><a href=/java/ class=hoverable>Java </a><a href=/microservice/ class=hoverable>Microservice </a><a href=/net/ class=hoverable>Network & Protocol </a><a href=/physics/ class=hoverable>Physics </a><a href=/retro/ class=hoverable>Retro-Computing </a><a href=/toy/ class=hoverable>Toys </a><a href=/windev/ class=hoverable>Window</a></div><div class=theme-switch style="align-self:center;margin:auto 20px"><input type=checkbox id=theme-checkbox>
<label for=theme-checkbox><div></div><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path fill-rule="evenodd" d="M9.528 1.718a.75.75.0 01.162.819A8.97 8.97.0 009 6a9 9 0 009 9 8.97 8.97.0 003.463-.69.75.75.0 01.981.98 10.503 10.503.0 01-9.694 6.46c-5.799.0-10.5-4.701-10.5-10.5.0-4.368 2.667-8.112 6.46-9.694a.75.75.0 01.818.162z" clip-rule="evenodd"/></svg>
</span><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path d="M12 2.25a.75.75.0 01.75.75v2.25a.75.75.0 01-1.5.0V3a.75.75.0 01.75-.75zM7.5 12a4.5 4.5.0 119 0 4.5 4.5.0 01-9 0zM18.894 6.166a.75.75.0 00-1.06-1.06l-1.591 1.59a.75.75.0 101.06 1.061l1.591-1.59zM21.75 12a.75.75.0 01-.75.75h-2.25a.75.75.0 010-1.5H21a.75.75.0 01.75.75zm-3.916 6.894a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 10-1.061 1.06l1.59 1.591zM12 18a.75.75.0 01.75.75V21a.75.75.0 01-1.5.0v-2.25A.75.75.0 0112 18zM7.758 17.303a.75.75.0 00-1.061-1.06l-1.591 1.59a.75.75.0 001.06 1.061l1.591-1.59zM6 12a.75.75.0 01-.75.75H3a.75.75.0 010-1.5h2.25A.75.75.0 016 12zm.697-4.243a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 00-1.061 1.06l1.59 1.591z"/></svg></span></label></div></header><main><article class=basic-text><div style=font-family:monospace;font-size:1.5em><div class=basic-text>/<a href=/>HOME</a>/<a href=/linux/>GNU/Linux</a>/
$</div></div><div style=margin-bottom:60px><h1 style=margin-bottom:0>Bash Shell Tricks & Memos</h1><p class=aux-text style=margin-top:0>Published at: September 6, 2023
| Last modification: May 24, 2024</p><div style=line-height:2em></div></div><div><h2 id=cli-invocation>CLI Invocation</h2><ul><li><code>-c</code>: The first non-option token after this option will be treated as a pipeline to be executed in the bash process.</li><li><code>-s</code>: force bash to read from STDIN even positional argument is given, which would otherwise be interpret as the path to a script file. This allows positional parameters to be set when invoking an interactive shell.</li><li><code>-i</code>: assume output is a tty device</li><li><code>-l</code>: make the newly-invoked bash work as if it is a login shell</li><li><code>-r</code>: invoke a <em>restricted</em> bash shell</li><li><code>-v</code>: show more info on each command / step that bash executes; equivalent to <code>--verbose</code></li></ul><p>The remaining tokens will be treated as the name of a bash script, and will be executed, if both</p><ol><li>arguments remains after option processing, and</li><li>neither <code>-c</code> nor <code>-s</code> option has been specified.</li></ol><h2 id=default-shortcuts-w-libreadline>Default Shortcuts (w. <code>libreadline</code>)</h2><ul><li><p><code>Ctrl + a</code> go to the start of the command line</p></li><li><p><code>Ctrl + e</code> go to the end of the command line</p></li><li><p><code>Ctrl + k</code> delete from cursor to the end of the command line</p></li><li><p><code>Ctrl + u</code> delete from cursor to the start of the command line</p></li><li><p><code>Ctrl + w</code> delete from cursor to start of word (i.e. delete backwards one word)</p></li><li><p><code>Ctrl + y</code> paste word or text that was cut using one of the deletion shortcuts (such as the one above) after the cursor</p></li><li><p><code>Ctrl + xx</code> move between start of command line and current cursor position (and back again)</p></li><li><p><code>Alt + b</code> move backward one word (or go to start of word the cursor is currently on)</p></li><li><p><code>Alt + f</code> move forward one word (or go to end of word the cursor is currently on)</p></li><li><p><code>Alt + d</code> delete to end of word starting at cursor (whole word if cursor is at the beginning of word)</p></li><li><p><code>Alt + c</code> capitalize to end of word starting at cursor (whole word if cursor is at the beginning of word)</p></li><li><p><code>Alt + u</code> make uppercase from cursor to end of word</p></li><li><p><code>Alt + l</code> make lowercase from cursor to end of word</p></li><li><p><code>Alt + t</code> swap current word with previous</p></li><li><p><code>Ctrl + f</code> move forward one character</p></li><li><p><code>Ctrl + b</code> move backward one character</p></li><li><p><code>Ctrl + d</code> delete character under the cursor</p></li><li><p><code>Ctrl + h</code> delete character before the cursor</p></li><li><p><code>Ctrl + t</code> swap character under cursor with the previous one</p></li></ul><h2 id=grammar>Grammar</h2><ul><li>Bash program is a sequence of <code>&lt;newline></code>-separated <em>lists</em>.</li><li>A list is a sequence of <em>pipelines</em> separated by one of <code>; & && ||</code>, and optionally terminated by one of <code>; & &lt;newline></code>.</li><li>A pipeline is roughly a <code>|</code> or <code>|&</code> separated <em>commands</em>.</li></ul><p>To be more precise, a <code>time</code> keyword and a history operator <code>!</code> are allowed as a prefix:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#f92672>[</span>time <span style=color:#f92672>[</span>-p<span style=color:#f92672>]]</span> <span style=color:#f92672>[</span> ! <span style=color:#f92672>]</span> command <span style=color:#f92672>[</span> <span style=color:#f92672>[</span>|⎪|&amp;<span style=color:#f92672>]</span> command2 ... <span style=color:#f92672>]</span></span></span></code></pre></div><button>copy</button></div><h3 id=list>List</h3><ul><li>Return value of a synchronous list is defined as the process return value of the last executed pipeline</li><li>Return value of an asynchronous list (i.e. ends with <code>&</code>) is always 0.</li></ul><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#f92672>[</span>cesun@4700U<span style=color:#f92672>]</span> ~ $ <span style=color:#f92672>(</span> exit <span style=color:#ae81ff>42</span> <span style=color:#f92672>)</span> <span style=color:#f92672>||</span> <span style=color:#f92672>(</span> exit <span style=color:#ae81ff>55</span> <span style=color:#f92672>)</span>; echo $?
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ae81ff>55</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#f92672>[</span>cesun@4700U<span style=color:#f92672>]</span> ~ $ <span style=color:#f92672>(</span> exit <span style=color:#ae81ff>42</span> <span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>(</span> exit <span style=color:#ae81ff>55</span> <span style=color:#f92672>)</span>; echo $?
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#f92672>[</span>cesun@4700U<span style=color:#f92672>]</span> ~ $ <span style=color:#f92672>(</span> exit <span style=color:#ae81ff>42</span> <span style=color:#f92672>)</span> | <span style=color:#f92672>(</span> exit <span style=color:#ae81ff>55</span> <span style=color:#f92672>)</span>; echo $?
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#ae81ff>55</span></span></span></code></pre></div><button>copy</button></div><h3 id=pipeline>Pipeline</h3><p>Return value of a pipeline is defined as the return value of the last executed process.</p><h3 id=logical-line-and-line-break>logical line and line break</h3><p>Make sure necessary space or semicolon is still there.
Line break works by treating &lsquo;' and the immediately followed &lsquo;\n&rsquo; as non-existent, thus bring in the first characters of the next physical line. It will not add a space or anything for you. Thus</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>ls <span style=color:#e6db74>&#34;xxx&#34;</span><span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ae81ff></span><span style=color:#e6db74>&#34;yyy&#34;</span></span></span></code></pre></div><button>copy</button></div><p>is treated as</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>ls <span style=color:#e6db74>&#34;xxxyyy&#34;</span></span></span></code></pre></div><button>copy</button></div><h3 id=subshell>Subshell</h3><p><a href=https://unix.stackexchange.com/questions/138463/do-parentheses-really-put-the-command-in-a-subshell>https://unix.stackexchange.com/questions/138463/do-parentheses-really-put-the-command-in-a-subshell</a></p><p>A pair of parentheses <code>( )</code> always forked a subshell. Due to the property of <code>fork</code>, almost everything in the forked shell is identical to the parent shell. The implications are:</p><ul><li>Good part: everything survives in the subshell: unexported bash varaibles/functions and alias</li><li>bad part: forked shell does have the opportunity to change <code>$$</code>, but bash somehow doesn&rsquo;t. Bash does change <code>$BASHPID</code> though:</li></ul><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#f92672>[</span>cedo@juejueko<span style=color:#f92672>]</span> ~ $ echo $$
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ae81ff>7019</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#f92672>[</span>cedo@juejueko<span style=color:#f92672>]</span> ~ $ <span style=color:#f92672>(</span> eval <span style=color:#e6db74>&#39;echo $$&#39;</span> <span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#ae81ff>7019</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#f92672>[</span>cedo@juejueko<span style=color:#f92672>]</span> ~ $ echo $BASHPID
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#ae81ff>7019</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#f92672>[</span>cedo@juejueko<span style=color:#f92672>]</span> ~ $ <span style=color:#f92672>(</span> eval <span style=color:#e6db74>&#39;echo $BASHPID&#39;</span> <span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span><span style=color:#ae81ff>7246</span></span></span></code></pre></div><button>copy</button></div><p>One can also verify this by sourcing a script in the subshell which set some variables, and the parent shell won&rsquo;t have those variables.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#f92672>[</span>cesun@4700U<span style=color:#f92672>]</span> ~ $ <span style=color:#f92672>(</span> exit <span style=color:#ae81ff>42</span> <span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#f92672>[</span>cesun@4700U<span style=color:#f92672>]</span> ~ $ echo $?
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#ae81ff>42</span></span></span></code></pre></div><button>copy</button></div><h2 id=branching>Branching</h2><p>POSIX shell and Bash are only capable of branching on the return value of a pipeline (i.e. the return value of the last process in the pipeline).
i.e. there is no native concept of boolean expression.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>if</span> &lt;list&gt;; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    echo foo
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#66d9ef>elif</span> &lt;list&gt;; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>    echo bar
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>    echo gg
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#66d9ef>fi</span></span></span></code></pre></div><button>copy</button></div><p>Return code 0 from <code>&lt;list></code> is considered true, and everything else is considered false.</p><p>Many built-ins have been introduced to mimic the return value of a process, saving a real fork-exec of child process.:</p><ul><li><p><code>true</code> bash builtin: generate return code 0</p></li><li><p><code>false</code> bash builtin: generate return code 1</p></li><li><p><code>/usr/bin/[</code> executable and <code>[</code> bash builtin: POSIX compatible boolean expression evaluator</p></li><li><p><code>[[ ... ]]</code>: this double square bracket is a bash builtin</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span>! -d <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span><span style=color:#f92672>]]</span>;<span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>	&gt;&amp;<span style=color:#ae81ff>2</span> echo <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74> is not an directory&#34;</span>.
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>	exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#66d9ef>fi</span></span></span></code></pre></div><button>copy</button></div></li></ul><h3 id=logical-operators-for-strings>Logical Operators for Strings</h3><p>Unary:</p><table><thead><tr><th>syntax</th><th>semantics</th></tr></thead><tbody><tr><td><code>-z string</code></td><td><code>true</code> if empty string (length zero)</td></tr><tr><td><code>-n string</code> or simply <code>string</code></td><td><code>true</code> if non-empty string (length non-zero)</td></tr></tbody></table><p>Binary:</p><table><thead><tr><th>operator</th><th>semantics</th><th>sidenote</th></tr></thead><tbody><tr><td><code>string1 = string2</code> or <code>string1 == string2</code></td><td><code>true</code> if strings are literally identical</td><td>For POSIX-correctness, use <code>=</code> version with <code>test</code> or <code>[</code></td></tr><tr><td><code>string1 != string2</code></td><td><code>true</code> if strings are not literally identical</td><td></td></tr><tr><td><code>string1 &lt; string2</code></td><td><code>true</code> if string1 sorts before string2 lexicographically</td><td></td></tr><tr><td><code>string1 > string2</code></td><td><code>true</code> if string1 sorts after string2 lexicographically</td><td></td></tr></tbody></table><h3 id=logical-operators-for-numbers>Logical Operators For Numbers</h3><p>TODO</p><h3 id=branch-if-pattern-matches>Branch if Pattern Matches</h3><p>The <code>[[]]</code> syntax is assumed in this section.
All operators respect the <code>nocasematch</code> shopt option for case-sensitivity.</p><h4 id=wildcard-pattern>Wildcard Pattern</h4><p>Operator <code>==</code> and <code>!=</code> can test whether a string matches a <em>glob</em> pattern.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span>$MYVAR <span style=color:#f92672>==</span> pattern<span style=color:#f92672>]]</span>;<span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    echo <span style=color:#e6db74>&#34;asdasd&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span><span style=color:#e6db74>&#34;&#34;</span>!<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>]]</span>;<span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>    echo <span style=color:#e6db74>&#34;asdasd&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#66d9ef>fi</span></span></span></code></pre></div><button>copy</button></div><h4 id=posix-extended-regex-and-capturing-group-support-man-3-regex>POSIX Extended Regex and Capturing Group Support (man 3 regex)</h4><p>Operator <code>=~</code> can perform POSIX extended regex, return 0 when match, 1 when mismatch, and 2 when RHS pattern has bad syntax.</p><p><code>shopt -s/-u nocasematch</code> for case-insensitive/sensitive matching.</p><p>The scanning stops when the first match is found, i.e. <code>regexec</code> is called only once.</p><p>After a successful match, the <code>BASH_REMATCH</code> array variable</p><ul><li>stores the whole matched text at index 0</li><li>stores each capturing group since index 1</li></ul><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>i<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[Comic][JOJO 的奇妙冒險 Part7.STEEL.BALL.RUN][荒木飛呂彥][天下][小成]Vol_22.zip&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span><span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span>~ .*<span style=color:#f92672>(</span>Vol_..<span style=color:#f92672>)</span><span style=color:#ae81ff>\.</span>zip <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>    declare -p BASH_REMATCH
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#75715e># prints: declare -a BASH_REMATCH=([0]=&#34;[Comic][JOJO 的奇妙冒險 Part7.STEEL.BALL.RUN][荒木飛呂彥][天下][小成]Vol_22.zip&#34; [1]=&#34;Vol_22&#34;)</span></span></span></code></pre></div><button>copy</button></div><p><a href=https://stackoverflow.com/a/1892107><strong>It&rsquo;s recommended to put the pattern in an variable</strong></a>.</p><p>Quoting the pattern has special semantics:</p><blockquote><p>Any part of the pattern may be quoted to force the quoted portion to be matched as a string. (man bash)</p></blockquote><p>POSIX reg doesn&rsquo;t support non-greedy asterisk : <a href=https://stackoverflow.com/questions/20239817/posix-regular-expression-non-greedy>https://stackoverflow.com/questions/20239817/posix-regular-expression-non-greedy</a></p><h3 id=switch><code>switch</code></h3><p><code>;;</code> is equivalent to a <code>break</code> in common programming langauges.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>case</span> test-string in
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>	pattern-1<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>		commands-1
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>		;;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>	pattern-2<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>		commands-2
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>		;;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>	...
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span><span><span style=color:#66d9ef>esac</span></span></span></code></pre></div><button>copy</button></div><p><code>pattern</code> can contain:</p><ul><li><code>*</code> matches any sequence of character</li><li><code>?</code> match a single character</li><li><code>[...]</code></li><li><code>|</code> list alternatives</li></ul><h3 id=select-interactive-prompt><code>select</code>: interactive prompt</h3><p>The <code>select</code> keyword prompts an interactive menu for user to pick an option:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>select</span> var in &lt;tokens&gt;; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>	commands
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#66d9ef>done</span></span></span></code></pre></div><button>copy</button></div><p>where <code>&lt;tokens></code> is a sequence of whitespace-separated tokens.
The <code>in &lt;tokens></code> part can be omitted, which is equivalent to <code>select var in $@; do ...</code>.
<code>$@</code> is ws-separated tokens of bash invocation args outside functions, and function invocation args inside functions.</p><p>e.g.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>select</span> var in foo bar zoo; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>	echo <span style=color:#e6db74>&#34;you&#39;ve chosen </span>$var<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>	<span style=color:#75715e># do something else based on choice of $var</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#66d9ef>done</span></span></span></code></pre></div><button>copy</button></div><p>The above structure is equivalnet to the following loop:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>while</span> (true) {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>	prompt a choice menu
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>	wait <span style=color:#66d9ef>for</span> stdin and set <span style=color:#960050;background-color:#1e0010>$</span>var value
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>	execute whatever pipeline in the block		<span style=color:#75715e>// you must explicitly use `break` or will loop forever
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#75715e></span>}</span></span></code></pre></div><button>copy</button></div><h2 id=loop>Loop</h2><h3 id=for-each-token>for each token</h3><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># 用`$(seq first last)`或`{first..last}`来生成 tokens</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#66d9ef>for</span> value in whitespace separated tokens; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>	echo $value
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#66d9ef>done</span></span></span></code></pre></div><button>copy</button></div><p>Omitted <code>in whitespace separated tokens</code> defaults to <code>$@</code>. <code>$@</code> is ws-separated tokens of bash invocation args outside functions, and function invocation args inside functions.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># ./print-fruits.sh apple watermelon citrus</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#66d9ef>for</span> fruit; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>	echo $fruit <span style=color:#75715e># apple watermelon citrus</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#66d9ef>done</span></span></span></code></pre></div><button>copy</button></div><h3 id=c-like-triplet-for-loop>C-like triplet <code>for</code> loop</h3><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>for</span> <span style=color:#f92672>((</span> i<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span> ; i &lt; <span style=color:#ae81ff>10</span> ; i++ <span style=color:#f92672>))</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    echo $i
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#66d9ef>done</span></span></span></code></pre></div><button>copy</button></div><p><code>(( ... ))</code> is one of arithmetic evaluation environment, thus <code>=</code> and <code>+</code> does proper math instead of comparing strings.</p><p>Search for <code>ARITHMETIC EVALUATION</code> in <code>man 1 bash</code> for other arithmetic evaluation environments.</p><h3 id=while--until>while / until</h3><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>while</span> &lt;list&gt;; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    commands
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#75715e># negated while</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#66d9ef>until</span> &lt;list&gt;; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>	commands
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span><span style=color:#66d9ef>done</span></span></span></code></pre></div><button>copy</button></div><h2 id=expansion>Expansion</h2><p><em>Expansion</em> is whatever bash does to convert raw text input from stdin (supplied by <code>libreadline</code>) to arguments of <code>execve(2)</code> syscall.</p><p>Expansions are done in the following order:</p><ol><li>Brace expansion: 2 type of <code>{}</code> enclosed sytnax are first expanded, e.g. <code>{0...9}</code> and <code>{a,b,c}.txt</code></li><li>Tilde expansion: then, <code>~</code> are replaced with user&rsquo;s home directory</li><li>Parameter (a.k.a Variable) expansion</li><li>Arithmetic expansion</li><li>Command Substitution expansion</li></ol><h3 id=parameter-expansion>Parameter Expansion</h3><h4 id=prefixsuffix-removal>prefix/suffix removal</h4><p>See <code>man bash</code> section &ldquo;Parameter Expansion&rdquo;</p><p>Syntax:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#e6db74>${</span>var#pattern<span style=color:#e6db74>}</span>      <span style=color:#75715e># prefix non-greedy removal</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#e6db74>${</span>var##pattern<span style=color:#e6db74>}</span>     <span style=color:#75715e># prefix greedy removal</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#e6db74>${</span>var%pattern<span style=color:#e6db74>}</span>      <span style=color:#75715e># suffix non-greedy removal</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#e6db74>${</span>var%%pattern<span style=color:#e6db74>}</span>     <span style=color:#75715e># suffix greedy removal</span></span></span></code></pre></div><button>copy</button></div><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>filename<span style=color:#f92672>=</span>foobarfoo.bar.mp3
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>echo <span style=color:#e6db74>${</span>filename#f*o<span style=color:#e6db74>}</span>    <span style=color:#75715e># obarfoo.bar.mp3</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>echo <span style=color:#e6db74>${</span>filename##f*o<span style=color:#e6db74>}</span>   <span style=color:#75715e># .bar.mp3</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>echo <span style=color:#e6db74>${</span>filename%bar*<span style=color:#e6db74>}</span>   <span style=color:#75715e># foobarfoo.</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>echo <span style=color:#e6db74>${</span>filename%%bar*<span style=color:#e6db74>}</span>  <span style=color:#75715e># foo</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#75715e># works element-wise if var is an array indexed by `@` or `*`</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span><span style=color:#75715e># TODO</span></span></span></code></pre></div><button>copy</button></div><p>Useful snippet for splitting filename and extension. <a href=https://stackoverflow.com/questions/965053/extract-filename-and-extension-in-bash>(credit)</a>:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>filename<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>basename -- <span style=color:#e6db74>&#34;</span>$fullfile<span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>extension<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>filename##*.<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>filename<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>filename%.*<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span></span></span></code></pre></div><button>copy</button></div><h4 id=pattern-substitution>Pattern Substitution</h4><p>Syntax: <code>${var/glob/string}</code></p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># `#` and `%` matches the beginning and the end of the value</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e># of `var`, respectively.</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>x<span style=color:#f92672>=</span><span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>x/#/str<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e># str42</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>x/%/str<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e># 42str</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#75715e># works element-wise if var is an array indexed by `@` or `*`;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>words<span style=color:#f92672>=(</span>foo zoo oop<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>words[@]/oo/xx<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e># fxx zxx xxp</span></span></span></code></pre></div><button>copy</button></div><h4 id=to-uppercaselowercase>To Uppercase/Lowercase</h4><p>The following is bash-specific. For posix see <a href=https://stackoverflow.com/questions/2264428/how-to-convert-a-string-to-lower-case-in-bash>this</a>.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>hw<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;HeLlO WoRlD&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>hw,,<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e># all to lowercase</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>hw^^<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e># all to uppercase</span></span></span></code></pre></div><button>copy</button></div><h4 id=fallbacks>Fallbacks</h4><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># expand $HOME if $XDG_DATA_HOME is unset or null. (TODO: null?)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>XDG_DATA_HOME<span style=color:#66d9ef>:-</span>$HOME/.local/share<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span></span></span></code></pre></div><button>copy</button></div><h2 id=variables>Variables</h2><p>A new variable is introduced by its first assignment:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>x<span style=color:#f92672>=</span><span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>readonly x
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>x<span style=color:#f92672>=</span><span style=color:#ae81ff>52</span>    <span style=color:#75715e># bash: x: readonly variable</span></span></span></code></pre></div><button>copy</button></div><h3 id=array>Array</h3><p>In Bash&rsquo;s speech, there are 2 types of arrays:</p><ol><li><p>associative array (hashmap), and</p></li><li><p>Indexed Array (list).</p><p>Is an associative array with the restriction that <code>key</code> (still a string) must resolves to a non-negative integer.
Normally should be 0-based.</p></li></ol><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># associative array</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>declare -A map_a
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#75715e># Indexed Array</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>declare -a arr_a
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#75715e># or</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>arr_b<span style=color:#f92672>[</span>0<span style=color:#f92672>]=</span><span style=color:#ae81ff>42</span></span></span></code></pre></div><button>copy</button></div><h4 id=compound-assignment>Compound Assignment</h4><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e># if `xxx` is not declared, this creates an indexed array of size 6;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e># or if `xxx` was declared as an indexed array, this overwrites it.</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>xxx<span style=color:#f92672>=(</span><span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> x y z<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#75715e># if `yyy` was declared as an associative array, the same syntax</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#75715e># overwrites it as `([3]=&#34;x&#34; [1]=&#34;2&#34; [y]=&#34;z&#34; )`.</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>yyy<span style=color:#f92672>=(</span><span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> x y z<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#75715e># and is equivalent to `yyy=([1]=2 [3]=x [y]=z)`</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#75715e># if `zzz` is not declared, or was declared as an index array,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#75715e># this produce undefined behavior:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>zzz<span style=color:#f92672>=([</span>a<span style=color:#f92672>]=</span><span style=color:#ae81ff>42</span> <span style=color:#f92672>[</span>b<span style=color:#f92672>]=</span>11<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#75715e># if `uuu` was declared as an associative array,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#75715e># this works as expected:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>uuu<span style=color:#f92672>=([</span>a<span style=color:#f92672>]=</span><span style=color:#ae81ff>42</span> <span style=color:#f92672>[</span>b<span style=color:#f92672>]=</span>11<span style=color:#f92672>)</span></span></span></code></pre></div><button>copy</button></div><h4 id=push-back>Push Back</h4><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>arr_a<span style=color:#f92672>=()</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>arr_a<span style=color:#f92672>+=(</span><span style=color:#e6db74>&#39;foo&#39;</span><span style=color:#f92672>)</span>  <span style=color:#75715e># the surrounding () is required</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>arr_a<span style=color:#f92672>+=(</span><span style=color:#e6db74>&#39;bar&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#75715e># $ declare -p arr_a</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#75715e># declare -a arr_a=([0]=&#34;foo&#34; [1]=&#34;bar&#34;)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#75715e># wrong example</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>arr_b<span style=color:#f92672>=()</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>arr_b<span style=color:#f92672>+=</span><span style=color:#e6db74>&#39;foo&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>arr_b<span style=color:#f92672>+=</span><span style=color:#e6db74>&#39;bar&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#75715e># $ declare -p arr_b</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#75715e># declare -a arr_b=([0]=&#34;foobar&#34;) # become concatenation</span></span></span></code></pre></div><button>copy</button></div><p><a href=https://stackoverflow.com/questions/1951506/add-a-new-element-to-an-array-without-specifying-the-index-in-bash>https://stackoverflow.com/questions/1951506/add-a-new-element-to-an-array-without-specifying-the-index-in-bash</a></p><h4 id=element-accessing--assignment>Element Accessing & Assignment</h4><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>arr_a<span style=color:#f92672>=(</span><span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> x y z<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>declare -A map_a
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>map_a<span style=color:#f92672>=(</span>usa washington china beijing france paris<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#75715e># read</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>echo <span style=color:#e6db74>${</span>arr_a[3]<span style=color:#e6db74>}</span> <span style=color:#75715e># x</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>echo <span style=color:#e6db74>${</span>map_a[france]<span style=color:#e6db74>}</span> <span style=color:#75715e>#paris</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#75715e># assign</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>arr_a<span style=color:#f92672>[</span>3<span style=color:#f92672>]=</span><span style=color:#e6db74>&#39;foo&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>echo <span style=color:#e6db74>${</span>arr_a[3]<span style=color:#e6db74>}</span> <span style=color:#75715e># foo</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>map_a<span style=color:#f92672>[</span>france<span style=color:#f92672>]=</span><span style=color:#e6db74>&#39;foo&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>echo <span style=color:#e6db74>${</span>map_a[france]<span style=color:#e6db74>}</span> <span style=color:#75715e># foo</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#75715e># expanding the whole array</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>arr_b<span style=color:#f92672>=(</span><span style=color:#e6db74>&#39;a    b&#39;</span> <span style=color:#e6db74>&#39;c   d   e&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>echo <span style=color:#e6db74>${</span>arr_a[@]<span style=color:#e6db74>}</span> <span style=color:#75715e># echo receives 5 words: `a`,`b`,`c`,`d`,`e`</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>echo <span style=color:#e6db74>${</span>arr_a[*]<span style=color:#e6db74>}</span> <span style=color:#75715e># always equivalent to above</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>arr_a[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e># echo receives 2 words: `a    b` and `c   d   e`</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>arr_a[*]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e># echo receives 1 words: `a    b&lt;FC_IFS&gt;c   d   e`,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#75715e># where &lt;FC_IFS&gt; is the first character of the special variable `IFS`</span></span></span></code></pre></div><button>copy</button></div><h4 id=iteration>Iteration</h4><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>a<span style=color:#f92672>=(</span><span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> a b c<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e># get length</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${#</span>a[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#75715e># 6</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#75715e># by value</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#66d9ef>for</span> v in <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>a[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>do</span> echo <span style=color:#e6db74>&#34;</span>$v<span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#75715e># by index</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#66d9ef>for</span> i in <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>!a[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>do</span> echo <span style=color:#e6db74>&#34;cur: </span>$i<span style=color:#e6db74> - </span><span style=color:#e6db74>${</span>a[$i]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>done</span></span></span></code></pre></div><button>copy</button></div><h4 id=delete-element>Delete Element</h4><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>a<span style=color:#f92672>=(</span><span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> 3<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>declare -p a <span style=color:#75715e># declare -a a=([0]=&#34;1&#34; [1]=&#34;2&#34; [2]=&#34;3&#34;)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>unset a<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>declare -p a <span style=color:#75715e># declare -a a=([0]=&#34;1&#34; [2]=&#34;3&#34;)</span></span></span></code></pre></div><button>copy</button></div><h4 id=element-wise-mapping>Element-wise Mapping</h4><p><strong>Simple scenario</strong>: prepend or append some characters to each element:</p><p><a href=https://stackoverflow.com/questions/27346410/expand-bash-array-into-curly-braces-syntax>https://stackoverflow.com/questions/27346410/expand-bash-array-into-curly-braces-syntax</a></p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>oj<span style=color:#f92672>=(</span>uva poj hdu leetcode<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#66d9ef>for</span> d in <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>oj[@]/#/src/<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>do</span> echo <span style=color:#e6db74>&#34;</span>$d<span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#75715e># combine with compound assignment,</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#75715e># we can make the result in a new array</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>srcoj<span style=color:#f92672>=(</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>oj[@]/#/src/<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>)</span></span></span></code></pre></div><button>copy</button></div><p><strong>More general solution</strong>: set <code>IFS=,</code> so that <code>eval</code> text becomes valid <code>{,,,}</code> syntax</p><p><a href=https://unix.stackexchange.com/questions/90938/possible-to-use-brace-permutation-and-array-expansion-simultaneously>https://unix.stackexchange.com/questions/90938/possible-to-use-brace-permutation-and-array-expansion-simultaneously</a></p><p>Demo: surroundings (i.e. prepend and append at the same time), plus special character (semicolon) handling:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>oj<span style=color:#f92672>=(</span><span style=color:#e6db74>&#39;u;v;a&#39;</span> <span style=color:#e6db74>&#39;p;o;j&#39;</span> hdu leetcode<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>OLDIFS<span style=color:#f92672>=</span>$IFS
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>IFS<span style=color:#f92672>=</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#75715e># Pattern substitution by default only replace the longest match</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#75715e># If pattern begins with a &#39;/&#39;, all occurrence of pattern are replaced. i.e. the reason for &#39;/;&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>eval echo <span style=color:#e6db74>&#34;foo{</span><span style=color:#e6db74>${</span>oj[*]//;/<span style=color:#ae81ff>\\</span>;<span style=color:#e6db74>}</span><span style=color:#e6db74>}bar&#34;</span>    <span style=color:#75715e># foou;v;abar foop;o;jbar foohdubar fooleetcodebar</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>IFS<span style=color:#f92672>=</span>$OLDIFS</span></span></code></pre></div><button>copy</button></div><p>Eval always makes shell code harder to read and maintain. In doubt, use ordinary for loop.</p><h2 id=function>Function</h2><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>valid<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    echo <span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>alsoValid<span style=color:#f92672>()</span> <span style=color:#f92672>{</span> echo 42; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>invalid<span style=color:#f92672>()</span> <span style=color:#f92672>{</span> echo <span style=color:#ae81ff>42</span> <span style=color:#f92672>}</span></span></span></code></pre></div><button>copy</button></div><p>The closing curly brace must either</p><ul><li>be in a separate line; or</li><li>preceded by a <code>;</code> token</li></ul><p>Function name is simply a variable storing the literal source code of the function body.</p><p>Nothing is done at parse time. Not even syntax check, set aside vairable expansion.</p><p>Export a function (bash specific):</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>foo<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    echo <span style=color:#e6db74>&#39;foo&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>export -f foo <span style=color:#75715e># done by creating a env var `BASH_FUNC_foo%%`</span></span></span></code></pre></div><button>copy</button></div><h3 id=arguments>Arguments</h3><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>funcName<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>    <span style=color:#75715e># $0 is always the invoked name of the shell</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>    echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>0<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    <span style=color:#75715e># access individual argument</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>1<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>2<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>15<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    <span style=color:#75715e># access all arguments as a sequence of bash token</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    echo <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#f92672>}</span></span></span></code></pre></div><button>copy</button></div><p>Given <code>print-args</code>, a simple C-program that dumps its <code>argv[]</code> array:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>foo<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    ./print-args $@
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#75715e># argc=4</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#75715e># argv[0]=&gt;./print-args&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#75715e># argv[1]=&gt;a&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#75715e># argv[2]=&gt;b&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#75715e># argv[3]=&gt;c&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>    ./print-args $*
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#75715e># argc=4</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#75715e># argv[0]=&gt;./print-args&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#75715e># argv[1]=&gt;a&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#75715e># argv[2]=&gt;b&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#75715e># argv[3]=&gt;c&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>    ./print-args <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#75715e># argc=4</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#75715e># argv[0]=&gt;./print-args&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#75715e># argv[1]=&gt;a&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#75715e># argv[2]=&gt;b&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#75715e># argv[3]=&gt;c&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>    ./print-args <span style=color:#e6db74>&#34;</span>$*<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span><span style=color:#75715e># argc=2</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span><span style=color:#75715e># argv[0]=&gt;./print-args&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span><span style=color:#75715e># argv[1]=&gt;a b c&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span>    OLDIFS<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$IFS<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span>    IFS<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;S&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>    ./print-args $@
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span><span style=color:#75715e># argc=4</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span><span style=color:#75715e># argv[0]=&gt;./print-args&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span><span style=color:#75715e># argv[1]=&gt;a&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span><span style=color:#75715e># argv[2]=&gt;b&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span><span style=color:#75715e># argv[3]=&gt;c&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span>    ./print-args $*
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span><span style=color:#75715e># argc=4</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span><span style=color:#75715e># argv[0]=&gt;./print-args&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span><span style=color:#75715e># argv[1]=&gt;a&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span><span><span style=color:#75715e># argv[2]=&gt;b&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span><span><span style=color:#75715e># argv[3]=&gt;c&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span><span>    ./print-args <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span><span><span style=color:#75715e># argc=4</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span><span><span style=color:#75715e># argv[0]=&gt;./print-args&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span><span><span style=color:#75715e># argv[1]=&gt;a&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span><span><span style=color:#75715e># argv[2]=&gt;b&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span><span><span style=color:#75715e># argv[3]=&gt;c&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span><span>    ./print-args <span style=color:#e6db74>&#34;</span>$*<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span><span><span style=color:#75715e># argc=2</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span><span><span style=color:#75715e># argv[0]=&gt;./print-args&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span><span><span style=color:#75715e># argv[1]=&gt;aSbSc&lt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50</span><span>    IFS<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$OLDIFS<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51</span><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53</span><span>foo a b c</span></span></code></pre></div><button>copy</button></div><h2 id=prompting-ps1234>Prompting: <code>PS[1234]</code></h2><p>Literal value of <code>PS[1234]</code> undergo most expansions (as descirbed in <code>/^EXPANSION</code> section of <code>man bash</code>), except the brace and tilde ones.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#f92672>[</span>cesun@4700U ~<span style=color:#f92672>]</span>$ bash --norc
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>bash-5.1$ a<span style=color:#f92672>=</span><span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>bash-5.1$ b<span style=color:#f92672>=</span><span style=color:#ae81ff>55</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>bash-5.1$ PS1<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;${a}${b}&#39;</span> <span style=color:#75715e># literal value of PS1 is now unexpanded &#39;${a}${b}&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#ae81ff>4255</span> <span style=color:#75715e>#cursor right here (no space)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>4255PS1<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;$(( a + b ))&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#ae81ff>97</span> <span style=color:#75715e>#even arithmetic expansion works</span></span></span></code></pre></div><button>copy</button></div><p>Some extra escape exists solely when expanding these variable:</p><ul><li><p><code>\e</code> for <code>0x1B ESC</code></p></li><li><p><code>\r</code> for <code>0x0D CR</code> and <code>\n</code> for <code>0x0A LF</code></p></li><li><p><code>\nnn</code> for ASCII codepoint in octal value <code>nnn</code>.</p></li><li><p><code>\\</code> for a literal backslash</p></li><li><p><code>\[</code> and <code>\]</code> don&rsquo;t escape to anything, but serve as guard boundary to be warp around control sequences. This allow bash to compute stuffs like line wrap correctlly.</p><p>This <code>PS1</code> cause the input echo line to wrap prematurelly:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>set_fg_green<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>tput setaf 42<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>set_fg_what<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>tput setaf 133<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>reset_color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;\[\e[m\]&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>PS1<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>set_fg_green<span style=color:#e6db74>}</span><span style=color:#e6db74>[\u@\h \W</span><span style=color:#e6db74>${</span>set_fg_what<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>&#39;$(__git_ps1 &#34; (%s)&#34;)&#39;</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>set_fg_green<span style=color:#e6db74>}</span><span style=color:#e6db74>]\$</span><span style=color:#e6db74>${</span>reset_color<span style=color:#e6db74>}</span><span style=color:#e6db74> &#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#f92672>[</span>cesun@4700U ~<span style=color:#f92672>]</span>$ echo -n <span style=color:#e6db74>&#34;</span>$PS1<span style=color:#e6db74>&#34;</span> | hexdump -C
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#ae81ff>00000000</span>  1b 5b <span style=color:#ae81ff>33</span> <span style=color:#ae81ff>38</span> 3b <span style=color:#ae81ff>35</span> 3b <span style=color:#ae81ff>34</span>  <span style=color:#ae81ff>32</span> 6d 5b 5c <span style=color:#ae81ff>75</span> <span style=color:#ae81ff>40</span> 5c <span style=color:#ae81ff>68</span>  |.<span style=color:#f92672>[</span>38;5;42m<span style=color:#f92672>[</span><span style=color:#ae81ff>\u</span>@<span style=color:#ae81ff>\h</span>|
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#ae81ff>00000010</span>  <span style=color:#ae81ff>20</span> 5c <span style=color:#ae81ff>57</span> 1b 5b <span style=color:#ae81ff>33</span> <span style=color:#ae81ff>38</span> 3b  <span style=color:#ae81ff>35</span> 3b <span style=color:#ae81ff>31</span> <span style=color:#ae81ff>33</span> <span style=color:#ae81ff>33</span> 6d <span style=color:#ae81ff>24</span> <span style=color:#ae81ff>28</span>  | <span style=color:#ae81ff>\W</span>.<span style=color:#f92672>[</span>38;5;133m<span style=color:#66d9ef>$(</span>|
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#ae81ff>00000020</span>  5f 5f <span style=color:#ae81ff>67</span> <span style=color:#ae81ff>69</span> <span style=color:#ae81ff>74</span> 5f <span style=color:#ae81ff>70</span> <span style=color:#ae81ff>73</span>  <span style=color:#ae81ff>31</span> <span style=color:#ae81ff>20</span> <span style=color:#ae81ff>22</span> <span style=color:#ae81ff>20</span> <span style=color:#ae81ff>28</span> <span style=color:#ae81ff>25</span> <span style=color:#ae81ff>73</span> <span style=color:#ae81ff>29</span>  |__git_ps1 <span style=color:#e6db74>&#34; (%s)|
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#e6db74>00000030  22 29 1b 5b 33 38 3b 35  3b 34 32 6d 5d 24 5c 5b  |&#34;</span><span style=color:#66d9ef>)</span>.<span style=color:#f92672>[</span>38;5;42m<span style=color:#f92672>]</span>$<span style=color:#ae81ff>\[</span>|
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#ae81ff>00000040</span>  5c <span style=color:#ae81ff>65</span> 5b 6d 5c 5d <span style=color:#ae81ff>20</span>                              |<span style=color:#ae81ff>\e</span><span style=color:#f92672>[</span>m<span style=color:#ae81ff>\]</span> |
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#ae81ff>00000047</span></span></span></code></pre></div><button>copy</button></div><p>While this one does not:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e># .bashrc</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>set_fg_green<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\[</span><span style=color:#66d9ef>$(</span>tput setaf 42<span style=color:#66d9ef>)</span><span style=color:#e6db74>\]&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>set_fg_what<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\[</span><span style=color:#66d9ef>$(</span>tput setaf 133<span style=color:#66d9ef>)</span><span style=color:#e6db74>\]&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>reset_color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;\[\e[m\]&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>PS1<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>set_fg_green<span style=color:#e6db74>}</span><span style=color:#e6db74>[\u@\h \W</span><span style=color:#e6db74>${</span>set_fg_what<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>&#39;$(__git_ps1 &#34; (%s)&#34;)&#39;</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>set_fg_green<span style=color:#e6db74>}</span><span style=color:#e6db74>]\$</span><span style=color:#e6db74>${</span>reset_color<span style=color:#e6db74>}</span><span style=color:#e6db74> &#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#f92672>[</span>cesun@4700U ~<span style=color:#f92672>]</span>$ echo -n <span style=color:#e6db74>&#34;</span>$PS1<span style=color:#e6db74>&#34;</span> | hexdump -C
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#ae81ff>00000000</span>  5c 5b 1b 5b <span style=color:#ae81ff>33</span> <span style=color:#ae81ff>38</span> 3b <span style=color:#ae81ff>35</span>  3b <span style=color:#ae81ff>34</span> <span style=color:#ae81ff>32</span> 6d 5c 5d 5b 5c  |<span style=color:#ae81ff>\[</span>.<span style=color:#f92672>[</span>38;5;42m<span style=color:#ae81ff>\]</span><span style=color:#f92672>[</span><span style=color:#ae81ff>\|</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#ae81ff>00000010</span>  <span style=color:#ae81ff>75</span> <span style=color:#ae81ff>40</span> 5c <span style=color:#ae81ff>68</span> <span style=color:#ae81ff>20</span> 5c <span style=color:#ae81ff>57</span> 5c  5b 1b 5b <span style=color:#ae81ff>33</span> <span style=color:#ae81ff>38</span> 3b <span style=color:#ae81ff>35</span> 3b  |u@<span style=color:#ae81ff>\h</span> <span style=color:#ae81ff>\W\[</span>.<span style=color:#f92672>[</span>38;5;|
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#ae81ff>00000020</span>  <span style=color:#ae81ff>31</span> <span style=color:#ae81ff>33</span> <span style=color:#ae81ff>33</span> 6d 5c 5d <span style=color:#ae81ff>24</span> <span style=color:#ae81ff>28</span>  5f 5f <span style=color:#ae81ff>67</span> <span style=color:#ae81ff>69</span> <span style=color:#ae81ff>74</span> 5f <span style=color:#ae81ff>70</span> <span style=color:#ae81ff>73</span>  |133m<span style=color:#ae81ff>\]</span><span style=color:#66d9ef>$(</span>__git_ps|
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#ae81ff>00000030</span>  <span style=color:#ae81ff>31</span> <span style=color:#ae81ff>20</span> <span style=color:#ae81ff>22</span> <span style=color:#ae81ff>20</span> <span style=color:#ae81ff>28</span> <span style=color:#ae81ff>25</span> <span style=color:#ae81ff>73</span> <span style=color:#ae81ff>29</span>  <span style=color:#ae81ff>22</span> <span style=color:#ae81ff>29</span> 5c 5b 1b 5b <span style=color:#ae81ff>33</span> <span style=color:#ae81ff>38</span>  |<span style=color:#ae81ff>1</span> <span style=color:#e6db74>&#34; (%s)&#34;</span><span style=color:#66d9ef>)</span><span style=color:#ae81ff>\[</span>.<span style=color:#f92672>[</span>38|
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#ae81ff>00000040</span>  3b <span style=color:#ae81ff>35</span> 3b <span style=color:#ae81ff>34</span> <span style=color:#ae81ff>32</span> 6d 5c 5d  5d <span style=color:#ae81ff>24</span> 5c 5b 5c <span style=color:#ae81ff>65</span> 5b 6d  |;5;42m<span style=color:#ae81ff>\]</span><span style=color:#f92672>]</span>$<span style=color:#ae81ff>\[\e</span><span style=color:#f92672>[</span>m|
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#ae81ff>00000050</span>  5c 5d <span style=color:#ae81ff>20</span>                                          |<span style=color:#ae81ff>\]</span> |
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#ae81ff>00000053</span></span></span></code></pre></div><button>copy</button></div></li><li><p>everything else is placeholder meant to be substituted at runtime by Bash.</p><ul><li>See <code>man bash</code> for a exhausitive list.</li></ul></li></ul><h2 id=pipelining--redirection>Pipelining & Redirection</h2><p>Pipeline establishes before any redirection. This means the second line pipes foo&rsquo;s stderr as well:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>foo | bar		    <span style=color:#75715e># foo&#39;s stdout to bar&#39;s stdin</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>foo 2&gt;&amp;<span style=color:#ae81ff>1</span> | bar		<span style=color:#75715e># foo&#39;s stdout to bar&#39;s stdin, then foo&#39;s stderr to foo&#39;s stdout = foo&#39;s stderr to bar&#39;s stdin</span></span></span></code></pre></div><button>copy</button></div><p>Bash support a dangerous syntactic sugar for this:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>foo |&amp; bar		    <span style=color:#75715e># equivalent to `foo 2&gt;&amp;1 | bar`</span></span></span></code></pre></div><button>copy</button></div><h3 id=fd-duplication>FD duplication</h3><p><code>n>&amp;m</code> clones the file descriptor <code>fd[n] = fd[m]</code> so that <code>fd[n]</code> and <code>fd[m]</code> refer to the same file description.\</p><p>If <code>n</code> is 1 (stdout), it could be omitted. When more than 1 redirection/duplication are put on the cli, they happen in textual order.</p><p>Under the hood bash use <code>man 2 dup</code> syscalls. See <a href=./linux-pipe.md></a>for a kernel perspective of such duplication.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>&gt;&amp;<span style=color:#ae81ff>2</span> echo <span style=color:#e6db74>&#34;echo to stderr&#34;</span> <span style=color:#75715e># equivalent to: 1&gt;&amp;2 echo &#34;echo to stderr&#34;</span></span></span></code></pre></div><button>copy</button></div><p>FD duplication is just one type of redirection, so it happens after pipeline establishment. For instance, neither of the following will pipe stuff to <code>hexdump</code>:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>&gt;&amp;<span style=color:#ae81ff>2</span> echo <span style=color:#e6db74>&#34;echo to stderr&#34;</span> | hexdump -C      <span style=color:#75715e># hexdump receives nothing</span></span></span></code></pre></div><button>copy</button></div><ol><li>echo&rsquo;s stdout to hexdump&rsquo;s stdin (pipe)</li><li>echo&rsquo;s stdout to echo&rsquo;s stderr (dup) ; Thus hexdump receives nothing.</li></ol><p>Mixing <code>|&</code> syntax and fd duplication is dangerous:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>&gt;&amp;<span style=color:#ae81ff>2</span> echo <span style=color:#e6db74>&#34;echo to stderr&#34;</span> |&amp; hexdump -C     <span style=color:#75715e># again, hexdump receives nothing</span></span></span></code></pre></div><button>copy</button></div><p>The above may feels like we are sending stdout to stderr&rsquo;s device, and pipe everything via stderr to <code>hexdump</code>.
But remember after desugaring the line is really:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>1&gt;&amp;<span style=color:#ae81ff>2</span> echo <span style=color:#e6db74>&#34;echo to stderr&#34;</span> 2&gt;&amp;<span style=color:#ae81ff>1</span> | hexdump -C     <span style=color:#75715e># again, hexdump receives nothing</span></span></span></code></pre></div><button>copy</button></div><p>Don&rsquo;t forget that pipeline happens first, and then redirection/duplication happens in textual order. So</p><ol><li>echo&rsquo;s stdout are connected to hexdump&rsquo;s stdin (pipeline)</li><li>echo&rsquo;s stdout dup stderr (the tty)</li><li>echo&rsquo;s stderr dup stdout (the tty)</li></ol><p>Thus everything is still sent to the terminal.</p><h3 id=heredoc>heredoc</h3><p>Heredoc is still affected by all the bash expansion rules:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>cat <span style=color:#e6db74>&lt;&lt;EOF
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#e6db74>${BASHPID}
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#e6db74>EOF</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#75715e># prints: 11216</span></span></span></code></pre></div><button>copy</button></div><h3 id=here-string>here string</h3><h3 id=function--block-construct-can-be-redirected>function / block construct can be redirected</h3><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>fooo<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>	head -c3 -
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>	echo
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>	head -c3 -
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>	echo
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>	head -c3 -
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>	echo
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>echo <span style=color:#e6db74>&#39;123abc999ggg&#39;</span> | fooo
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#75715e># 123</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#75715e># abc</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#75715e># 999</span></span></span></code></pre></div><button>copy</button></div><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>echo -e <span style=color:#e6db74>&#39;123abcxxx\n000\n&#39;</span> | <span style=color:#66d9ef>while</span> read data; <span style=color:#66d9ef>do</span>   echo $data;   head -c1;   echo; <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e># 123abcxxx</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#75715e># 0</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#75715e># 00</span></span></span></code></pre></div><button>copy</button></div><h2 id=input--output>Input / Output</h2><h3 id=read><code>read</code></h3><p>Read 1 line from stdin, or from a file descriptor if <code>-u &lt;fd></code> is given, into an variable, <em>with LF removed</em>.</p><p>If no variable name is given, defaults to <code>$REPLY</code>.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># loop over each line of file</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#66d9ef>while</span> read line; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>    echo $line
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#66d9ef>done</span> &lt;/etc/passwd</span></span></code></pre></div><button>copy</button></div><h3 id=mapfile--readarray>mapfile / readarray</h3><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>&lt;/etc/passwd mapfile -n <span style=color:#ae81ff>42</span> my_array
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#75715e># $ declare -p my_array </span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>declare -a my_array<span style=color:#f92672>=(</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    <span style=color:#f92672>[</span>0<span style=color:#f92672>]=</span><span style=color:#e6db74>$&#39;root:x:0:0::/root:/bin/bash\n&#39;</span> 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>    <span style=color:#f92672>[</span>1<span style=color:#f92672>]=</span><span style=color:#e6db74>$&#39;bin:x:1:1::/:/usr/bin/nologin\n&#39;</span> 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    <span style=color:#f92672>[</span>2<span style=color:#f92672>]=</span><span style=color:#e6db74>$&#39;daemon:x:2:2::/:/usr/bin/nologin\n&#39;</span> 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>    <span style=color:#f92672>[</span>3<span style=color:#f92672>]=</span><span style=color:#e6db74>$&#39;mail:x:8:12::/var/spool/mail:/usr/bin/nologin\n&#39;</span> 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    <span style=color:#f92672>[</span>4<span style=color:#f92672>]=</span><span style=color:#e6db74>$&#39;ftp:x:14:11::/srv/ftp:/usr/bin/nologin\n&#39;</span> 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>    <span style=color:#75715e># ...</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#f92672>)</span></span></span></code></pre></div><button>copy</button></div><p>Read all lines from stdin, or <code>count</code> lines if <code>-n &lt;count></code> is given, into an (indexed) array, <em>with LF preserved</em>.</p><p>If no array name is given, default to <code>$MAPFILE</code>.</p><p><code>readarray</code> is alias of <code>mapfile</code>.</p><h2 id=arithmetics>Arithmetics</h2><h3 id=equivalence-of--and--eq>equivalence of <code>==</code> and <code>-eq</code></h3><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> <span style=color:#66d9ef>$((</span> $c <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#66d9ef>))</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>]]</span> ; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    echo $c
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> <span style=color:#66d9ef>$((</span> $c <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#66d9ef>))</span> -eq <span style=color:#ae81ff>0</span> <span style=color:#f92672>]]</span> ; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>    echo $c
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#66d9ef>fi</span></span></span></code></pre></div><button>copy</button></div><h3 id=remove-preceding-0>Remove preceding <code>0</code></h3><p>scenario: for a directory holding <code>{0000..1000}.jpg</code> files, move the odd number files to <code>foo/</code> and even ones to <code>bar/</code>:</p><p><code>$(( $f % 2))</code> expands to <code>$(( 0005 % 2 ))</code> then interpreted as an octal number, and fails at <code>0008</code>.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>mkdir fr en
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#66d9ef>for</span> i in *.jpg;<span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>    c<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>expr <span style=color:#e6db74>${</span>i%.jpg<span style=color:#e6db74>}</span> + 0<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> <span style=color:#66d9ef>$((</span> $c <span style=color:#f92672>%</span> <span style=color:#ae81ff>2</span> <span style=color:#66d9ef>))</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>]]</span> ; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>        cp $i fr
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>        cp $i en
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>    <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#66d9ef>done</span></span></span></code></pre></div><button>copy</button></div><h2 id=shopt-and-set-flags><code>shopt</code> and <code>set</code> flags</h2><p><a href=https://unix.stackexchange.com/questions/32409/set-and-shopt-why-two>https://unix.stackexchange.com/questions/32409/set-and-shopt-why-two</a></p><ul><li><code>shopt</code> is bash-specific.</li><li><code>set</code> is in POSIX.</li></ul><h3 id=set-flags><code>set</code> flags</h3><p><code>set -e</code>: Exit upon error</p><h3 id=shopt-flags><code>shopt</code> flags</h3><h4 id=control-globbing-behavior>Control Globbing Behavior</h4><ul><li><code>nullglob</code></li><li><code>failglob</code></li><li><code>extglob</code></li></ul><h2 id=built-in-commands>Built-in commands</h2><h3 id=source><code>source</code></h3><p><code>source</code> is bash-specific. For POSIX correctness, use <code>.</code>.</p><p>Sourced files are executed <strong>in the same shell</strong> (in contrary to a forked subshell), meaning that un-exported variables and functions can be used.</p><p><code>/etc/profile</code> sourcing <code>/etc/profile.d/*sh</code> demonstrates this. All utility functions defined in <code>/etc/profile</code> can be called in <code>/etc/profile.d/*.sh</code>.</p><h2 id=special-variables>Special Variables</h2><h3 id=ifs>IFS</h3><p>default: <code>&lt;space>&lt;tab>&lt;newline></code></p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>$ echo -n <span style=color:#e6db74>&#34;</span>$IFS<span style=color:#e6db74>&#34;</span> | xxd -p
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>20090a</span></span></code></pre></div><button>copy</button></div><h2 id=misc-features--usage>MISC Features & Usage</h2><h3 id=here-doc>Here Doc</h3><p>Here Doc: Supply stdin with literal CLI arguments text. POSIX <code>sh</code> compatible.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>foo<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;parameter expansion&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>cat<span style=color:#e6db74>&lt;&lt;EOF
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#e6db74>&gt;starting here, all chars, including newlines
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#e6db74>	and tabs are included in the result. But \&lt;newline&gt; \
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#e6db74>are removed.
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#e6db74>If EOF</span> are unquoted, we enjoy
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#66d9ef>$(</span>echo <span style=color:#e6db74>&#34;command substitution&#34;</span><span style=color:#66d9ef>)</span>, <span style=color:#e6db74>${</span>foo<span style=color:#e6db74>}</span>, and arithmetic expansion <span style=color:#66d9ef>$((</span> <span style=color:#ae81ff>21</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>21</span> <span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>EOF alone on a new line without any other char mark the end. Result text end with a newline&lt;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>EOF
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>cat&lt;&lt;<span style=color:#e6db74>&#34;EOF&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>Quoted <span style=color:#e6db74>&#34;EOF&#34;</span> disable all expansion:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#66d9ef>$(</span>not working<span style=color:#66d9ef>)</span> <span style=color:#e6db74>${</span>not working<span style=color:#e6db74>}</span> <span style=color:#66d9ef>$((</span> not <span style=color:#f92672>+</span> working <span style=color:#66d9ef>))</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>EOF
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span>cat<span style=color:#e6db74>&lt;&lt;-EOF
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#e6db74>	&lt;&lt;- redirection operator trims all preceding 0x09 \t from each line
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#e6db74>		and allows EOF</span> to be preceded by <span style=color:#ae81ff>\t</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span>			EOF</span></span></code></pre></div><button>copy</button></div><p>See also <em>here string</em> in <code>bash(1)</code>.</p><h3 id=split-string-into-array>Split string into array</h3><p><a href=https://stackoverflow.com/questions/10586153/how-to-split-a-string-into-an-array-in-bash>https://stackoverflow.com/questions/10586153/how-to-split-a-string-into-an-array-in-bash</a></p><h3 id=path-concatenation-without-duplicated-slash>Path Concatenation without duplicated slash</h3><p><a href=https://stackoverflow.com/questions/11226322/how-to-concatenate-two-strings-to-build-a-complete-path>https://stackoverflow.com/questions/11226322/how-to-concatenate-two-strings-to-build-a-complete-path</a></p><h3 id=warning-adjacent-string-concatenation>Warning: Adjacent String concatenation</h3><p>C languages allows you to concatenate string literals by writing them one after another, regardless of intermediate white space characters.</p><p>Bash provides similar functionality, but it&rsquo;s undocumented:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#f92672>[</span>cesun@4700U ~<span style=color:#f92672>]</span>$ bash --norc
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>bash-5.1$ set -x -v
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>bash-5.1$ ./numargs <span style=color:#e6db74>&#39;42&#39;&#39;55&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>./numargs <span style=color:#e6db74>&#39;42&#39;&#39;55&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>+ ./numargs <span style=color:#ae81ff>4255</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>argc <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>bash-5.1$ ./numargs <span style=color:#e6db74>&#39;42&#39;</span> <span style=color:#e6db74>&#39;55&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>./numargs <span style=color:#e6db74>&#39;42&#39;</span> <span style=color:#e6db74>&#39;55&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>+ ./numargs <span style=color:#ae81ff>42</span> <span style=color:#ae81ff>55</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>argc <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>bash-5.1$ echo <span style=color:#e6db74>&#39;42&#39;&#39;55&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>echo <span style=color:#e6db74>&#39;42&#39;&#39;55&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span>+ echo <span style=color:#ae81ff>4255</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#ae81ff>4255</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>bash-5.1$ echo <span style=color:#e6db74>&#39;42&#39;</span> <span style=color:#e6db74>&#39;55&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>echo <span style=color:#e6db74>&#39;42&#39;</span> <span style=color:#e6db74>&#39;55&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span>+ echo <span style=color:#ae81ff>42</span> <span style=color:#ae81ff>55</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#ae81ff>42</span> <span style=color:#ae81ff>55</span></span></span></code></pre></div><button>copy</button></div><p>Concatenating single-quoted and double-quoted strings is kinda useful when you want only part of the whole sentences to have expansion. For example, in order to let <code>__git_ps1</code> command substitution execute each time <code>PS</code> is evaluated, the literal source of command substitution must be preserved in <code>PS1</code>:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e># .bashrc</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>set_fg_green<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\[</span><span style=color:#66d9ef>$(</span>tput setaf 42<span style=color:#66d9ef>)</span><span style=color:#e6db74>\]&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>set_fg_what<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;\[</span><span style=color:#66d9ef>$(</span>tput setaf 133<span style=color:#66d9ef>)</span><span style=color:#e6db74>\]&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>reset_color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;\[\e[m\]&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>PS1<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>set_fg_green<span style=color:#e6db74>}</span><span style=color:#e6db74>[\u@\h \W</span><span style=color:#e6db74>${</span>set_fg_what<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>&#39;$(__git_ps1 &#34; (%s)&#34;)&#39;</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>set_fg_green<span style=color:#e6db74>}</span><span style=color:#e6db74>]\$</span><span style=color:#e6db74>${</span>reset_color<span style=color:#e6db74>}</span><span style=color:#e6db74> &#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#f92672>[</span>cesun@4700U ~<span style=color:#f92672>]</span>$ echo -n <span style=color:#e6db74>&#34;</span>$PS1<span style=color:#e6db74>&#34;</span> | hexdump -C
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#ae81ff>00000000</span>  5c 5b 1b 5b <span style=color:#ae81ff>33</span> <span style=color:#ae81ff>38</span> 3b <span style=color:#ae81ff>35</span>  3b <span style=color:#ae81ff>34</span> <span style=color:#ae81ff>32</span> 6d 5c 5d 5b 5c  |<span style=color:#ae81ff>\[</span>.<span style=color:#f92672>[</span>38;5;42m<span style=color:#ae81ff>\]</span><span style=color:#f92672>[</span><span style=color:#ae81ff>\|</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#ae81ff>00000010</span>  <span style=color:#ae81ff>75</span> <span style=color:#ae81ff>40</span> 5c <span style=color:#ae81ff>68</span> <span style=color:#ae81ff>20</span> 5c <span style=color:#ae81ff>57</span> 5c  5b 1b 5b <span style=color:#ae81ff>33</span> <span style=color:#ae81ff>38</span> 3b <span style=color:#ae81ff>35</span> 3b  |u@<span style=color:#ae81ff>\h</span> <span style=color:#ae81ff>\W\[</span>.<span style=color:#f92672>[</span>38;5;|
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#ae81ff>00000020</span>  <span style=color:#ae81ff>31</span> <span style=color:#ae81ff>33</span> <span style=color:#ae81ff>33</span> 6d 5c 5d <span style=color:#ae81ff>24</span> <span style=color:#ae81ff>28</span>  5f 5f <span style=color:#ae81ff>67</span> <span style=color:#ae81ff>69</span> <span style=color:#ae81ff>74</span> 5f <span style=color:#ae81ff>70</span> <span style=color:#ae81ff>73</span>  |133m<span style=color:#ae81ff>\]</span><span style=color:#66d9ef>$(</span>__git_ps|
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#ae81ff>00000030</span>  <span style=color:#ae81ff>31</span> <span style=color:#ae81ff>20</span> <span style=color:#ae81ff>22</span> <span style=color:#ae81ff>20</span> <span style=color:#ae81ff>28</span> <span style=color:#ae81ff>25</span> <span style=color:#ae81ff>73</span> <span style=color:#ae81ff>29</span>  <span style=color:#ae81ff>22</span> <span style=color:#ae81ff>29</span> 5c 5b 1b 5b <span style=color:#ae81ff>33</span> <span style=color:#ae81ff>38</span>  |<span style=color:#ae81ff>1</span> <span style=color:#e6db74>&#34; (%s)&#34;</span><span style=color:#66d9ef>)</span><span style=color:#ae81ff>\[</span>.<span style=color:#f92672>[</span>38|
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#ae81ff>00000040</span>  3b <span style=color:#ae81ff>35</span> 3b <span style=color:#ae81ff>34</span> <span style=color:#ae81ff>32</span> 6d 5c 5d  5d <span style=color:#ae81ff>24</span> 5c 5b 5c <span style=color:#ae81ff>65</span> 5b 6d  |;5;42m<span style=color:#ae81ff>\]</span><span style=color:#f92672>]</span>$<span style=color:#ae81ff>\[\e</span><span style=color:#f92672>[</span>m|
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#ae81ff>00000050</span>  5c 5d <span style=color:#ae81ff>20</span>                                          |<span style=color:#ae81ff>\]</span> |
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#ae81ff>00000053</span></span></span></code></pre></div><button>copy</button></div><h3 id=escape-free-nested-double-quotes-across-subshell>Escape-free Nested Double Quotes Across Subshell</h3><p>The following is legit bash:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>FOO<span style=color:#f92672>=</span><span style=color:#e6db74>$&#39;a\nb\nc&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e># nested double quotes without escape, but work as intended:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>echo<span style=color:#e6db74>&#34;xx</span><span style=color:#e6db74>${</span>FOO<span style=color:#e6db74>}</span><span style=color:#e6db74>yy&#34;</span>| head -n2<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span></span></span></code></pre></div><button>copy</button></div><p>All <strong>text</strong> inside the subshell syntax <code>$(...)</code> is directly sent to the subshell for interpretation, i.e. a source-text-level separation.</p><p><a href=https://unix.stackexchange.com/questions/208309/nested-quotes-in-subshells>https://unix.stackexchange.com/questions/208309/nested-quotes-in-subshells</a></p><h3 id=ansi-c-quoting>ANSI-C quoting</h3><ul><li><code>$'string'</code>: escape sequences e.g. <code>\n</code> in <code>string</code> are respected in the evaluation result.</li><li><code>$"string"</code>: <code>string</code> are translated according to the current locale via the <code>gettext</code> infrastructure (bash script&rsquo;s i18n support)</li></ul><h3 id=check-if-array-contains-a-certain-element>Check if array contains a certain element</h3><p><a href=https://stackoverflow.com/questions/3685970/check-if-a-bash-array-contains-a-value>https://stackoverflow.com/questions/3685970/check-if-a-bash-array-contains-a-value</a></p><h3 id=double-var-name-indirection>Double Var Name Indirection</h3><p><a href=https://www.linuxquestions.org/questions/linux-software-2/double-variable-indirection-in-bash-914109/>https://www.linuxquestions.org/questions/linux-software-2/double-variable-indirection-in-bash-914109/</a>
<a href=https://stackoverflow.com/questions/16553089/dynamic-variable-names-in-bash>https://stackoverflow.com/questions/16553089/dynamic-variable-names-in-bash</a></p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>a_foo<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;hello world&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>x<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;a&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#75715e># echo ${${x}_foo} # won&#39;t work</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#75715e># solution 1: associate array</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#75715e># solution 2</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>tmp<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>x<span style=color:#e6db74>}</span><span style=color:#e6db74>_foo&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>!tmp<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span></span></span></code></pre></div><button>copy</button></div><h3 id=non-printables-or-escape>non-printables or escape</h3><p>Writing non-printables in shell script isn&rsquo;t that horrible.</p><p>There are workarounds for you to NOT write non-printables in code, e.g. Bash will convert <code>\e</code> to <code>\033</code> during the expansion of <code>$PS1</code></p><p>The echo trick:
<code>sed -e 's/'$(echo "octal-value")'/replace-word/g'</code></p><h3 id=open-new-fd-for-current-bash>open new fd for current bash</h3><div class=codeblock-hook><pre tabindex=0><code>exec 100&lt;file</code></pre><button>copy</button></div><h3 id=ansi-escape>ANSI escape</h3><p><code>man 4 console_codes</code></p><h2 id=bash-config-files---extension-point-recommendation>Bash config files & Extension Point Recommendation</h2><p>I assume all setup for non-login shell is also wanted in login shell, and the following disucssion applies to both login and non-login shell. To achieve this:</p><ol><li>Always <code>source /etc/bash.bashrc</code> from <code>/etc/profile</code></li><li>Always <code>source ~/.bashrc</code> from <code>.profile</code></li></ol><h3 id=env-var--path>Env var / PATH</h3><p>For environment variable that are meant to be available to all forked process from user&rsquo;s shell, create a file in <code>/etc/profile.d</code>.</p><p>e.g. <code>LS_COLORS</code>:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># /etc/profile.d/dircolors.sh</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>LS_COLORS<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.webp=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:&#39;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>export LS_COLORS</span></span></code></pre></div><button>copy</button></div><p>e.g. <code>PATH</code>:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># /etc/profile.d/opt-path.sh</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>append_path <span style=color:#e6db74>&#39;/opt/VSCode-linux-x64/bin&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>append_path <span style=color:#e6db74>&#39;/opt/jdk1.8.0_311/bin&#39;</span></span></span></code></pre></div><button>copy</button></div><h3 id=alias--function--variables>Alias / Function / Variables</h3><p>For alias (e.g. <code>alias ls='ls --color'</code>) and functions / variables (e.g. <code>man() { ... }</code>) that are meant to be available to everyone, put in <code>/etc/bash.bashrc</code>:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#f92672>[</span> -r /usr/share/bash-completion/bash_completion   <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> . /usr/share/bash-completion/bash_completion
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#75715e># colorize</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>man<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>	LESS_TERMCAP_mb<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[1;32m&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#ae81ff></span>	LESS_TERMCAP_md<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[1;32m&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#ae81ff></span>	LESS_TERMCAP_me<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[0m&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#ae81ff></span>	LESS_TERMCAP_se<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[0m&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#ae81ff></span>	LESS_TERMCAP_so<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[01;43m&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#ae81ff></span>	LESS_TERMCAP_ue<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[0m&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#ae81ff></span>	LESS_TERMCAP_us<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[1;4;31m&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#ae81ff></span>	/usr/bin/man $@
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span>alias grep<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;grep --color=auto&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>alias ls<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;ls --color=auto&#39;</span></span></span></code></pre></div><button>copy</button></div><h2 id=script--function-argument-handling>Script & Function Argument handling</h2><p><code>$0</code> always expands to the named used to invoke the current shell, whether it&rsquo;s encountered inside a function or not.
It should be considered a property of the current shell process, and has nothing to do with function calls.</p><ul><li>For a script file, it&rsquo;s the file name, even if it was loaded by <code>bash foo.sh</code>.</li><li>For an interactive bash, it&rsquo;s <code>bash</code>.</li></ul><h3 id=script-file-example>Script File Example</h3><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>echo <span style=color:#e6db74>&#34;number of args: </span>$#<span style=color:#e6db74>&#34;</span>   <span style=color:#75715e># exclude script name itself</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>echo <span style=color:#e6db74>&#39;$@:&#39;</span> $@
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span>echo <span style=color:#e6db74>&#39;$*:&#39;</span> $*
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>echo <span style=color:#e6db74>&#39;&#34;$@&#34;:&#39;</span><span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>echo <span style=color:#e6db74>&#39;&#34;$*&#34;:&#39;</span><span style=color:#e6db74>&#34;</span>$*<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>echo <span style=color:#e6db74>&#39;$0&#39;</span> : $0
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>echo <span style=color:#e6db74>&#39;$1&#39;</span> : $1
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>echo <span style=color:#e6db74>&#39;$2&#39;</span> : $2</span></span></code></pre></div><button>copy</button></div><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># ./gao.sh x y &#39;z      a b c&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>number of args: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>$@: x y z a b c
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>$*: x y z a b c
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>: x y z      a b c
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#e6db74>&#34;</span>$*<span style=color:#e6db74>&#34;</span>: x y z      a b c
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>$0 : ./gao.sh
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>$1 : x
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span><span>$2 : y</span></span></code></pre></div><button>copy</button></div></div></article></main><footer>Unless otherwise noted, content of this site is licensed under
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ style=text-decoration:underline>the CC BY-NC-SA 4.0</a>.<br>cesun.info copyright 2024.</footer></body></html>