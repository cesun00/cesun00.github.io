<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>x86 Architecture | Infinity Architect</title>
<link rel=stylesheet href=/main.css><script type=importmap>
  {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.167.1/+esm"
      }
  }
  </script><script type=module src=/theme.mjs></script><style>.tag-android{background-color:hsl(0deg 80% 70%)}.dark .tag-android{background-color:hsl(0deg 80% 20%)}.tag-annotation{background-color:hsl(50deg 80% 70%)}.dark .tag-annotation{background-color:hsl(50deg 80% 20%)}.tag-assembly{background-color:hsl(100deg 80% 70%)}.dark .tag-assembly{background-color:hsl(100deg 80% 20%)}.tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 70%)}.dark .tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 20%)}.tag-awk{background-color:hsl(200deg 80% 70%)}.dark .tag-awk{background-color:hsl(200deg 80% 20%)}.tag-bootloader{background-color:hsl(250deg 80% 70%)}.dark .tag-bootloader{background-color:hsl(250deg 80% 20%)}.tag-bytecode{background-color:hsl(300deg 80% 70%)}.dark .tag-bytecode{background-color:hsl(300deg 80% 20%)}.tag-c{background-color:hsl(350deg 80% 70%)}.dark .tag-c{background-color:hsl(350deg 80% 20%)}.tag-cxx{background-color:hsl(40deg 80% 70%)}.dark .tag-cxx{background-color:hsl(40deg 80% 20%)}.tag-cxx-stl{background-color:hsl(90deg 80% 70%)}.dark .tag-cxx-stl{background-color:hsl(90deg 80% 20%)}.tag-cgroup{background-color:hsl(140deg 80% 70%)}.dark .tag-cgroup{background-color:hsl(140deg 80% 20%)}.tag-cheetsheet{background-color:hsl(190deg 80% 70%)}.dark .tag-cheetsheet{background-color:hsl(190deg 80% 20%)}.tag-clang{background-color:hsl(240deg 80% 70%)}.dark .tag-clang{background-color:hsl(240deg 80% 20%)}.tag-coding-theory{background-color:hsl(290deg 80% 70%)}.dark .tag-coding-theory{background-color:hsl(290deg 80% 20%)}.tag-compression{background-color:hsl(340deg 80% 70%)}.dark .tag-compression{background-color:hsl(340deg 80% 20%)}.tag-concept{background-color:hsl(30deg 80% 70%)}.dark .tag-concept{background-color:hsl(30deg 80% 20%)}.tag-cpu{background-color:hsl(80deg 80% 70%)}.dark .tag-cpu{background-color:hsl(80deg 80% 20%)}.tag-crawler{background-color:hsl(130deg 80% 70%)}.dark .tag-crawler{background-color:hsl(130deg 80% 20%)}.tag-cryptography{background-color:hsl(180deg 80% 70%)}.dark .tag-cryptography{background-color:hsl(180deg 80% 20%)}.tag-css{background-color:hsl(230deg 80% 70%)}.dark .tag-css{background-color:hsl(230deg 80% 20%)}.tag-database{background-color:hsl(280deg 80% 70%)}.dark .tag-database{background-color:hsl(280deg 80% 20%)}.tag-deflate{background-color:hsl(330deg 80% 70%)}.dark .tag-deflate{background-color:hsl(330deg 80% 20%)}.tag-design{background-color:hsl(20deg 80% 70%)}.dark .tag-design{background-color:hsl(20deg 80% 20%)}.tag-dns{background-color:hsl(70deg 80% 70%)}.dark .tag-dns{background-color:hsl(70deg 80% 20%)}.tag-dom{background-color:hsl(120deg 80% 70%)}.dark .tag-dom{background-color:hsl(120deg 80% 20%)}.tag-driver{background-color:hsl(170deg 80% 70%)}.dark .tag-driver{background-color:hsl(170deg 80% 20%)}.tag-elastic{background-color:hsl(220deg 80% 70%)}.dark .tag-elastic{background-color:hsl(220deg 80% 20%)}.tag-elf{background-color:hsl(270deg 80% 70%)}.dark .tag-elf{background-color:hsl(270deg 80% 20%)}.tag-elk{background-color:hsl(320deg 80% 70%)}.dark .tag-elk{background-color:hsl(320deg 80% 20%)}.tag-flex{background-color:hsl(10deg 80% 70%)}.dark .tag-flex{background-color:hsl(10deg 80% 20%)}.tag-gc{background-color:hsl(60deg 80% 70%)}.dark .tag-gc{background-color:hsl(60deg 80% 20%)}.tag-gcc{background-color:hsl(110deg 80% 70%)}.dark .tag-gcc{background-color:hsl(110deg 80% 20%)}.tag-gnu{background-color:hsl(160deg 80% 70%)}.dark .tag-gnu{background-color:hsl(160deg 80% 20%)}.tag-go{background-color:hsl(210deg 80% 70%)}.dark .tag-go{background-color:hsl(210deg 80% 20%)}.tag-gzip{background-color:hsl(260deg 80% 70%)}.dark .tag-gzip{background-color:hsl(260deg 80% 20%)}.tag-hash{background-color:hsl(310deg 80% 70%)}.dark .tag-hash{background-color:hsl(310deg 80% 20%)}.tag-http{background-color:hsl(0deg 80% 70%)}.dark .tag-http{background-color:hsl(0deg 80% 20%)}.tag-huffman{background-color:hsl(50deg 80% 70%)}.dark .tag-huffman{background-color:hsl(50deg 80% 20%)}.tag-java{background-color:hsl(100deg 80% 70%)}.dark .tag-java{background-color:hsl(100deg 80% 20%)}.tag-java-module{background-color:hsl(150deg 80% 70%)}.dark .tag-java-module{background-color:hsl(150deg 80% 20%)}.tag-javascript{background-color:hsl(200deg 80% 70%)}.dark .tag-javascript{background-color:hsl(200deg 80% 20%)}.tag-jdk{background-color:hsl(250deg 80% 70%)}.dark .tag-jdk{background-color:hsl(250deg 80% 20%)}.tag-js{background-color:hsl(300deg 80% 70%)}.dark .tag-js{background-color:hsl(300deg 80% 20%)}.tag-jvm{background-color:hsl(350deg 80% 70%)}.dark .tag-jvm{background-color:hsl(350deg 80% 20%)}.tag-kernel{background-color:hsl(40deg 80% 70%)}.dark .tag-kernel{background-color:hsl(40deg 80% 20%)}.tag-lexer{background-color:hsl(90deg 80% 70%)}.dark .tag-lexer{background-color:hsl(90deg 80% 20%)}.tag-linux{background-color:hsl(140deg 80% 70%)}.dark .tag-linux{background-color:hsl(140deg 80% 20%)}.tag-log4j2{background-color:hsl(190deg 80% 70%)}.dark .tag-log4j2{background-color:hsl(190deg 80% 20%)}.tag-lz77{background-color:hsl(240deg 80% 70%)}.dark .tag-lz77{background-color:hsl(240deg 80% 20%)}.tag-make{background-color:hsl(290deg 80% 70%)}.dark .tag-make{background-color:hsl(290deg 80% 20%)}.tag-makefile{background-color:hsl(340deg 80% 70%)}.dark .tag-makefile{background-color:hsl(340deg 80% 20%)}.tag-maven{background-color:hsl(30deg 80% 70%)}.dark .tag-maven{background-color:hsl(30deg 80% 20%)}.tag-memory{background-color:hsl(80deg 80% 70%)}.dark .tag-memory{background-color:hsl(80deg 80% 20%)}.tag-multithreading{background-color:hsl(130deg 80% 70%)}.dark .tag-multithreading{background-color:hsl(130deg 80% 20%)}.tag-mybatis{background-color:hsl(180deg 80% 70%)}.dark .tag-mybatis{background-color:hsl(180deg 80% 20%)}.tag-mysql{background-color:hsl(230deg 80% 70%)}.dark .tag-mysql{background-color:hsl(230deg 80% 20%)}.tag-nasm{background-color:hsl(280deg 80% 70%)}.dark .tag-nasm{background-color:hsl(280deg 80% 20%)}.tag-node{background-color:hsl(330deg 80% 70%)}.dark .tag-node{background-color:hsl(330deg 80% 20%)}.tag-nodejs{background-color:hsl(20deg 80% 70%)}.dark .tag-nodejs{background-color:hsl(20deg 80% 20%)}.tag-openssl{background-color:hsl(70deg 80% 70%)}.dark .tag-openssl{background-color:hsl(70deg 80% 20%)}.tag-playwright{background-color:hsl(120deg 80% 70%)}.dark .tag-playwright{background-color:hsl(120deg 80% 20%)}.tag-posix{background-color:hsl(170deg 80% 70%)}.dark .tag-posix{background-color:hsl(170deg 80% 20%)}.tag-powershell{background-color:hsl(220deg 80% 70%)}.dark .tag-powershell{background-color:hsl(220deg 80% 20%)}.tag-programming-langauge{background-color:hsl(270deg 80% 70%)}.dark .tag-programming-langauge{background-color:hsl(270deg 80% 20%)}.tag-programming-language{background-color:hsl(320deg 80% 70%)}.dark .tag-programming-language{background-color:hsl(320deg 80% 20%)}.tag-qemu{background-color:hsl(10deg 80% 70%)}.dark .tag-qemu{background-color:hsl(10deg 80% 20%)}.tag-redis{background-color:hsl(60deg 80% 70%)}.dark .tag-redis{background-color:hsl(60deg 80% 20%)}.tag-retrocomputing{background-color:hsl(110deg 80% 70%)}.dark .tag-retrocomputing{background-color:hsl(110deg 80% 20%)}.tag-rfc{background-color:hsl(160deg 80% 70%)}.dark .tag-rfc{background-color:hsl(160deg 80% 20%)}.tag-sdram{background-color:hsl(210deg 80% 70%)}.dark .tag-sdram{background-color:hsl(210deg 80% 20%)}.tag-sed{background-color:hsl(260deg 80% 70%)}.dark .tag-sed{background-color:hsl(260deg 80% 20%)}.tag-slf4j{background-color:hsl(310deg 80% 70%)}.dark .tag-slf4j{background-color:hsl(310deg 80% 20%)}.tag-spring{background-color:hsl(0deg 80% 70%)}.dark .tag-spring{background-color:hsl(0deg 80% 20%)}.tag-spring-boot{background-color:hsl(50deg 80% 70%)}.dark .tag-spring-boot{background-color:hsl(50deg 80% 20%)}.tag-spring-data{background-color:hsl(100deg 80% 70%)}.dark .tag-spring-data{background-color:hsl(100deg 80% 20%)}.tag-spring-ioc{background-color:hsl(150deg 80% 70%)}.dark .tag-spring-ioc{background-color:hsl(150deg 80% 20%)}.tag-sql{background-color:hsl(200deg 80% 70%)}.dark .tag-sql{background-color:hsl(200deg 80% 20%)}.tag-streaming{background-color:hsl(250deg 80% 70%)}.dark .tag-streaming{background-color:hsl(250deg 80% 20%)}.tag-template{background-color:hsl(300deg 80% 70%)}.dark .tag-template{background-color:hsl(300deg 80% 20%)}.tag-testing{background-color:hsl(350deg 80% 70%)}.dark .tag-testing{background-color:hsl(350deg 80% 20%)}.tag-thymeleaf{background-color:hsl(40deg 80% 70%)}.dark .tag-thymeleaf{background-color:hsl(40deg 80% 20%)}.tag-tls{background-color:hsl(90deg 80% 70%)}.dark .tag-tls{background-color:hsl(90deg 80% 20%)}.tag-tomcat{background-color:hsl(140deg 80% 70%)}.dark .tag-tomcat{background-color:hsl(140deg 80% 20%)}.tag-transaction{background-color:hsl(190deg 80% 70%)}.dark .tag-transaction{background-color:hsl(190deg 80% 20%)}.tag-transistor{background-color:hsl(240deg 80% 70%)}.dark .tag-transistor{background-color:hsl(240deg 80% 20%)}.tag-ts{background-color:hsl(290deg 80% 70%)}.dark .tag-ts{background-color:hsl(290deg 80% 20%)}.tag-typescript{background-color:hsl(340deg 80% 70%)}.dark .tag-typescript{background-color:hsl(340deg 80% 20%)}.tag-unix{background-color:hsl(30deg 80% 70%)}.dark .tag-unix{background-color:hsl(30deg 80% 20%)}.tag-web{background-color:hsl(80deg 80% 70%)}.dark .tag-web{background-color:hsl(80deg 80% 20%)}.tag-x86{background-color:hsl(130deg 80% 70%)}.dark .tag-x86{background-color:hsl(130deg 80% 20%)}.tag-x86_64{background-color:hsl(180deg 80% 70%)}.dark .tag-x86_64{background-color:hsl(180deg 80% 20%)}.tag-x86-64{background-color:hsl(230deg 80% 70%)}.dark .tag-x86-64{background-color:hsl(230deg 80% 20%)}.tag-xpath{background-color:hsl(280deg 80% 70%)}.dark .tag-xpath{background-color:hsl(280deg 80% 20%)}.tag-zlib{background-color:hsl(330deg 80% 70%)}.dark .tag-zlib{background-color:hsl(330deg 80% 20%)}</style></head><body><script>localStorage.getItem("dark-theme")&&document.body.classList.add("dark")</script><header><h2 id=banner><a href=/>Infinity Architect</a></h2><div id=top-sections><a href=/android/ class=hoverable>Android </a><a href=/cxx/ class=hoverable>C/C++ </a><a href=/compression/ class=hoverable>Compression </a><a href=/cpu/ class=active>CPU </a><a href=/crypto/ class=hoverable>Cryptography </a><a href=/db/ class=hoverable>Database </a><a href=/ee/ class=hoverable>Electronic Engineering </a><a href=/linux/ class=hoverable>GNU/Linux </a><a href=/go/ class=hoverable>Golang </a><a href=/java/ class=hoverable>Java </a><a href=/microservice/ class=hoverable>Microservice </a><a href=/net/ class=hoverable>Network & Protocol </a><a href=/physics/ class=hoverable>Physics </a><a href=/retro/ class=hoverable>Retro-Computing </a><a href=/toy/ class=hoverable>Toys </a><a href=/windev/ class=hoverable>Window</a></div><div class=theme-switch style="align-self:center;margin:auto 20px"><input type=checkbox id=theme-checkbox>
<label for=theme-checkbox><div></div><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path fill-rule="evenodd" d="M9.528 1.718a.75.75.0 01.162.819A8.97 8.97.0 009 6a9 9 0 009 9 8.97 8.97.0 003.463-.69.75.75.0 01.981.98 10.503 10.503.0 01-9.694 6.46c-5.799.0-10.5-4.701-10.5-10.5.0-4.368 2.667-8.112 6.46-9.694a.75.75.0 01.818.162z" clip-rule="evenodd"/></svg>
</span><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path d="M12 2.25a.75.75.0 01.75.75v2.25a.75.75.0 01-1.5.0V3a.75.75.0 01.75-.75zM7.5 12a4.5 4.5.0 119 0 4.5 4.5.0 01-9 0zM18.894 6.166a.75.75.0 00-1.06-1.06l-1.591 1.59a.75.75.0 101.06 1.061l1.591-1.59zM21.75 12a.75.75.0 01-.75.75h-2.25a.75.75.0 010-1.5H21a.75.75.0 01.75.75zm-3.916 6.894a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 10-1.061 1.06l1.59 1.591zM12 18a.75.75.0 01.75.75V21a.75.75.0 01-1.5.0v-2.25A.75.75.0 0112 18zM7.758 17.303a.75.75.0 00-1.061-1.06l-1.591 1.59a.75.75.0 001.06 1.061l1.591-1.59zM6 12a.75.75.0 01-.75.75H3a.75.75.0 010-1.5h2.25A.75.75.0 016 12zm.697-4.243a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 00-1.061 1.06l1.59 1.591z"/></svg></span></label></div></header><main><div style=font-family:monospace;font-size:1.5em><div class=basic-text>/<a href=/>HOME</a>/<a href=/cpu/>CPU</a>/
$</div></div><div id=section-flex class=basic-text><div style=flex:2;min-width:0><h1>Section: x86 Architecture</h1><p>This section contains general information about the x86 architecture and its descendent x86-64 architecture.
See <a href=https://cesun.info/cpu/x86/models/>x86 Model-Specific Memorandums</a> for model-specific information, e.g. PINs assignment, die & packaging, cache design, etc.</p><p>Primary sources of information are:</p><ul><li><p>Intel SDM (Software Developer’s Manuals): <a href=https://www.intel.com/content/www/us/en/developer/articles/technical/intel-sdm.html>https://www.intel.com/content/www/us/en/developer/articles/technical/intel-sdm.html</a></p></li><li><p>AMD64 APM (Architecture Programmer’s Manual, publication no 40332):</p><p><a href=https://www.amd.com/content/dam/amd/en/documents/processor-tech-docs/programmer-references/40332.pdf>https://www.amd.com/content/dam/amd/en/documents/processor-tech-docs/programmer-references/40332.pdf</a></p></li><li><p>AMD PPR (Processor Programming Reference)</p></li><li><p>AMD BKDG (BIOS and Kernel Developer’s Guide)</p></li></ul><h2 id=data-types>Architectural Data Type</h2><p>A few data types are identified and directly supported by the CPU hardware for the convenience of document organization.</p><p>x86 is defined wrt. the following fundamental data types:</p><ol><li>A byte is eight contiguous bits starting at any logical address. The bits are numbered 0 (the least significant bit) through 7 (the most significant bit)</li><li>A word is two contiguous bytes starting at any byte address. The bits of a word are numbered from 0 through 15; The byte containing bit 0 of the word is called the low byte; the byte containing bit 15 is called the high byte.</li><li>A <code>doubleword</code> is two contiguous words starting at any byte address. A doubleword thus contains 32 bits. The bits of a doubleword are numbered from 0 through 31; bit 0 is the least significant bit. The word containing bit 0 of the doubleword is called the low word; the word containing bit 31 is called the high word.</li></ol><h2 id=cpu-operation-modes>CPU Operation Modes</h2><p>The concept of operation modes was introduced in the Intel 80286, and 2 modes are defined:</p><ol><li><p>a real-address mode (or real mode) exposes the physical memory address to CPU instructions.</p><p>The real-address mode captures how the previous 80186 and 8086 work, and is characterized by</p><ol><li>a 20-bit segmented memory address space</li><li>direct software access to peripheral hardware</li><li>no concept of memory protection or multitasking at the hardware level</li></ol><p>Since 80286 and later, this mode is usually only used during machine startup.</p></li><li><p>a <em>protected virtual address mode</em> or simply protected mode enables features like segmentation, virtual memory, paging and safe multi-tasking.</p><p>The protected mode may only be entered after the system software sets up one descriptor table and enables the Protection Enable (PE) bit in the <code>CR0</code> register (control register 0).</p></li></ol><p>80386 invented the term <em>virtual 8086 mode</em>, which is not itself a global processor mode,
but a protected mode attribute that can be enabled for any task. It allows any 8086/8088/80186/80188 program
to be run as an 80386 task without modification, among other tasks, under the control of a 32-bit operating system.
The processor can switch repeatedly and rapidly between virtual-8086 mode and the native protected mode.</p><blockquote><p>The CPU enters V86 mode from protected mode to execute an
8086 program, then leaves V86 mode and enters protected mode to continue
executing a native 80386 program.</p></blockquote><p>80386SL introduced a System Management Mode (SMM) for implementing platform-specific functions such as power management and system security.</p><p>The end of 32-bit modes. The takeaway is, since 2000, 32-bit x86 CPUs run in real mode only during boot, and then run in the protected mode forever.
There is seldom a chance for a 32-bit x86 CPU to encounter a legacy 16-bit program thus activating the virtual-8086 mode.</p><p>To the age of AMD64. One more mode is defined: Long Mode (in AMD&rsquo;s words), or IA-32e Mode (in Intel&rsquo;s words), which consists of 2 sub-modes:</p><ol><li>Compatibility mode: allows 16-bit and 32-bit x86 applications to run, without recompilation, under control of a 64-bit operating system in long mode. (like what virtual-8086 mode does for 16-bit programs). In compatibility mode, segmentation functions just as it does in legacy IA-32 mode, using the 16-bit or 32-bit protected mode semantics.</li><li>64-bit mode: the full-power 64-bit CPU mode.<ul><li>64-bit registers are visible.</li><li>All <code>CS, SS, DS, ES</code> segments are treated to have a 0 base address, regardless of what segment descriptor their selectors are pointing to.</li><li>Explicit load instructions (<code>MOV</code> / <code>POP</code>/ etc) to these segments register will be executed, causing both the visible selector to change and hidden part to be loaded from GDT or LDT (thus inducing memory bus cycles). But these registers are ignored, and a 0 base address is enforced anyway.</li><li><code>FS / GS</code> are still respected in the old way. They may be used to access special data structures.</li><li>64-bit effective address memory operands are allowed.</li></ul></li></ol><h3 id=amd64>AMD64</h3><p>An AMD64 architecture CPU runs in one of the 2 modes:</p><ol><li><p>Legacy mode</p><p>The purpose of legacy mode is to preserve binary compatibility with existing x86 applications / operating systems.</p><p>Legacy mode consists of the following three sub-modes:</p><ol><li>Protected Mode—Protected mode supports 16-bit and 32-bit programs with memory segmentation, optional paging, and privilege-checking. Programs running in protected mode can access up to 4GB of memory space.</li><li>Virtual-8086 Mode—Virtual-8086 mode supports 16-bit real-mode programs running as tasks under protected mode. It uses a simple form of memory segmentation, optional paging, and limited protection-checking. Programs running in virtual-8086 mode can access up to 1MB of memory space.</li><li>Real Mode—Real mode supports 16-bit programs using simple register-based memory segmentation. It does not support paging or protection-checking. Programs running in real mode can access up to 1MB of memory space</li></ol><p>If you have experience with earlier x86 models e.g. intel 80386, these sub-modes should be familiar.</p></li><li><p>Long mode: consists of the following 2 sub-modes:</p><ol><li>64-Bit Mode</li><li>Compatibility Mode</li></ol></li></ol><h2 id=misc>MISC</h2><h3 id=implicit-operands>Implicit operands</h3><p>Encoding operands is expensive. For example, Intel 8080 (and many other microprocessors of its age) encodes all instructions into 1 byte.
The <code>MOV</code> has an opcode of <code>01</code> and takes 2 register operands, which consumed the space <code>01xxxxxx</code> already. This leaves little room for other instructions. Later x86 CPUs do so for the same reason.</p><p>Using implicit operands, instead of allowing (specifying registers as) operands, makes programs compact.</p><h3 id=alignment>Alignment</h3><p>It is recommended for maximum performance, but not mandatory, that words be aligned at even-numbered addresses and doublewords be aligned at addresses evenly divisible by four.</p><blockquote><p>When used in a configuration with a 32-bit bus, actual
transfers of data between processor and memory take place in units of
doublewords beginning at addresses evenly divisible by four; however, the
processor converts requests for misaligned words or doublewords into the
appropriate sequences of requests acceptable to the memory interface. Such
misaligned data transfers reduce performance by requiring extra memory
cycles.</p></blockquote><p>There is no requirement for instructions to be aligned on word or
doubleword boundaries. (However, a slight increase in speed results if the
target addresses of control transfers are evenly divisible by four.)</p><h3 id=glossary>Glossary</h3><ul><li>virtual memory: this phrase originally refers to the practice of temporarily moving unused data from main memory to the hard drive to make room for active software that requires large memory resources. For 80286 the unit of such swap is a segment, since demand-page is not implemented for that CPU. However For all later models. The phrase <em>virtual memory</em> has nothing to do with the isolation of the address space between each process.</li></ul><ul><li>linear address space / processor&rsquo;s (addressable) memory space / processor&rsquo;s address space</li><li>canonical address: In 64-bit mode, an address is considered to be in canonical form if address bits 63 through to the most-significant
implemented bit by the microarchitecture are set to either all ones or all zeros.</li></ul><h3 id=flags>flags</h3><div class=codeblock-hook><pre tabindex=0><code>fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl nonstop_tsc cpuid extd_apicid aperfmperf rapl pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 x2apic movbe popcnt aes xsave avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstate ssbd mba ibrs ibpb stibp vmmcall fsgsbase bmi1 avx2 smep bmi2 erms invpcid cqm rdt_a rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local user_shstk clzero irperf xsaveerptr rdpru wbnoinvd arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold avic v_vmsave_vmload vgif v_spec_ctrl umip pku ospke vaes vpclmulqdq rdpid overflow_recov succor smca fsrm debug_swap</code></pre><button>copy</button></div><p>fun fact: <code>XCHG</code> is commutative (no flag effect), making the order of &mldr; insignificant.</p><ul><li>A smart enough assembler should generate <code>91H</code> for both <code>XCHG EAX, ECX</code> and <code>XCHG ECX, EAX</code></li></ul><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># objdump -d -Mintel main.o</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#ae81ff>00000000</span> &lt;.text&gt;:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>0:	<span style=color:#ae81ff>91</span>                   	xchg   ecx,eax
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>1:	<span style=color:#ae81ff>87</span> c1                	xchg   ecx,eax
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>3:	<span style=color:#ae81ff>87</span> c8                	xchg   eax,ecx</span></span></code></pre></div><button>copy</button></div><h2 id=exception>exception</h2><p>When DS or ES is loaded with a new selector, e.g., by an LDS, LES, or MOV to ES, SS, or DS instruction, the bits in the access byte
are checked to verify legitimate descriptor type and access (see table 7-2). If any test fails, an error
code is pushed onto the stack identifying the selector involved</p><p>Violating the segment size limit
causes a General Protection exception with an error code of O.</p></div><div style=flex:1><div style=border-radius:30px><h4>You are looking at a section page.</h3><p>Section pages are navigation nodes of this site.
A section contains articles and sub-sections.</p></div></div></div><div style=margin-top:200px><hr><h2>Articles in this section:</h2><div><div class=pagination-navi><a href=/cpu/x86/>&lt;&lt;</a>
<a>&lt;</a>
<a class=active href=/cpu/x86/>1</a>
<a href=/cpu/x86/page/2/>2</a>
<a href=/cpu/x86/page/2/>></a>
<a href=/cpu/x86/page/2/>>></a></div><div class=page-list><div class=hoverable><a href=/cpu/x86/instruction-format/><div>In section:
> CPU
> x86 Architecture</div><h2 style=margin:0>x86 / x86-64 Instruction Format</h2><div style=margin-top:4px;margin-bottom:22px class=aux-text>August 1, 2024</div><div class=aux-text><p>This article describes the format of the x86-protected mode instructions.
<a href=#64-bit>Discussion of the 64-bit mode instruction format</a> will be built on the x86 one since they share a lot of structure in common.</p><p>Extensions to x86, including AVX, and SSE instructions,
all use the same structure except that an escape prefix is used to identify the extension.</p></div><div style=margin-top:20px><div style=line-height:2em><span class="page-tag tag-assembly">assembly</span>
<span class="page-tag tag-cpu">CPU</span>
<span class="page-tag tag-x86">x86</span>
<span class="page-tag tag-x86_64">x86_64</span></div></div></a></div><div class=hoverable><a href=/cpu/x86/memory/><div>In section:
> CPU
> x86 Architecture</div><h2 style=margin:0>Evolution of x86 Memory Organization</h2><div style=margin-top:4px;margin-bottom:22px class=aux-text>July 29, 2024</div><div class=aux-text><p>This article discusses the memory organization from an x86 CPU&rsquo;s perspective.</p><p>The physical memory, for all CPU designs, can always be modeled as a flat continuous byte array.
Ultimately, the CPU talks to the memory module through the memory bus, and the physical memory - the &ldquo;flat&rdquo; space can be scanned through by incrementing the numeric value on the address bus. There is no magic.</p></div><div style=margin-top:20px><div style=line-height:2em><span class="page-tag tag-cpu">CPU</span>
<span class="page-tag tag-memory">memory</span>
<span class="page-tag tag-x86">x86</span>
<span class="page-tag tag-x86-64">x86-64</span></div></div></a></div><div class=hoverable><a href=/cpu/x86/instructions/><div>In section:
> CPU
> x86 Architecture</div><h2 style=margin:0>x86 Base / Extended Instructions Review</h2><div style=margin-top:4px;margin-bottom:22px class=aux-text>June 20, 2024</div><div class=aux-text>A quick review of x86 base instructions and extensions.
General Purpose Data Movement: MOV: transfers a byte, word, or doubleword from the source operand to the destination operand.
See also MOVSX and MOVZX
XCHG (Exchange): swaps the contents of two operands. When used with a memory operand, XCHG automatically activates the LOCK signal.
Stack Manipulation: PUSH / PUSHA POP / POPA Data Type Widening Sign extension of a narrow data type to a wider one; (extra bits of the larger item with the value of the sign bit of the smaller item)</div><div style=margin-top:20px><div style=line-height:2em><span class="page-tag tag-cpu">CPU</span>
<span class="page-tag tag-x86">x86</span></div></div></a></div><div class=hoverable><a href=/cpu/x86/task/><div>In section:
> CPU
> x86 Architecture</div><h2 style=margin:0>x86 / x86-64 Task Management</h2><div style=margin-top:4px;margin-bottom:22px class=aux-text>May 31, 2024</div><div class=aux-text>The task management of x86 and x86-64 are rather symbolic. x86
task register
LTR STR Switching the CPU from executing one task to executing another can occur as the result of either an interrupt or an inter-task CALL, JMP or IRET. A hardware-recognized data structure defines each task.
GDT contains special type of descriptors known as TSS, a new register TR holds a selector to that descriptor.
The TSS format:</div><div style=margin-top:20px><div style=line-height:2em><span class="page-tag tag-cpu">CPU</span>
<span class="page-tag tag-x86">x86</span></div></div></a></div><div class=hoverable><a href=/cpu/x86/privilege/><div>In section:
> CPU
> x86 Architecture</div><h2 style=margin:0>x86 Privilege Model</h2><div style=margin-top:4px;margin-bottom:22px class=aux-text>May 20, 2024</div><div class=aux-text>This article introduces the privilege mode of x86, characterized by the Ring 0 - 3 division of privilege levels of task.
During the run of a task, the Current Privilege Level (CPL) of the task is given by the least significant two bits of the CS register. checking DPL in the access byte of code segment descriptor loading a new value into the CS register checking DPL in the access byte of data segment descriptor Lower ring code can&rsquo;t access higher ring&rsquo;s code and data.</div><div style=margin-top:20px><div style=line-height:2em><span class="page-tag tag-cpu">CPU</span>
<span class="page-tag tag-x86">x86</span></div></div></a></div></div><div class=pagination-navi><a href=/cpu/x86/>&lt;&lt;</a>
<a>&lt;</a>
<a class=active href=/cpu/x86/>1</a>
<a href=/cpu/x86/page/2/>2</a>
<a href=/cpu/x86/page/2/>></a>
<a href=/cpu/x86/page/2/>>></a></div></div></div></main><footer>Unless otherwise noted, content of this site is licensed under
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ style=text-decoration:underline>the CC BY-NC-SA 4.0</a>.<br>cesun.info copyright 2024.</footer></body></html>