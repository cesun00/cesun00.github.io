<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Makefile Variables | Infinity Architect</title>
<link rel=stylesheet href=/main.css><script type=importmap>
  {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.167.1/+esm"
      }
  }
  </script><script type=module src=/theme.mjs></script><style>.tag-android{background-color:hsl(0deg 80% 70%)}.dark .tag-android{background-color:hsl(0deg 80% 20%)}.tag-annotation{background-color:hsl(50deg 80% 70%)}.dark .tag-annotation{background-color:hsl(50deg 80% 20%)}.tag-assembly{background-color:hsl(100deg 80% 70%)}.dark .tag-assembly{background-color:hsl(100deg 80% 20%)}.tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 70%)}.dark .tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 20%)}.tag-awk{background-color:hsl(200deg 80% 70%)}.dark .tag-awk{background-color:hsl(200deg 80% 20%)}.tag-bootloader{background-color:hsl(250deg 80% 70%)}.dark .tag-bootloader{background-color:hsl(250deg 80% 20%)}.tag-bytecode{background-color:hsl(300deg 80% 70%)}.dark .tag-bytecode{background-color:hsl(300deg 80% 20%)}.tag-c{background-color:hsl(350deg 80% 70%)}.dark .tag-c{background-color:hsl(350deg 80% 20%)}.tag-cxx{background-color:hsl(40deg 80% 70%)}.dark .tag-cxx{background-color:hsl(40deg 80% 20%)}.tag-cxx-stl{background-color:hsl(90deg 80% 70%)}.dark .tag-cxx-stl{background-color:hsl(90deg 80% 20%)}.tag-cgroup{background-color:hsl(140deg 80% 70%)}.dark .tag-cgroup{background-color:hsl(140deg 80% 20%)}.tag-cheetsheet{background-color:hsl(190deg 80% 70%)}.dark .tag-cheetsheet{background-color:hsl(190deg 80% 20%)}.tag-clang{background-color:hsl(240deg 80% 70%)}.dark .tag-clang{background-color:hsl(240deg 80% 20%)}.tag-coding-theory{background-color:hsl(290deg 80% 70%)}.dark .tag-coding-theory{background-color:hsl(290deg 80% 20%)}.tag-compression{background-color:hsl(340deg 80% 70%)}.dark .tag-compression{background-color:hsl(340deg 80% 20%)}.tag-concept{background-color:hsl(30deg 80% 70%)}.dark .tag-concept{background-color:hsl(30deg 80% 20%)}.tag-cpu{background-color:hsl(80deg 80% 70%)}.dark .tag-cpu{background-color:hsl(80deg 80% 20%)}.tag-crawler{background-color:hsl(130deg 80% 70%)}.dark .tag-crawler{background-color:hsl(130deg 80% 20%)}.tag-cryptography{background-color:hsl(180deg 80% 70%)}.dark .tag-cryptography{background-color:hsl(180deg 80% 20%)}.tag-css{background-color:hsl(230deg 80% 70%)}.dark .tag-css{background-color:hsl(230deg 80% 20%)}.tag-database{background-color:hsl(280deg 80% 70%)}.dark .tag-database{background-color:hsl(280deg 80% 20%)}.tag-deflate{background-color:hsl(330deg 80% 70%)}.dark .tag-deflate{background-color:hsl(330deg 80% 20%)}.tag-design{background-color:hsl(20deg 80% 70%)}.dark .tag-design{background-color:hsl(20deg 80% 20%)}.tag-dns{background-color:hsl(70deg 80% 70%)}.dark .tag-dns{background-color:hsl(70deg 80% 20%)}.tag-dom{background-color:hsl(120deg 80% 70%)}.dark .tag-dom{background-color:hsl(120deg 80% 20%)}.tag-driver{background-color:hsl(170deg 80% 70%)}.dark .tag-driver{background-color:hsl(170deg 80% 20%)}.tag-elastic{background-color:hsl(220deg 80% 70%)}.dark .tag-elastic{background-color:hsl(220deg 80% 20%)}.tag-elf{background-color:hsl(270deg 80% 70%)}.dark .tag-elf{background-color:hsl(270deg 80% 20%)}.tag-elk{background-color:hsl(320deg 80% 70%)}.dark .tag-elk{background-color:hsl(320deg 80% 20%)}.tag-flex{background-color:hsl(10deg 80% 70%)}.dark .tag-flex{background-color:hsl(10deg 80% 20%)}.tag-gc{background-color:hsl(60deg 80% 70%)}.dark .tag-gc{background-color:hsl(60deg 80% 20%)}.tag-gcc{background-color:hsl(110deg 80% 70%)}.dark .tag-gcc{background-color:hsl(110deg 80% 20%)}.tag-gnu{background-color:hsl(160deg 80% 70%)}.dark .tag-gnu{background-color:hsl(160deg 80% 20%)}.tag-go{background-color:hsl(210deg 80% 70%)}.dark .tag-go{background-color:hsl(210deg 80% 20%)}.tag-gzip{background-color:hsl(260deg 80% 70%)}.dark .tag-gzip{background-color:hsl(260deg 80% 20%)}.tag-hash{background-color:hsl(310deg 80% 70%)}.dark .tag-hash{background-color:hsl(310deg 80% 20%)}.tag-http{background-color:hsl(0deg 80% 70%)}.dark .tag-http{background-color:hsl(0deg 80% 20%)}.tag-huffman{background-color:hsl(50deg 80% 70%)}.dark .tag-huffman{background-color:hsl(50deg 80% 20%)}.tag-java{background-color:hsl(100deg 80% 70%)}.dark .tag-java{background-color:hsl(100deg 80% 20%)}.tag-java-module{background-color:hsl(150deg 80% 70%)}.dark .tag-java-module{background-color:hsl(150deg 80% 20%)}.tag-javascript{background-color:hsl(200deg 80% 70%)}.dark .tag-javascript{background-color:hsl(200deg 80% 20%)}.tag-jdk{background-color:hsl(250deg 80% 70%)}.dark .tag-jdk{background-color:hsl(250deg 80% 20%)}.tag-js{background-color:hsl(300deg 80% 70%)}.dark .tag-js{background-color:hsl(300deg 80% 20%)}.tag-jvm{background-color:hsl(350deg 80% 70%)}.dark .tag-jvm{background-color:hsl(350deg 80% 20%)}.tag-kernel{background-color:hsl(40deg 80% 70%)}.dark .tag-kernel{background-color:hsl(40deg 80% 20%)}.tag-lexer{background-color:hsl(90deg 80% 70%)}.dark .tag-lexer{background-color:hsl(90deg 80% 20%)}.tag-linux{background-color:hsl(140deg 80% 70%)}.dark .tag-linux{background-color:hsl(140deg 80% 20%)}.tag-log4j2{background-color:hsl(190deg 80% 70%)}.dark .tag-log4j2{background-color:hsl(190deg 80% 20%)}.tag-lz77{background-color:hsl(240deg 80% 70%)}.dark .tag-lz77{background-color:hsl(240deg 80% 20%)}.tag-make{background-color:hsl(290deg 80% 70%)}.dark .tag-make{background-color:hsl(290deg 80% 20%)}.tag-makefile{background-color:hsl(340deg 80% 70%)}.dark .tag-makefile{background-color:hsl(340deg 80% 20%)}.tag-maven{background-color:hsl(30deg 80% 70%)}.dark .tag-maven{background-color:hsl(30deg 80% 20%)}.tag-memory{background-color:hsl(80deg 80% 70%)}.dark .tag-memory{background-color:hsl(80deg 80% 20%)}.tag-multithreading{background-color:hsl(130deg 80% 70%)}.dark .tag-multithreading{background-color:hsl(130deg 80% 20%)}.tag-mybatis{background-color:hsl(180deg 80% 70%)}.dark .tag-mybatis{background-color:hsl(180deg 80% 20%)}.tag-mysql{background-color:hsl(230deg 80% 70%)}.dark .tag-mysql{background-color:hsl(230deg 80% 20%)}.tag-nasm{background-color:hsl(280deg 80% 70%)}.dark .tag-nasm{background-color:hsl(280deg 80% 20%)}.tag-node{background-color:hsl(330deg 80% 70%)}.dark .tag-node{background-color:hsl(330deg 80% 20%)}.tag-nodejs{background-color:hsl(20deg 80% 70%)}.dark .tag-nodejs{background-color:hsl(20deg 80% 20%)}.tag-openssl{background-color:hsl(70deg 80% 70%)}.dark .tag-openssl{background-color:hsl(70deg 80% 20%)}.tag-playwright{background-color:hsl(120deg 80% 70%)}.dark .tag-playwright{background-color:hsl(120deg 80% 20%)}.tag-posix{background-color:hsl(170deg 80% 70%)}.dark .tag-posix{background-color:hsl(170deg 80% 20%)}.tag-powershell{background-color:hsl(220deg 80% 70%)}.dark .tag-powershell{background-color:hsl(220deg 80% 20%)}.tag-programming-langauge{background-color:hsl(270deg 80% 70%)}.dark .tag-programming-langauge{background-color:hsl(270deg 80% 20%)}.tag-programming-language{background-color:hsl(320deg 80% 70%)}.dark .tag-programming-language{background-color:hsl(320deg 80% 20%)}.tag-qemu{background-color:hsl(10deg 80% 70%)}.dark .tag-qemu{background-color:hsl(10deg 80% 20%)}.tag-redis{background-color:hsl(60deg 80% 70%)}.dark .tag-redis{background-color:hsl(60deg 80% 20%)}.tag-retrocomputing{background-color:hsl(110deg 80% 70%)}.dark .tag-retrocomputing{background-color:hsl(110deg 80% 20%)}.tag-rfc{background-color:hsl(160deg 80% 70%)}.dark .tag-rfc{background-color:hsl(160deg 80% 20%)}.tag-sdram{background-color:hsl(210deg 80% 70%)}.dark .tag-sdram{background-color:hsl(210deg 80% 20%)}.tag-sed{background-color:hsl(260deg 80% 70%)}.dark .tag-sed{background-color:hsl(260deg 80% 20%)}.tag-slf4j{background-color:hsl(310deg 80% 70%)}.dark .tag-slf4j{background-color:hsl(310deg 80% 20%)}.tag-spring{background-color:hsl(0deg 80% 70%)}.dark .tag-spring{background-color:hsl(0deg 80% 20%)}.tag-spring-boot{background-color:hsl(50deg 80% 70%)}.dark .tag-spring-boot{background-color:hsl(50deg 80% 20%)}.tag-spring-data{background-color:hsl(100deg 80% 70%)}.dark .tag-spring-data{background-color:hsl(100deg 80% 20%)}.tag-spring-ioc{background-color:hsl(150deg 80% 70%)}.dark .tag-spring-ioc{background-color:hsl(150deg 80% 20%)}.tag-sql{background-color:hsl(200deg 80% 70%)}.dark .tag-sql{background-color:hsl(200deg 80% 20%)}.tag-streaming{background-color:hsl(250deg 80% 70%)}.dark .tag-streaming{background-color:hsl(250deg 80% 20%)}.tag-template{background-color:hsl(300deg 80% 70%)}.dark .tag-template{background-color:hsl(300deg 80% 20%)}.tag-testing{background-color:hsl(350deg 80% 70%)}.dark .tag-testing{background-color:hsl(350deg 80% 20%)}.tag-thymeleaf{background-color:hsl(40deg 80% 70%)}.dark .tag-thymeleaf{background-color:hsl(40deg 80% 20%)}.tag-tls{background-color:hsl(90deg 80% 70%)}.dark .tag-tls{background-color:hsl(90deg 80% 20%)}.tag-tomcat{background-color:hsl(140deg 80% 70%)}.dark .tag-tomcat{background-color:hsl(140deg 80% 20%)}.tag-transaction{background-color:hsl(190deg 80% 70%)}.dark .tag-transaction{background-color:hsl(190deg 80% 20%)}.tag-transistor{background-color:hsl(240deg 80% 70%)}.dark .tag-transistor{background-color:hsl(240deg 80% 20%)}.tag-ts{background-color:hsl(290deg 80% 70%)}.dark .tag-ts{background-color:hsl(290deg 80% 20%)}.tag-typescript{background-color:hsl(340deg 80% 70%)}.dark .tag-typescript{background-color:hsl(340deg 80% 20%)}.tag-unix{background-color:hsl(30deg 80% 70%)}.dark .tag-unix{background-color:hsl(30deg 80% 20%)}.tag-web{background-color:hsl(80deg 80% 70%)}.dark .tag-web{background-color:hsl(80deg 80% 20%)}.tag-x86{background-color:hsl(130deg 80% 70%)}.dark .tag-x86{background-color:hsl(130deg 80% 20%)}.tag-x86_64{background-color:hsl(180deg 80% 70%)}.dark .tag-x86_64{background-color:hsl(180deg 80% 20%)}.tag-x86-64{background-color:hsl(230deg 80% 70%)}.dark .tag-x86-64{background-color:hsl(230deg 80% 20%)}.tag-xpath{background-color:hsl(280deg 80% 70%)}.dark .tag-xpath{background-color:hsl(280deg 80% 20%)}.tag-zlib{background-color:hsl(330deg 80% 70%)}.dark .tag-zlib{background-color:hsl(330deg 80% 20%)}</style></head><body><script>localStorage.getItem("dark-theme")&&document.body.classList.add("dark")</script><header><h2 id=banner><a href=/>Infinity Architect</a></h2><div id=top-sections><a href=/android/ class=hoverable>Android </a><a href=/cxx/ class=active>C/C++ </a><a href=/compression/ class=hoverable>Compression </a><a href=/cpu/ class=hoverable>CPU </a><a href=/crypto/ class=hoverable>Cryptography </a><a href=/db/ class=hoverable>Database </a><a href=/ee/ class=hoverable>Electronic Engineering </a><a href=/linux/ class=hoverable>GNU/Linux </a><a href=/go/ class=hoverable>Golang </a><a href=/java/ class=hoverable>Java </a><a href=/microservice/ class=hoverable>Microservice </a><a href=/net/ class=hoverable>Network & Protocol </a><a href=/physics/ class=hoverable>Physics </a><a href=/retro/ class=hoverable>Retro-Computing </a><a href=/toy/ class=hoverable>Toys </a><a href=/windev/ class=hoverable>Window</a></div><div class=theme-switch style="align-self:center;margin:auto 20px"><input type=checkbox id=theme-checkbox>
<label for=theme-checkbox><div></div><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path fill-rule="evenodd" d="M9.528 1.718a.75.75.0 01.162.819A8.97 8.97.0 009 6a9 9 0 009 9 8.97 8.97.0 003.463-.69.75.75.0 01.981.98 10.503 10.503.0 01-9.694 6.46c-5.799.0-10.5-4.701-10.5-10.5.0-4.368 2.667-8.112 6.46-9.694a.75.75.0 01.818.162z" clip-rule="evenodd"/></svg>
</span><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path d="M12 2.25a.75.75.0 01.75.75v2.25a.75.75.0 01-1.5.0V3a.75.75.0 01.75-.75zM7.5 12a4.5 4.5.0 119 0 4.5 4.5.0 01-9 0zM18.894 6.166a.75.75.0 00-1.06-1.06l-1.591 1.59a.75.75.0 101.06 1.061l1.591-1.59zM21.75 12a.75.75.0 01-.75.75h-2.25a.75.75.0 010-1.5H21a.75.75.0 01.75.75zm-3.916 6.894a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 10-1.061 1.06l1.59 1.591zM12 18a.75.75.0 01.75.75V21a.75.75.0 01-1.5.0v-2.25A.75.75.0 0112 18zM7.758 17.303a.75.75.0 00-1.061-1.06l-1.591 1.59a.75.75.0 001.06 1.061l1.591-1.59zM6 12a.75.75.0 01-.75.75H3a.75.75.0 010-1.5h2.25A.75.75.0 016 12zm.697-4.243a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 00-1.061 1.06l1.59 1.591z"/></svg></span></label></div></header><main><article class=basic-text><div style=font-family:monospace;font-size:1.5em><div class=basic-text>/<a href=/>HOME</a>/<a href=/cxx/>C/C++</a>/<a href=/cxx/make/>Make</a>/
$</div></div><div style=margin-bottom:60px><h1 style=margin-bottom:0>Makefile Variables</h1><p class=aux-text style=margin-top:0>Published at: July 24, 2023
| Last modification: November 24, 2023</p><div style=line-height:2em><span class="page-tag tag-gnu">GNU</span>
<span class="page-tag tag-make">make</span>
<span class="page-tag tag-makefile">Makefile</span></div></div><div><h2 id=define-variables>Define variables</h2><div class=columns-flex-container><div style=flex:1><h4 id=the-lazy-flavor-recursively-expanded-variable>the lazy flavor: <em>recursively expanded variable</em></h4><p>The good old syntax are supported by all ancient <code>make</code> programs.</p><p>syntax: <code>foo = RHS</code></p><ul><li>Lazy expansion: <code>foo</code> stored <code>RHS</code> verbatim, without caring what it even is.</li><li><code>foo</code> expands to <code>RHS</code> upon request, and if <code>RHS</code> further contains variable reference, it will be recursively expanded.</li></ul><p>e.g. The following prints <code>hello</code> upon <code>make</code>. Notice the text order of variables:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>foo <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>bar<span style=color:#66d9ef>)</span>  <span style=color:#75715e># foo stores literal string &#39;$(bar)&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>bar <span style=color:#f92672>=</span> <span style=color:#66d9ef>$(</span>ugh<span style=color:#66d9ef>)</span>  <span style=color:#75715e># bar stores literal string &#39;$(ugh)&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>ugh <span style=color:#f92672>=</span> hello
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#75715e># recursive expansion happens when evaluating $(foo)
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#75715e></span><span style=color:#a6e22e>all</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>	@echo <span style=color:#66d9ef>$(</span>foo<span style=color:#66d9ef>)</span>    <span style=color:#75715e># &#39;hello&#39;</span>
</span></span></code></pre></div><button>copy</button></div></div><div style=flex:1><h4 id=the-greedy-flavor-simply-expanded-variables>the greedy flavor: <em>simply expanded variables</em></h4><p>Require modern <code>make</code> implementations. Mandated by POSIX 2012.</p><p>Both syntax are equivalent in GNU make:
<code>foo := RHS</code> (GNU specific), or <code>foo ::= RHS</code> (POSIX)</p><ul><li>Expansion of <code>RHS</code> happens immediately; if <code>RHS</code> further contains variable reference, it will be recursively expanded.</li><li><code>foo</code> expands to result of <code>RHS</code> expansion upon request.</li></ul><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>x <span style=color:#f92672>:=</span> foo
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>y <span style=color:#f92672>:=</span> <span style=color:#66d9ef>$(</span>x<span style=color:#66d9ef>)</span> bar   <span style=color:#75715e># expansion happen right now: y stores &#39;foo bar&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>x <span style=color:#f92672>:=</span> later
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#a6e22e>all</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>	@echo <span style=color:#66d9ef>$(</span>y<span style=color:#66d9ef>)</span>		<span style=color:#75715e># foo bar</span>
</span></span></code></pre></div><button>copy</button></div></div></div><p>Variable name cannot contain <code>:</code>, <code>#</code>, <code>=</code>, or <code></code>(the 0x20 whitespace).</p><p>GNU make documentation recommends that:</p><ol><li>use only letters, numbers and underscore for variable name for compatibility with certain shells.</li><li>not use variable names beginning with <code>.</code> and an uppercase letter. Those may be assigned with special semantics in future release of GNU make.</li></ol><p>Case convention:</p><ol><li>lower case variables name for internal usage</li><li>uppercase for parameters that<ul><li>control implicit rules, or</li><li>user should override</li></ul></li></ol><p>There are 4 ways variables are introduced to make runtime context, in the decreasing order of precedence:</p><ol><li><p>in Makefile text with <code>override</code> directive. (<code>6.7 The override Directive</code>)</p></li><li><p>as arguments of <code>make</code> CLI invocation (<code>9.5 Overriding Variables</code>)</p></li><li><p>in Makefile text (<code>6.5 Setting Variables</code>)</p></li><li><p>inherit variables from parent <code>make</code></p><ol><li><code>export</code>-ed variable from parent Makefile</li><li></li></ol></li><li><p>load from OS env vars (<code>6.10 Variables from the Environment</code>)</p><p>Every environment variable to the <code>make</code> process is made a <code>Makefile</code> variable.
This behavior is the basis of sub-make where parent make must pass <code>export</code>-ed variable to sub-make, via adding env var.
See <a href=https://cesun.info/cxx/make/submake/>submake</a> for details.</p><p>The only exception is the <code>SHELL</code> envvar which normally presented in various shells to declare the shell executable location.
Make ignore the <code>SHELL</code> envvar. A special makefile variable <code>SHELL</code> means what shell to use to execute each recipe.</p><blockquote><p>Thus, by setting the variable <code>CFLAGS</code> in your environment, you can cause all C compilations in most makefiles to use the compiler switches you prefer.This is safe for variables with standard or conventional meanings because you know that no makefile will use them for other things. (Note this is not totally reliable; some makefiles set CFLAGS explicitly and therefore are not affected by the value in the environment.)</p></blockquote><p>When <code>make -e</code> is used, OS envvars takes highest precedence, though such practice is not recommended.</p></li></ol><p>Use the <code>$(origin var)</code> function to check in which way a variable is defined.</p><h3 id=via-command-line>Via command line</h3><p>A invocation like <code>make foo=bar all</code> runs the <code>all</code> target with a variable named <code>foo</code> having value of <code>bar</code>.
All assignments to <code>foo</code> originally in the Makefile are ignored, unless it&rsquo;s governed by the <code>override</code> directive:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#a6e22e>override foo </span><span style=color:#f92672>:</span>= baz     <span style=color:#75715e># ignore whatever end user says and use baz
</span></span></span></code></pre></div><button>copy</button></div><h3 id=via-explicit-makefile-source>Via explicit Makefile source</h3><p>(see 3.7 for detailed explain of the expansion / execution phase)</p><p>These 2 flavors mainly differs by whether <code>RHS</code> is expanded immediately.</p><h3 id=via-os-envvar>Via OS envvar</h3><p>Other than being explicitly defined by Makefile text, variable can be introduced from the &ldquo;environment</p><h2 id=use-variables>Use Variables</h2><p>To reference a defined a variable, use either <code>$(foo)</code> or <code>${foo}</code> syntax, both equivalent.
Use <code>$$</code> to escape for a literal <code>$</code>.</p><p><em>Deprecated</em>: Without parentheses or brace, the character after <code>$</code> is always treated as a single-character variable name, e.g. <code>$foo</code> is <code>$f</code> concated with string <code>oo</code>. This causes confusion. Don&rsquo;t do this.</p><h2 id=automatic-variables>Automatic Variables</h2><h2 id=variables-used-by-implicit-rules-vuir>Variables Used by Implicit Rules (VUIR)</h2><p>You can cancel all variables used by implicit rules with the <code>-R</code> or <code>--no-builtin-variables</code> option.</p><p>Common ones:</p><ul><li>CC: Program for compiling C programs; default ‘cc’.<ul><li>CFLAGS: Extra flags to give to the C compiler.</li></ul></li><li>CXX: Program for compiling C++ programs; default ‘g++’.<ul><li>CXXFLAGS: Extra flags to give to the C++ compiler.</li></ul></li><li>CPP: Program for running the C preprocessor, with results to standard output; default ‘$(CC) -E’<ul><li>CPPFLAGS: Extra flags to give to the C preprocessor and programs that use it (the C and Fortran compilers).</li></ul></li><li>LDFLAGS: Extra flags to give to compilers when they are supposed to invoke the linker, <code>ld</code>, such as -L. Libraries (-lfoo) should be added to the LDLIBS variable instead.</li></ul><p>Specifically, note that the static linker <code>ld</code> is not one among the list. (Always <code>ld</code> thus hardcoded?).</p><h2 id=special-variables>Special variables</h2><p>Special variables are ones set by the <code>make</code> program itself, rather than set by the user in <code>Makefile</code>.</p><ul><li><p><code>MAKE</code>: this expands to <code>argv[0]</code> of the <code>make</code> process, i.e. the program name by which <code>make</code> is invoked.</p><p>It&rsquo;s recommended to use this variable to initiate sub-make, avoids instead of a raw <code>make</code>.</p><p>There is no other specialty about this variable. It can be override as any other variables.</p></li></ul><h2 id=parameterized-variables-functions>Parameterized Variables (Functions)</h2><p>TODO</p><h2 id=gnumake-specific-special-variables>GNUmake-specific special variables</h2><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><code>MAKEFILES</code></td><td></td></tr><tr><td><code>VPATH</code></td><td>non-selective vpath for all target / prerequisite file patterns</td></tr><tr><td><code>SHELL</code></td><td>shell binary to execute each recipe</td></tr><tr><td><code>MAKESHELL</code></td><td></td></tr><tr><td><code>MAKE</code></td><td></td></tr><tr><td><code>MAKE_VERSION</code></td><td></td></tr><tr><td><code>MAKE_HOST</code></td><td></td></tr><tr><td><code>MAKELEVEL</code></td><td></td></tr><tr><td><code>MAKEFLAGS</code></td><td></td></tr><tr><td><code>GNUMAKEFLAGS</code></td><td></td></tr><tr><td><code>MAKECMDGOALS</code></td><td>The targets given to make on the command line.</td></tr><tr><td><code>CURDIR</code></td><td>cwd</td></tr><tr><td><code>SUFFIXES</code></td><td></td></tr><tr><td><code>LIBPATTERNS</code></td><td></td></tr></tbody></table></div></article></main><footer>Unless otherwise noted, content of this site is licensed under
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ style=text-decoration:underline>the CC BY-NC-SA 4.0</a>.<br>cesun.info copyright 2024.</footer></body></html>