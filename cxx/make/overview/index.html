<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Makefile Overview | Infinity Architect</title>
<link rel=stylesheet href=/main.css><script type=importmap>
  {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.167.1/+esm"
      }
  }
  </script><script type=module src=/theme.mjs></script><style>.tag-android{background-color:hsl(0deg 80% 70%)}.dark .tag-android{background-color:hsl(0deg 80% 20%)}.tag-annotation{background-color:hsl(50deg 80% 70%)}.dark .tag-annotation{background-color:hsl(50deg 80% 20%)}.tag-assembly{background-color:hsl(100deg 80% 70%)}.dark .tag-assembly{background-color:hsl(100deg 80% 20%)}.tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 70%)}.dark .tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 20%)}.tag-awk{background-color:hsl(200deg 80% 70%)}.dark .tag-awk{background-color:hsl(200deg 80% 20%)}.tag-bootloader{background-color:hsl(250deg 80% 70%)}.dark .tag-bootloader{background-color:hsl(250deg 80% 20%)}.tag-bytecode{background-color:hsl(300deg 80% 70%)}.dark .tag-bytecode{background-color:hsl(300deg 80% 20%)}.tag-c{background-color:hsl(350deg 80% 70%)}.dark .tag-c{background-color:hsl(350deg 80% 20%)}.tag-cxx{background-color:hsl(40deg 80% 70%)}.dark .tag-cxx{background-color:hsl(40deg 80% 20%)}.tag-cxx-stl{background-color:hsl(90deg 80% 70%)}.dark .tag-cxx-stl{background-color:hsl(90deg 80% 20%)}.tag-cgroup{background-color:hsl(140deg 80% 70%)}.dark .tag-cgroup{background-color:hsl(140deg 80% 20%)}.tag-cheetsheet{background-color:hsl(190deg 80% 70%)}.dark .tag-cheetsheet{background-color:hsl(190deg 80% 20%)}.tag-clang{background-color:hsl(240deg 80% 70%)}.dark .tag-clang{background-color:hsl(240deg 80% 20%)}.tag-coding-theory{background-color:hsl(290deg 80% 70%)}.dark .tag-coding-theory{background-color:hsl(290deg 80% 20%)}.tag-compression{background-color:hsl(340deg 80% 70%)}.dark .tag-compression{background-color:hsl(340deg 80% 20%)}.tag-concept{background-color:hsl(30deg 80% 70%)}.dark .tag-concept{background-color:hsl(30deg 80% 20%)}.tag-cpu{background-color:hsl(80deg 80% 70%)}.dark .tag-cpu{background-color:hsl(80deg 80% 20%)}.tag-crawler{background-color:hsl(130deg 80% 70%)}.dark .tag-crawler{background-color:hsl(130deg 80% 20%)}.tag-cryptography{background-color:hsl(180deg 80% 70%)}.dark .tag-cryptography{background-color:hsl(180deg 80% 20%)}.tag-css{background-color:hsl(230deg 80% 70%)}.dark .tag-css{background-color:hsl(230deg 80% 20%)}.tag-database{background-color:hsl(280deg 80% 70%)}.dark .tag-database{background-color:hsl(280deg 80% 20%)}.tag-deflate{background-color:hsl(330deg 80% 70%)}.dark .tag-deflate{background-color:hsl(330deg 80% 20%)}.tag-design{background-color:hsl(20deg 80% 70%)}.dark .tag-design{background-color:hsl(20deg 80% 20%)}.tag-dns{background-color:hsl(70deg 80% 70%)}.dark .tag-dns{background-color:hsl(70deg 80% 20%)}.tag-dom{background-color:hsl(120deg 80% 70%)}.dark .tag-dom{background-color:hsl(120deg 80% 20%)}.tag-driver{background-color:hsl(170deg 80% 70%)}.dark .tag-driver{background-color:hsl(170deg 80% 20%)}.tag-elastic{background-color:hsl(220deg 80% 70%)}.dark .tag-elastic{background-color:hsl(220deg 80% 20%)}.tag-elf{background-color:hsl(270deg 80% 70%)}.dark .tag-elf{background-color:hsl(270deg 80% 20%)}.tag-elk{background-color:hsl(320deg 80% 70%)}.dark .tag-elk{background-color:hsl(320deg 80% 20%)}.tag-flex{background-color:hsl(10deg 80% 70%)}.dark .tag-flex{background-color:hsl(10deg 80% 20%)}.tag-gc{background-color:hsl(60deg 80% 70%)}.dark .tag-gc{background-color:hsl(60deg 80% 20%)}.tag-gcc{background-color:hsl(110deg 80% 70%)}.dark .tag-gcc{background-color:hsl(110deg 80% 20%)}.tag-gnu{background-color:hsl(160deg 80% 70%)}.dark .tag-gnu{background-color:hsl(160deg 80% 20%)}.tag-go{background-color:hsl(210deg 80% 70%)}.dark .tag-go{background-color:hsl(210deg 80% 20%)}.tag-gzip{background-color:hsl(260deg 80% 70%)}.dark .tag-gzip{background-color:hsl(260deg 80% 20%)}.tag-hash{background-color:hsl(310deg 80% 70%)}.dark .tag-hash{background-color:hsl(310deg 80% 20%)}.tag-http{background-color:hsl(0deg 80% 70%)}.dark .tag-http{background-color:hsl(0deg 80% 20%)}.tag-huffman{background-color:hsl(50deg 80% 70%)}.dark .tag-huffman{background-color:hsl(50deg 80% 20%)}.tag-java{background-color:hsl(100deg 80% 70%)}.dark .tag-java{background-color:hsl(100deg 80% 20%)}.tag-java-module{background-color:hsl(150deg 80% 70%)}.dark .tag-java-module{background-color:hsl(150deg 80% 20%)}.tag-javascript{background-color:hsl(200deg 80% 70%)}.dark .tag-javascript{background-color:hsl(200deg 80% 20%)}.tag-jdk{background-color:hsl(250deg 80% 70%)}.dark .tag-jdk{background-color:hsl(250deg 80% 20%)}.tag-js{background-color:hsl(300deg 80% 70%)}.dark .tag-js{background-color:hsl(300deg 80% 20%)}.tag-jvm{background-color:hsl(350deg 80% 70%)}.dark .tag-jvm{background-color:hsl(350deg 80% 20%)}.tag-kernel{background-color:hsl(40deg 80% 70%)}.dark .tag-kernel{background-color:hsl(40deg 80% 20%)}.tag-lexer{background-color:hsl(90deg 80% 70%)}.dark .tag-lexer{background-color:hsl(90deg 80% 20%)}.tag-linux{background-color:hsl(140deg 80% 70%)}.dark .tag-linux{background-color:hsl(140deg 80% 20%)}.tag-log4j2{background-color:hsl(190deg 80% 70%)}.dark .tag-log4j2{background-color:hsl(190deg 80% 20%)}.tag-lz77{background-color:hsl(240deg 80% 70%)}.dark .tag-lz77{background-color:hsl(240deg 80% 20%)}.tag-make{background-color:hsl(290deg 80% 70%)}.dark .tag-make{background-color:hsl(290deg 80% 20%)}.tag-makefile{background-color:hsl(340deg 80% 70%)}.dark .tag-makefile{background-color:hsl(340deg 80% 20%)}.tag-maven{background-color:hsl(30deg 80% 70%)}.dark .tag-maven{background-color:hsl(30deg 80% 20%)}.tag-memory{background-color:hsl(80deg 80% 70%)}.dark .tag-memory{background-color:hsl(80deg 80% 20%)}.tag-multithreading{background-color:hsl(130deg 80% 70%)}.dark .tag-multithreading{background-color:hsl(130deg 80% 20%)}.tag-mybatis{background-color:hsl(180deg 80% 70%)}.dark .tag-mybatis{background-color:hsl(180deg 80% 20%)}.tag-mysql{background-color:hsl(230deg 80% 70%)}.dark .tag-mysql{background-color:hsl(230deg 80% 20%)}.tag-nasm{background-color:hsl(280deg 80% 70%)}.dark .tag-nasm{background-color:hsl(280deg 80% 20%)}.tag-node{background-color:hsl(330deg 80% 70%)}.dark .tag-node{background-color:hsl(330deg 80% 20%)}.tag-nodejs{background-color:hsl(20deg 80% 70%)}.dark .tag-nodejs{background-color:hsl(20deg 80% 20%)}.tag-openssl{background-color:hsl(70deg 80% 70%)}.dark .tag-openssl{background-color:hsl(70deg 80% 20%)}.tag-playwright{background-color:hsl(120deg 80% 70%)}.dark .tag-playwright{background-color:hsl(120deg 80% 20%)}.tag-posix{background-color:hsl(170deg 80% 70%)}.dark .tag-posix{background-color:hsl(170deg 80% 20%)}.tag-powershell{background-color:hsl(220deg 80% 70%)}.dark .tag-powershell{background-color:hsl(220deg 80% 20%)}.tag-programming-langauge{background-color:hsl(270deg 80% 70%)}.dark .tag-programming-langauge{background-color:hsl(270deg 80% 20%)}.tag-programming-language{background-color:hsl(320deg 80% 70%)}.dark .tag-programming-language{background-color:hsl(320deg 80% 20%)}.tag-qemu{background-color:hsl(10deg 80% 70%)}.dark .tag-qemu{background-color:hsl(10deg 80% 20%)}.tag-redis{background-color:hsl(60deg 80% 70%)}.dark .tag-redis{background-color:hsl(60deg 80% 20%)}.tag-retrocomputing{background-color:hsl(110deg 80% 70%)}.dark .tag-retrocomputing{background-color:hsl(110deg 80% 20%)}.tag-rfc{background-color:hsl(160deg 80% 70%)}.dark .tag-rfc{background-color:hsl(160deg 80% 20%)}.tag-sdram{background-color:hsl(210deg 80% 70%)}.dark .tag-sdram{background-color:hsl(210deg 80% 20%)}.tag-sed{background-color:hsl(260deg 80% 70%)}.dark .tag-sed{background-color:hsl(260deg 80% 20%)}.tag-slf4j{background-color:hsl(310deg 80% 70%)}.dark .tag-slf4j{background-color:hsl(310deg 80% 20%)}.tag-spring{background-color:hsl(0deg 80% 70%)}.dark .tag-spring{background-color:hsl(0deg 80% 20%)}.tag-spring-boot{background-color:hsl(50deg 80% 70%)}.dark .tag-spring-boot{background-color:hsl(50deg 80% 20%)}.tag-spring-data{background-color:hsl(100deg 80% 70%)}.dark .tag-spring-data{background-color:hsl(100deg 80% 20%)}.tag-spring-ioc{background-color:hsl(150deg 80% 70%)}.dark .tag-spring-ioc{background-color:hsl(150deg 80% 20%)}.tag-sql{background-color:hsl(200deg 80% 70%)}.dark .tag-sql{background-color:hsl(200deg 80% 20%)}.tag-streaming{background-color:hsl(250deg 80% 70%)}.dark .tag-streaming{background-color:hsl(250deg 80% 20%)}.tag-template{background-color:hsl(300deg 80% 70%)}.dark .tag-template{background-color:hsl(300deg 80% 20%)}.tag-testing{background-color:hsl(350deg 80% 70%)}.dark .tag-testing{background-color:hsl(350deg 80% 20%)}.tag-thymeleaf{background-color:hsl(40deg 80% 70%)}.dark .tag-thymeleaf{background-color:hsl(40deg 80% 20%)}.tag-tls{background-color:hsl(90deg 80% 70%)}.dark .tag-tls{background-color:hsl(90deg 80% 20%)}.tag-tomcat{background-color:hsl(140deg 80% 70%)}.dark .tag-tomcat{background-color:hsl(140deg 80% 20%)}.tag-transaction{background-color:hsl(190deg 80% 70%)}.dark .tag-transaction{background-color:hsl(190deg 80% 20%)}.tag-transistor{background-color:hsl(240deg 80% 70%)}.dark .tag-transistor{background-color:hsl(240deg 80% 20%)}.tag-ts{background-color:hsl(290deg 80% 70%)}.dark .tag-ts{background-color:hsl(290deg 80% 20%)}.tag-typescript{background-color:hsl(340deg 80% 70%)}.dark .tag-typescript{background-color:hsl(340deg 80% 20%)}.tag-unix{background-color:hsl(30deg 80% 70%)}.dark .tag-unix{background-color:hsl(30deg 80% 20%)}.tag-web{background-color:hsl(80deg 80% 70%)}.dark .tag-web{background-color:hsl(80deg 80% 20%)}.tag-x86{background-color:hsl(130deg 80% 70%)}.dark .tag-x86{background-color:hsl(130deg 80% 20%)}.tag-x86_64{background-color:hsl(180deg 80% 70%)}.dark .tag-x86_64{background-color:hsl(180deg 80% 20%)}.tag-x86-64{background-color:hsl(230deg 80% 70%)}.dark .tag-x86-64{background-color:hsl(230deg 80% 20%)}.tag-xpath{background-color:hsl(280deg 80% 70%)}.dark .tag-xpath{background-color:hsl(280deg 80% 20%)}.tag-zlib{background-color:hsl(330deg 80% 70%)}.dark .tag-zlib{background-color:hsl(330deg 80% 20%)}</style></head><body><script>localStorage.getItem("dark-theme")&&document.body.classList.add("dark")</script><header><h2 id=banner><a href=/>Infinity Architect</a></h2><div id=top-sections><a href=/android/ class=hoverable>Android </a><a href=/cxx/ class=active>C/C++ </a><a href=/compression/ class=hoverable>Compression </a><a href=/cpu/ class=hoverable>CPU </a><a href=/crypto/ class=hoverable>Cryptography </a><a href=/db/ class=hoverable>Database </a><a href=/ee/ class=hoverable>Electronic Engineering </a><a href=/linux/ class=hoverable>GNU/Linux </a><a href=/go/ class=hoverable>Golang </a><a href=/java/ class=hoverable>Java </a><a href=/microservice/ class=hoverable>Microservice </a><a href=/net/ class=hoverable>Network & Protocol </a><a href=/physics/ class=hoverable>Physics </a><a href=/retro/ class=hoverable>Retro-Computing </a><a href=/toy/ class=hoverable>Toys </a><a href=/windev/ class=hoverable>Window</a></div><div class=theme-switch style="align-self:center;margin:auto 20px"><input type=checkbox id=theme-checkbox>
<label for=theme-checkbox><div></div><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path fill-rule="evenodd" d="M9.528 1.718a.75.75.0 01.162.819A8.97 8.97.0 009 6a9 9 0 009 9 8.97 8.97.0 003.463-.69.75.75.0 01.981.98 10.503 10.503.0 01-9.694 6.46c-5.799.0-10.5-4.701-10.5-10.5.0-4.368 2.667-8.112 6.46-9.694a.75.75.0 01.818.162z" clip-rule="evenodd"/></svg>
</span><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path d="M12 2.25a.75.75.0 01.75.75v2.25a.75.75.0 01-1.5.0V3a.75.75.0 01.75-.75zM7.5 12a4.5 4.5.0 119 0 4.5 4.5.0 01-9 0zM18.894 6.166a.75.75.0 00-1.06-1.06l-1.591 1.59a.75.75.0 101.06 1.061l1.591-1.59zM21.75 12a.75.75.0 01-.75.75h-2.25a.75.75.0 010-1.5H21a.75.75.0 01.75.75zm-3.916 6.894a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 10-1.061 1.06l1.59 1.591zM12 18a.75.75.0 01.75.75V21a.75.75.0 01-1.5.0v-2.25A.75.75.0 0112 18zM7.758 17.303a.75.75.0 00-1.061-1.06l-1.591 1.59a.75.75.0 001.06 1.061l1.591-1.59zM6 12a.75.75.0 01-.75.75H3a.75.75.0 010-1.5h2.25A.75.75.0 016 12zm.697-4.243a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 00-1.061 1.06l1.59 1.591z"/></svg></span></label></div></header><main><article class=basic-text><div style=font-family:monospace;font-size:1.5em><div class=basic-text>/<a href=/>HOME</a>/<a href=/cxx/>C/C++</a>/<a href=/cxx/make/>Make</a>/
$</div></div><div style=margin-bottom:60px><h1 style=margin-bottom:0>Makefile Overview</h1><p class=aux-text style=margin-top:0>Published at: July 19, 2023
| Last modification: October 1, 2023</p><div style=line-height:2em><span class="page-tag tag-gnu">GNU</span>
<span class="page-tag tag-make">make</span>
<span class="page-tag tag-makefile">Makefile</span></div></div><div><p>The <code>Makefile</code> language can be divided into 2 parts, a dependency description language,
and a scripting language including constructs like functions, variables, loops, branching etc.</p><p>The purpose of the scripting part of a Makefile is to</p><ol><li>determine the value of variables at run time, which can be expanded in the dependency part.</li><li>conditionally enable or disable certain rules in the dependency part</li></ol><p>The mixture of 2 languages in the same <code>Makefile</code> renders it a rather weird creature for beginners.</p><h2 id=include-other-makefiles>include other makefiles</h2><p>The <code>include</code> and <code>-include</code> directive instructs the parser to parse the mentioned files as if their content replaces the <code>include</code> directive. (Not really, see below.) The parsing of the current file is paused until the replacement is done. There is no more ad-hoc treatment.</p><p>This indicates that the paths (including targets and dependencies) within the <code>include</code>-ed files are interpreted relative to the CWD of the <code>make</code> process that is parsing the <code>include</code>-ing Makefile.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># Multiple files can appear in the same directive, order respected.
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e># wildcard works
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>include</span> <span style=color:#960050;background-color:#1e0010>Makefile.other</span> <span style=color:#960050;background-color:#1e0010>foo</span> <span style=color:#960050;background-color:#1e0010>*.mk</span> <span style=color:#66d9ef>$(</span>bar<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#75715e># the `-include` variant won&#39;t cause an error if mentioned files is not found
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#75715e># Read auto.conf if it exists, otherwise ignore
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>-include</span> <span style=color:#960050;background-color:#1e0010>include/config/auto.conf</span></span></span></code></pre></div><button>copy</button></div><p>If the specified file name does not start with a slash (i.e. a relative path),</p><ul><li>it is located relative to the CWD; if not found,</li><li>it is searched in the directories given by the <code>.INCLUDE_DIRS</code> variable, which is populated by<ol><li>path supplied by the <code>-I</code> option</li><li>path hardcoded into the <code>make</code> program at its build time</li></ol></li></ul><p>Eventually,</p><ol><li>If the included file is found, its current content is read (which may contain rules to remake itself), without immediately considering its up-to-date-ness;</li><li>If the included file is still not found, it&rsquo;s not immediately an error. In some workflow, the Makefile is generated from some other source.</li></ol><p>Once Make has finished reading Makefiles, it will try to remake any that are out of date or don&rsquo;t exist.
Make will raise a fatal error only after no rule is found to remake a non-existing Makefile.
This means Make needs to distinguish between files, instead of simply replacing <code>include</code> with the file content.</p><p>In the following example from the Linux kernel, the rules to remake <code>include/config/auto.conf</code> and <code>include/config/auto.conf.cmd</code> will be triggered before including these 2 files if the <code>$(KCONFIG_CONFIG)</code> (expands to <code>.config</code>) file has been modified after the previous generation of these 2 files.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#960050;background-color:#1e0010>include</span> <span style=color:#960050;background-color:#1e0010>include/config/auto.conf</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#960050;background-color:#1e0010>include</span> <span style=color:#960050;background-color:#1e0010>include/config/auto.conf.cmd</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#a6e22e>%/config/auto.conf %/config/auto.conf.cmd %/generated/autoconf.h %/generated/rustc_cfg</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>KCONFIG_CONFIG<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>	<span style=color:#66d9ef>$(</span>Q<span style=color:#66d9ef>)$(</span>kecho<span style=color:#66d9ef>)</span> <span style=color:#e6db74>&#34;  SYNC    </span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>	<span style=color:#66d9ef>$(</span>Q<span style=color:#66d9ef>)$(</span>MAKE<span style=color:#66d9ef>)</span> -f <span style=color:#66d9ef>$(</span>srctree<span style=color:#66d9ef>)</span>/Makefile syncconfig
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#960050;background-color:#1e0010>else</span></span></span></code></pre></div><button>copy</button></div><p>A <code>Makefile</code> contains the following of constructs:</p><div class=boldlist><ol><li><p>explicit rules</p><p>See&mldr;</p></li><li><p>condition structures</p></li><li><p>variable definitions</p><p>A variable definition is a line that specifies a text string value for a variable that can be substituted into the text later.</p></li><li><p>directives</p><p>A directive is an instruction for make to do something special while reading the makefile, including:</p><ol><li>Merging the content of another Makefile into the current one (see TODO).</li><li>Conditionally use or ignore a part of the Makefile based on the values of variables (see Conditional Parts of Makefiles).</li><li>Defining a variable from a verbatim string containing multiple lines (see Defining Multi-Line Variables).</li></ol></li><li><p>comments</p><p>Anywhere in a line, <code>#</code> till the next line feed is a comment, except that <code>\&lt;LF></code> can break a comment line as well.</p><p><strong>Comments are not always ignored:</strong></p><ol><li>Comments within a recipe are passed to the shell, just as with any other recipe text. The shell decides whether this is a comment.</li><li>Within a <code>define</code> directive, comments are not ignored during the definition of the variable, but rather kept intact in the value of the variable. When the variable is expanded they will either be treated as make comments or as recipe text, depending on the context in which the variable is evaluated.</li></ol></li></ol></div><h2 id=recipe-execution>Recipe Execution</h2><p>For each logical line, make forks an isolated shell to execute the text on that line.</p><h2 id=makefile>Makefile</h2><h3 id=wildcards>Wildcards</h3><p>Wildcards characters <code>*</code>, <code>?</code> and <code>[…]</code> are supported in 3 context:</p><ul><li>in the target and prerequisite line, wildcards are natively supported by GNU make;<ul><li>In this context, a subtle problem is that, like shell globbing, patterns text like <code>*.c</code> are preserved literally when no file are matched, which could cause a problem sometimes, e.g. as prerequisite.</li></ul></li><li>in recipe lines, each recipe are passed to the shell, and wildcard characters&rsquo; support are up to the shell;</li><li>in all other places, wildcard expansion must be explicitly requested by the <code>wildcard</code> function.</li></ul><p>To get a literal asterisk or question mark, use <code>\*</code> or <code>\?</code>.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#a6e22e>doStuff</span><span style=color:#f92672>:</span> *.c        <span style=color:#75715e># make expands
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e></span>    rm *.o          <span style=color:#75715e># shell expands</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>objects <span style=color:#f92672>=</span> *.o       <span style=color:#75715e># NO expansion. `objects` stores &#39;*.o&#39; literally</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>objects<span style=color:#66d9ef>)</span>  <span style=color:#75715e># `$(objects)` substituted by &#39;*.o&#39;, then make expands
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span><span style=color:#75715e># to store all object files in `objects`, use
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span><span><span style=color:#75715e></span>objects <span style=color:#f92672>:=</span> <span style=color:#66d9ef>$(</span>wildcard *.o<span style=color:#66d9ef>)</span>      <span style=color:#75715e># note the := syntax means to expand RHS immediately</span>
</span></span></code></pre></div><button>copy</button></div><h3 id=patterned-target--patterned-dependency>Patterned target & patterned dependency</h3><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># a rule that are selected for all `make *.c` 
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#a6e22e>%.c</span><span style=color:#f92672>:</span> 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>    <span style=color:#75715e># the actual invoked target is obtained by `$@`</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#a6e22e>%.o</span><span style=color:#f92672>:</span> %c
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>    <span style=color:#75715e># </span>
</span></span></code></pre></div><button>copy</button></div><p>Collect file names in a variable with <code>$(wildcard)</code> and depend on the expanded result of that variable.</p><h3 id=empty-recipe>Empty recipe</h3><div class=codeblock-hook><pre tabindex=0><code>target: ;</code></pre><button>copy</button></div><h2 id=target-execution--error-handling>Target Execution & Error Handling</h2><h3 id=2-phase-execution>2 phase execution</h3><p>GNU make does its work in two distinct phases.</p><ul><li>During the first phase it reads all the makefiles, included makefiles, etc. and internalizes all the variables and their values and implicit and explicit rules, and builds a dependency graph of all the targets and their prerequisites.</li><li>During the second phase, make uses this internalized data to determine which targets need to be updated and run the recipes necessary to update them.</li></ul><h3 id=shells-involvement>shell&rsquo;s involvement</h3><blockquote><p>When it is time to execute recipes to update a target, they are executed by invoking a new sub-shell <strong>for each (logical) line of the recipe</strong>, unless the .<code>ONESHELL</code> special target is in effect.
In practice, make may take shortcuts that do not affect the results.</p></blockquote><p>Implications:</p><ul><li><p>Conventional multi-line shell constructs (e.g. if/else, loop, etc.) needs to be on the same logical line, e.g.:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#a6e22e>subdirs</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    <span style=color:#66d9ef>for</span> dir in <span style=color:#66d9ef>$(</span>SUBDIRS<span style=color:#66d9ef>)</span>; <span style=color:#66d9ef>do</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#ae81ff></span>      <span style=color:#66d9ef>$(</span>MAKE<span style=color:#66d9ef>)</span> -C $$dir; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#ae81ff></span>    <span style=color:#66d9ef>done</span>;
</span></span></code></pre></div><button>copy</button></div></li></ul><p>VUIR variable <code>SHELL</code> controls the exact shell to be used. Value of this makefile variable never inherit from the unix env var <code>SHELL</code>.</p><p>Value of <code>.SHELLFLAGS</code> are passed when fork-exec the shell, and it defaults to <code>-c</code>. (which means recipe text will follows.)</p><h2 id=error>Error</h2><p>To ignore error (non-zero process return) for certain recipe, prefix with <code>-</code>:</p><h2 id=file-target--phony-target>(file) Target / PHONY target</h2><p>All targets are supposed to be file names, except</p><ul><li><p>those mentioned as prerequisites of the special built-in target <code>.PHONY</code></p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#a6e22e>.PHONY</span><span style=color:#f92672>:</span> clean
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#a6e22e>clean</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>        rm *.o temp
</span></span></code></pre></div><button>copy</button></div><p>This is indeed a weird syntax, reflecting the early coarse design of the Makefile syntax.
Here is a technique the Linux kernel uses to alleviate the syntax:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e># declare a variable PHONY
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e></span>PHONY <span style=color:#f92672>:=</span> __all
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#75715e># incrementally build the PHONY variable 
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#75715e></span>PHONY <span style=color:#f92672>+=</span> <span style=color:#66d9ef>$(</span>MAKECMDGOALS<span style=color:#66d9ef>)</span> __sub-make
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span>PHONY <span style=color:#f92672>+=</span> <span style=color:#66d9ef>$(</span>MAKECMDGOALS<span style=color:#66d9ef>)</span> __build_one_by_one
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span>PHONY <span style=color:#f92672>+=</span> scripts_basic
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>PHONY <span style=color:#f92672>+=</span> outputmakefile
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span>PHONY <span style=color:#f92672>+=</span> all
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span>PHONY <span style=color:#f92672>+=</span> include/config/auto.conf
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span>PHONY <span style=color:#f92672>+=</span> prepare0
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#75715e># omitting ...
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#75715e># finally
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#75715e></span><span style=color:#a6e22e>.PHONY</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>$(</span>PHONY<span style=color:#66d9ef>)</span></span></span></code></pre></div><button>copy</button></div></li><li><p>those not found on the filesystem eventually</p></li></ul><p>The overall idea is that <strong>PHONY targets are ALWAYS considered out-of-date</strong>. This implies:</p><ol><li>Recipes of a PHONY rule will always run regardless its prerequisites is considered out-of-date or not.</li><li>If a target has PHONY prerequisites, those PHONY will always</li></ol><table><thead><tr><th>target(T) \ prerequiresite(P)</th><th>file</th><th>phony</th></tr></thead><tbody><tr><td>file</td><td>remake T if <code>mtime</code> of P is newer than T</td><td>P always run; T always remake</td></tr><tr><td>PHONY</td><td>T always run</td><td>P always run; T always run</td></tr></tbody></table><h2 id=types-of-file-prerequisites>Types of (file) Prerequisites</h2><p>2 types of prerequisite exists, but is only interesting when target and prerequisite are both non-PHONY (i.e. normal files).</p><ul><li><p>order-only prerequisites</p><ul><li>Prerequisite file must exists before the recipe of this target runs.</li></ul></li><li><p>normal prerequisites</p><ul><li>Prerequisite file must exists before the recipe of this target runs; plus</li><li>when <code>modify</code> time of any normal prerequisites files are newer than that of the target file, the target file must be remade.</li></ul></li></ul><p>That is, semantically, normal prerequisite is a superset of order-only prerequisite.</p><p>syntax:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#a6e22e>targets </span><span style=color:#f92672>:</span> normal-prerequisites | order-only-prerequisites
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    receipe
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>    ...
</span></span></code></pre></div><button>copy</button></div><h1 id=functions>Functions</h1><p>Function call syntax is identical to variable reference:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e># both equivalent
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e></span><span style=color:#66d9ef>$(</span>function arguments<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#960050;background-color:#1e0010>${function</span> <span style=color:#960050;background-color:#1e0010>arguments}</span></span></span></code></pre></div><button>copy</button></div><h2 id=define-new-functions>Define new functions</h2><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#960050;background-color:#1e0010>call</span></span></span></code></pre></div><button>copy</button></div><h2 id=text-manipulation-exhaustive-list>Text Manipulation Exhaustive list</h2><table><thead><tr><th>function</th><th>short explanation</th><th>e.g.</th></tr></thead><tbody><tr><td><code>$(subst from,to,text)</code></td><td>substitution. Each occurrence of <code>from</code> in <code>text</code> is replaced with <code>to</code>. TODO: whitespace handling?</td><td></td></tr><tr><td><code>$(patsubst pattern,replacement,text)</code></td><td>naive pattern substitution. <code>%</code> in <code>pattern</code> matches <strong>any occurrence of any characters</strong>; <code>%</code> in <code>replacement</code> back references <code>%</code>-matched text in <code>pattern</code></td><td><code>$(patsubst %.c,%.o,$(wildcard *.c))</code></td></tr><tr><td><code>$(strip string)</code></td><td></td><td></td></tr><tr><td><code>$(findstring find,in)</code></td><td></td><td></td></tr><tr><td><code>$(filter pattern…,text)</code></td><td></td><td></td></tr><tr><td><code>$(filter-out pattern…,text)</code></td><td></td><td></td></tr><tr><td><code>$(sort list)</code></td><td></td><td></td></tr><tr><td><code>$(word n,text)</code></td><td>extract the n-th (1-indexed) word from text</td><td></td></tr><tr><td><code>$(wordlist s,e,text)</code></td><td></td><td></td></tr><tr><td><code>$(words text)</code></td><td>count # of WS 0x20 separated words</td><td></td></tr><tr><td><code>$(firstword names…)</code></td><td></td><td></td></tr><tr><td><code>$(lastword names…)</code></td><td></td><td></td></tr></tbody></table><h2 id=path-handling-exhaustive-list>Path handling Exhaustive list:</h2><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td><code>$(dir names…)</code></td><td></td><td></td></tr><tr><td><code>$(notdir names…)</code></td><td></td><td></td></tr><tr><td><code>$(suffix names…)</code></td><td></td><td></td></tr><tr><td><code>$(basename names…)</code></td><td></td><td></td></tr><tr><td><code>$(addsuffix suffix,names…)</code></td><td></td><td></td></tr><tr><td><code>$(addprefix prefix,names…)</code></td><td></td><td></td></tr><tr><td><code>$(join list1,list2)</code></td><td></td><td></td></tr><tr><td><code>$(wildcard pattern)</code></td><td>file name globbing. <strong>Return empty string if no match is found.</strong></td><td></td></tr><tr><td><code>$(realpath names…)</code></td><td></td><td></td></tr><tr><td><code>$(abspath names…)</code></td><td></td><td></td></tr></tbody></table><h2 id=ternary-expression-functions-exhaustive-list>ternary expression functions; Exhaustive list</h2><ul><li><p><code>$(if condition,then-part[,else-part])</code></p><p>The ternary expression <code>?:</code>.</p><p>Can be used for</p></li><li><p><code>$(or condition1[,condition2[,condition3…]])</code></p><p>SLKDJF</p></li><li><p><code>$(and condition1[,condition2[,condition3…]])</code></p><p>SLKDJF</p></li></ul><p>Don&rsquo;t be confused with <code>7 Conditional Parts of Makefiles</code> condition directives.</p><h2 id=vpath-buliding>vpath buliding</h2><p>By default, a non-PHONY target / prerequisite name, i.e. file name, is searched only in the current Makefile directory:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#a6e22e>main.o</span><span style=color:#f92672>:</span> main.c      <span style=color:#75715e># right in the current directory, or ...
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e></span>    cc -c main.c
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#a6e22e>lib/lib.o</span><span style=color:#f92672>:</span> lib/lib.c    <span style=color:#75715e># with respect to the current directory.
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#75715e></span>    cc -c -o lib/lib.o lib/lib.c 
</span></span></code></pre></div><button>copy</button></div><p>The idea of the vpath feature is to set more directories as the search root of <strong>both target and preresuisites</strong>.
(resemble the <code>PATH</code> envvar so you can refer to binary without fixed absolute path, or java <code>classpath</code> stuffs)</p><h3 id=vpath-special-variable><code>VPATH</code> special variable</h3><p>Directory names separated by <strong>colons or blanks</strong>, searched in order:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>VPATH <span style=color:#f92672>=</span> src:../headers      <span style=color:#75715e># search pwd first, then src, then ../headers</span>
</span></span></code></pre></div><button>copy</button></div><h3 id=vpath-directive><code>vpath</code> directive</h3><p>Specify the search directories per file name pattern:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#960050;background-color:#1e0010>vpath</span> <span style=color:#960050;background-color:#1e0010>pattern</span> <span style=color:#960050;background-color:#1e0010>directories</span>   <span style=color:#75715e># search the colon or blank separated `directories` for file target / prereq whose name matches `pattern`
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>vpath</span> <span style=color:#960050;background-color:#1e0010>pattern</span>               <span style=color:#75715e># Clear out the search path associated with pattern.
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>vpath</span>                       <span style=color:#75715e># Clear all search paths previously specified with vpath directives.
</span></span></span></code></pre></div><button>copy</button></div><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#960050;background-color:#1e0010>vpath</span> <span style=color:#960050;background-color:#1e0010>%.h</span> <span style=color:#960050;background-color:#1e0010>../headers</span>    <span style=color:#75715e># search pwd first, then ../headers, but only when `.h` file targets / prerequisites are in question.
</span></span></span></code></pre></div><button>copy</button></div></div></article></main><footer>Unless otherwise noted, content of this site is licensed under
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ style=text-decoration:underline>the CC BY-NC-SA 4.0</a>.<br>cesun.info copyright 2024.</footer></body></html>