<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>STLv2 | Infinity Architect</title>
<link rel=stylesheet href=/main.css><script type=importmap>
  {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.167.1/+esm"
      }
  }
  </script><script type=module src=/theme.mjs></script><style>.tag-android{background-color:hsl(0deg 80% 70%)}.dark .tag-android{background-color:hsl(0deg 80% 20%)}.tag-annotation{background-color:hsl(50deg 80% 70%)}.dark .tag-annotation{background-color:hsl(50deg 80% 20%)}.tag-assembly{background-color:hsl(100deg 80% 70%)}.dark .tag-assembly{background-color:hsl(100deg 80% 20%)}.tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 70%)}.dark .tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 20%)}.tag-awk{background-color:hsl(200deg 80% 70%)}.dark .tag-awk{background-color:hsl(200deg 80% 20%)}.tag-bootloader{background-color:hsl(250deg 80% 70%)}.dark .tag-bootloader{background-color:hsl(250deg 80% 20%)}.tag-bytecode{background-color:hsl(300deg 80% 70%)}.dark .tag-bytecode{background-color:hsl(300deg 80% 20%)}.tag-c{background-color:hsl(350deg 80% 70%)}.dark .tag-c{background-color:hsl(350deg 80% 20%)}.tag-cxx{background-color:hsl(40deg 80% 70%)}.dark .tag-cxx{background-color:hsl(40deg 80% 20%)}.tag-cxx-stl{background-color:hsl(90deg 80% 70%)}.dark .tag-cxx-stl{background-color:hsl(90deg 80% 20%)}.tag-cgroup{background-color:hsl(140deg 80% 70%)}.dark .tag-cgroup{background-color:hsl(140deg 80% 20%)}.tag-cheetsheet{background-color:hsl(190deg 80% 70%)}.dark .tag-cheetsheet{background-color:hsl(190deg 80% 20%)}.tag-clang{background-color:hsl(240deg 80% 70%)}.dark .tag-clang{background-color:hsl(240deg 80% 20%)}.tag-coding-theory{background-color:hsl(290deg 80% 70%)}.dark .tag-coding-theory{background-color:hsl(290deg 80% 20%)}.tag-compression{background-color:hsl(340deg 80% 70%)}.dark .tag-compression{background-color:hsl(340deg 80% 20%)}.tag-concept{background-color:hsl(30deg 80% 70%)}.dark .tag-concept{background-color:hsl(30deg 80% 20%)}.tag-cpu{background-color:hsl(80deg 80% 70%)}.dark .tag-cpu{background-color:hsl(80deg 80% 20%)}.tag-crawler{background-color:hsl(130deg 80% 70%)}.dark .tag-crawler{background-color:hsl(130deg 80% 20%)}.tag-cryptography{background-color:hsl(180deg 80% 70%)}.dark .tag-cryptography{background-color:hsl(180deg 80% 20%)}.tag-css{background-color:hsl(230deg 80% 70%)}.dark .tag-css{background-color:hsl(230deg 80% 20%)}.tag-database{background-color:hsl(280deg 80% 70%)}.dark .tag-database{background-color:hsl(280deg 80% 20%)}.tag-deflate{background-color:hsl(330deg 80% 70%)}.dark .tag-deflate{background-color:hsl(330deg 80% 20%)}.tag-design{background-color:hsl(20deg 80% 70%)}.dark .tag-design{background-color:hsl(20deg 80% 20%)}.tag-dns{background-color:hsl(70deg 80% 70%)}.dark .tag-dns{background-color:hsl(70deg 80% 20%)}.tag-dom{background-color:hsl(120deg 80% 70%)}.dark .tag-dom{background-color:hsl(120deg 80% 20%)}.tag-driver{background-color:hsl(170deg 80% 70%)}.dark .tag-driver{background-color:hsl(170deg 80% 20%)}.tag-elastic{background-color:hsl(220deg 80% 70%)}.dark .tag-elastic{background-color:hsl(220deg 80% 20%)}.tag-elf{background-color:hsl(270deg 80% 70%)}.dark .tag-elf{background-color:hsl(270deg 80% 20%)}.tag-elk{background-color:hsl(320deg 80% 70%)}.dark .tag-elk{background-color:hsl(320deg 80% 20%)}.tag-flex{background-color:hsl(10deg 80% 70%)}.dark .tag-flex{background-color:hsl(10deg 80% 20%)}.tag-gc{background-color:hsl(60deg 80% 70%)}.dark .tag-gc{background-color:hsl(60deg 80% 20%)}.tag-gcc{background-color:hsl(110deg 80% 70%)}.dark .tag-gcc{background-color:hsl(110deg 80% 20%)}.tag-gnu{background-color:hsl(160deg 80% 70%)}.dark .tag-gnu{background-color:hsl(160deg 80% 20%)}.tag-go{background-color:hsl(210deg 80% 70%)}.dark .tag-go{background-color:hsl(210deg 80% 20%)}.tag-gzip{background-color:hsl(260deg 80% 70%)}.dark .tag-gzip{background-color:hsl(260deg 80% 20%)}.tag-hash{background-color:hsl(310deg 80% 70%)}.dark .tag-hash{background-color:hsl(310deg 80% 20%)}.tag-http{background-color:hsl(0deg 80% 70%)}.dark .tag-http{background-color:hsl(0deg 80% 20%)}.tag-huffman{background-color:hsl(50deg 80% 70%)}.dark .tag-huffman{background-color:hsl(50deg 80% 20%)}.tag-java{background-color:hsl(100deg 80% 70%)}.dark .tag-java{background-color:hsl(100deg 80% 20%)}.tag-java-module{background-color:hsl(150deg 80% 70%)}.dark .tag-java-module{background-color:hsl(150deg 80% 20%)}.tag-javascript{background-color:hsl(200deg 80% 70%)}.dark .tag-javascript{background-color:hsl(200deg 80% 20%)}.tag-jdk{background-color:hsl(250deg 80% 70%)}.dark .tag-jdk{background-color:hsl(250deg 80% 20%)}.tag-js{background-color:hsl(300deg 80% 70%)}.dark .tag-js{background-color:hsl(300deg 80% 20%)}.tag-jvm{background-color:hsl(350deg 80% 70%)}.dark .tag-jvm{background-color:hsl(350deg 80% 20%)}.tag-kernel{background-color:hsl(40deg 80% 70%)}.dark .tag-kernel{background-color:hsl(40deg 80% 20%)}.tag-lexer{background-color:hsl(90deg 80% 70%)}.dark .tag-lexer{background-color:hsl(90deg 80% 20%)}.tag-linux{background-color:hsl(140deg 80% 70%)}.dark .tag-linux{background-color:hsl(140deg 80% 20%)}.tag-log4j2{background-color:hsl(190deg 80% 70%)}.dark .tag-log4j2{background-color:hsl(190deg 80% 20%)}.tag-lz77{background-color:hsl(240deg 80% 70%)}.dark .tag-lz77{background-color:hsl(240deg 80% 20%)}.tag-make{background-color:hsl(290deg 80% 70%)}.dark .tag-make{background-color:hsl(290deg 80% 20%)}.tag-makefile{background-color:hsl(340deg 80% 70%)}.dark .tag-makefile{background-color:hsl(340deg 80% 20%)}.tag-maven{background-color:hsl(30deg 80% 70%)}.dark .tag-maven{background-color:hsl(30deg 80% 20%)}.tag-memory{background-color:hsl(80deg 80% 70%)}.dark .tag-memory{background-color:hsl(80deg 80% 20%)}.tag-multithreading{background-color:hsl(130deg 80% 70%)}.dark .tag-multithreading{background-color:hsl(130deg 80% 20%)}.tag-mybatis{background-color:hsl(180deg 80% 70%)}.dark .tag-mybatis{background-color:hsl(180deg 80% 20%)}.tag-mysql{background-color:hsl(230deg 80% 70%)}.dark .tag-mysql{background-color:hsl(230deg 80% 20%)}.tag-nasm{background-color:hsl(280deg 80% 70%)}.dark .tag-nasm{background-color:hsl(280deg 80% 20%)}.tag-node{background-color:hsl(330deg 80% 70%)}.dark .tag-node{background-color:hsl(330deg 80% 20%)}.tag-nodejs{background-color:hsl(20deg 80% 70%)}.dark .tag-nodejs{background-color:hsl(20deg 80% 20%)}.tag-openssl{background-color:hsl(70deg 80% 70%)}.dark .tag-openssl{background-color:hsl(70deg 80% 20%)}.tag-playwright{background-color:hsl(120deg 80% 70%)}.dark .tag-playwright{background-color:hsl(120deg 80% 20%)}.tag-posix{background-color:hsl(170deg 80% 70%)}.dark .tag-posix{background-color:hsl(170deg 80% 20%)}.tag-powershell{background-color:hsl(220deg 80% 70%)}.dark .tag-powershell{background-color:hsl(220deg 80% 20%)}.tag-programming-langauge{background-color:hsl(270deg 80% 70%)}.dark .tag-programming-langauge{background-color:hsl(270deg 80% 20%)}.tag-programming-language{background-color:hsl(320deg 80% 70%)}.dark .tag-programming-language{background-color:hsl(320deg 80% 20%)}.tag-qemu{background-color:hsl(10deg 80% 70%)}.dark .tag-qemu{background-color:hsl(10deg 80% 20%)}.tag-redis{background-color:hsl(60deg 80% 70%)}.dark .tag-redis{background-color:hsl(60deg 80% 20%)}.tag-retrocomputing{background-color:hsl(110deg 80% 70%)}.dark .tag-retrocomputing{background-color:hsl(110deg 80% 20%)}.tag-rfc{background-color:hsl(160deg 80% 70%)}.dark .tag-rfc{background-color:hsl(160deg 80% 20%)}.tag-sdram{background-color:hsl(210deg 80% 70%)}.dark .tag-sdram{background-color:hsl(210deg 80% 20%)}.tag-sed{background-color:hsl(260deg 80% 70%)}.dark .tag-sed{background-color:hsl(260deg 80% 20%)}.tag-slf4j{background-color:hsl(310deg 80% 70%)}.dark .tag-slf4j{background-color:hsl(310deg 80% 20%)}.tag-spring{background-color:hsl(0deg 80% 70%)}.dark .tag-spring{background-color:hsl(0deg 80% 20%)}.tag-spring-boot{background-color:hsl(50deg 80% 70%)}.dark .tag-spring-boot{background-color:hsl(50deg 80% 20%)}.tag-spring-data{background-color:hsl(100deg 80% 70%)}.dark .tag-spring-data{background-color:hsl(100deg 80% 20%)}.tag-spring-ioc{background-color:hsl(150deg 80% 70%)}.dark .tag-spring-ioc{background-color:hsl(150deg 80% 20%)}.tag-sql{background-color:hsl(200deg 80% 70%)}.dark .tag-sql{background-color:hsl(200deg 80% 20%)}.tag-streaming{background-color:hsl(250deg 80% 70%)}.dark .tag-streaming{background-color:hsl(250deg 80% 20%)}.tag-template{background-color:hsl(300deg 80% 70%)}.dark .tag-template{background-color:hsl(300deg 80% 20%)}.tag-testing{background-color:hsl(350deg 80% 70%)}.dark .tag-testing{background-color:hsl(350deg 80% 20%)}.tag-thymeleaf{background-color:hsl(40deg 80% 70%)}.dark .tag-thymeleaf{background-color:hsl(40deg 80% 20%)}.tag-tls{background-color:hsl(90deg 80% 70%)}.dark .tag-tls{background-color:hsl(90deg 80% 20%)}.tag-tomcat{background-color:hsl(140deg 80% 70%)}.dark .tag-tomcat{background-color:hsl(140deg 80% 20%)}.tag-transaction{background-color:hsl(190deg 80% 70%)}.dark .tag-transaction{background-color:hsl(190deg 80% 20%)}.tag-transistor{background-color:hsl(240deg 80% 70%)}.dark .tag-transistor{background-color:hsl(240deg 80% 20%)}.tag-ts{background-color:hsl(290deg 80% 70%)}.dark .tag-ts{background-color:hsl(290deg 80% 20%)}.tag-typescript{background-color:hsl(340deg 80% 70%)}.dark .tag-typescript{background-color:hsl(340deg 80% 20%)}.tag-unix{background-color:hsl(30deg 80% 70%)}.dark .tag-unix{background-color:hsl(30deg 80% 20%)}.tag-web{background-color:hsl(80deg 80% 70%)}.dark .tag-web{background-color:hsl(80deg 80% 20%)}.tag-x86{background-color:hsl(130deg 80% 70%)}.dark .tag-x86{background-color:hsl(130deg 80% 20%)}.tag-x86_64{background-color:hsl(180deg 80% 70%)}.dark .tag-x86_64{background-color:hsl(180deg 80% 20%)}.tag-x86-64{background-color:hsl(230deg 80% 70%)}.dark .tag-x86-64{background-color:hsl(230deg 80% 20%)}.tag-xpath{background-color:hsl(280deg 80% 70%)}.dark .tag-xpath{background-color:hsl(280deg 80% 20%)}.tag-zlib{background-color:hsl(330deg 80% 70%)}.dark .tag-zlib{background-color:hsl(330deg 80% 20%)}</style></head><body><script>localStorage.getItem("dark-theme")&&document.body.classList.add("dark")</script><header><h2 id=banner><a href=/>Infinity Architect</a></h2><div id=top-sections><a href=/android/ class=hoverable>Android </a><a href=/cxx/ class=active>C/C++ </a><a href=/compression/ class=hoverable>Compression </a><a href=/cpu/ class=hoverable>CPU </a><a href=/crypto/ class=hoverable>Cryptography </a><a href=/db/ class=hoverable>Database </a><a href=/ee/ class=hoverable>Electronic Engineering </a><a href=/linux/ class=hoverable>GNU/Linux </a><a href=/go/ class=hoverable>Golang </a><a href=/java/ class=hoverable>Java </a><a href=/microservice/ class=hoverable>Microservice </a><a href=/net/ class=hoverable>Network & Protocol </a><a href=/physics/ class=hoverable>Physics </a><a href=/retro/ class=hoverable>Retro-Computing </a><a href=/toy/ class=hoverable>Toys </a><a href=/windev/ class=hoverable>Window</a></div><div class=theme-switch style="align-self:center;margin:auto 20px"><input type=checkbox id=theme-checkbox>
<label for=theme-checkbox><div></div><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path fill-rule="evenodd" d="M9.528 1.718a.75.75.0 01.162.819A8.97 8.97.0 009 6a9 9 0 009 9 8.97 8.97.0 003.463-.69.75.75.0 01.981.98 10.503 10.503.0 01-9.694 6.46c-5.799.0-10.5-4.701-10.5-10.5.0-4.368 2.667-8.112 6.46-9.694a.75.75.0 01.818.162z" clip-rule="evenodd"/></svg>
</span><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path d="M12 2.25a.75.75.0 01.75.75v2.25a.75.75.0 01-1.5.0V3a.75.75.0 01.75-.75zM7.5 12a4.5 4.5.0 119 0 4.5 4.5.0 01-9 0zM18.894 6.166a.75.75.0 00-1.06-1.06l-1.591 1.59a.75.75.0 101.06 1.061l1.591-1.59zM21.75 12a.75.75.0 01-.75.75h-2.25a.75.75.0 010-1.5H21a.75.75.0 01.75.75zm-3.916 6.894a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 10-1.061 1.06l1.59 1.591zM12 18a.75.75.0 01.75.75V21a.75.75.0 01-1.5.0v-2.25A.75.75.0 0112 18zM7.758 17.303a.75.75.0 00-1.061-1.06l-1.591 1.59a.75.75.0 001.06 1.061l1.591-1.59zM6 12a.75.75.0 01-.75.75H3a.75.75.0 010-1.5h2.25A.75.75.0 016 12zm.697-4.243a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 00-1.061 1.06l1.59 1.591z"/></svg></span></label></div></header><main><article class=basic-text><div style=font-family:monospace;font-size:1.5em><div class=basic-text>/<a href=/>HOME</a>/<a href=/cxx/>C/C++</a>/<a href=/cxx/std/>C++ Standard Library</a>/
$</div></div><div style=margin-bottom:60px><h1 style=margin-bottom:0>STLv2</h1><p class=aux-text style=margin-top:0>Published at: July 3, 2024
| Last modification: July 9, 2024</p><div style=line-height:2em><span class="page-tag tag-cxx">C++</span>
<span class="page-tag tag-cxx-stl">C++ STL</span></div></div><div><h2 id=infrastructures>infrastructures</h2><h3 id=core-concept-rangesrange>Core concept <code>ranges::range</code></h3><p><code>T</code> satisfies <code>range</code> if <code>ranges:begin(t)</code> and <code>ranges::end(t)</code> compiles, where <code>t</code> is lvalue expression of type <code>T</code>.</p><p>e.g. Both <code>vector&lt;int></code> and <code>vector&lt;int>&</code> satisfies <code>range</code>.</p><h3 id=core-concept-rangesview>Core concept <code>ranges::view</code></h3><p><em>Every <code>view</code> is <code>range</code>.</em></p><p><code>view</code> captures a <strong>non-reference type</strong> <code>T</code> that satisfies <code>range</code>,
plus its copy ctor (if exist), copy= (if exist), move ctor (must exist), move= (must exist) all work in <code>O(1)</code>.
e.g. <code>std::string_view</code> satisfies <code>view</code>, but <code>std::string_view &</code> does not.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>template</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>T</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#66d9ef>concept</span> view <span style=color:#f92672>=</span> ranges<span style=color:#f92672>::</span>range<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#f92672>&amp;&amp;</span> std<span style=color:#f92672>::</span>movable<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> <span style=color:#f92672>&amp;&amp;</span> ranges<span style=color:#f92672>::</span>enable_view<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#66d9ef>template</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>T</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#66d9ef>inline</span> <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>bool</span> enable_view <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>derived_from<span style=color:#f92672>&lt;</span>T, view_base<span style=color:#f92672>&gt;</span> <span style=color:#f92672>||</span> <span style=color:#75715e>/*is-derived-from-view-interface*/</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>view_base</span> { }; <span style=color:#75715e>// marker empty base
</span></span></span></code></pre></div><button>copy</button></div><p>Variable template <code>enable_view</code> capture the semantic requirement about constant time complexity.
Making <code>enable_view&lt;T></code> evaluates to <code>true</code> is a promise from the author of <code>T</code> to clients about the constant complexity of copying / moving <code>T</code>.
This can be done by</p><ul><li><p>using primary template and having <code>T</code> publicly inherit from <code>view_base</code> or <code>view_interface</code>, as new view-satisfying classes should do; or</p></li><li><p>providing full specialization <code>template&lt;> bool constexpr enable_view&lt;T> = true</code>. This is useful when migrating old class hierarchy to STLv2 system. e.g. <code>std::string_view</code></p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e>// libstdc++ &lt;string_view&gt;
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#75715e>// Opt-in to view concept
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#75715e></span><span style=color:#66d9ef>template</span><span style=color:#f92672>&lt;</span><span style=color:#66d9ef>typename</span> _CharT, <span style=color:#66d9ef>typename</span> _Traits<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#66d9ef>inline</span> <span style=color:#66d9ef>constexpr</span> <span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>enable_view<span style=color:#f92672>&lt;</span>basic_string_view<span style=color:#f92672>&lt;</span>_CharT, _Traits<span style=color:#f92672>&gt;&gt;</span> <span style=color:#f92672>=</span> true;</span></span></code></pre></div><button>copy</button></div></li></ul><p>Spec uses <code>/*is-derived-from-view-interface*/&lt;T></code> to avoid the introduction of such concept, and give freedom to implementators.
It evaluates to <code>true</code> if <code>T</code> have <code>view_interface&lt;U></code> as the only public base for a fixed <code>U</code>.
i.e. <code>class T : public view_interface&lt;X>, public view_interface&lt;Y></code> is not allowed.</p><p><code>ranges::view_interface&lt;D></code> is a helper CRTP base for classes that are meant to satisfies <code>ranges::view</code> concept.
With the help of type-constraint based SFINAE, derived class will have <em>viable</em> public member functions inherited if it satisfies certain concepts.</p><p>For instance <code>d</code> of <code>class D : public ranges::view_interface&lt;D></code>, denote</p><ul><li><code>std::ranges::iterator_t&lt;D></code> (which normally delegates to <code>decltype(d.begin())</code>) as <code>D</code>&rsquo;s <em>iterator type</em></li><li><code>std::ranges::sentinel_t&lt;D></code> (which normally delegates to <code>decltype(d.end())</code>) as <code>D</code>&rsquo;s <em>sentinel type</em></li></ul><p>This means <code>D</code> always needs to provide <code>begin()</code> and <code>end()</code> member functions,
otherwise argument substitution into these type alias templates are ill-formed,
and it will inherit from an empty <code>view_interface</code> base.</p><table><thead><tr><th>member function &mldr;</th><th>return</th><th>viable if &mldr;</th></tr></thead><tbody><tr><td>empty</td><td>emptyness test</td><td><code>D</code> satisfies <code>sized_range</code> or <code>forward_range</code></td></tr><tr><td>operator bool</td><td>non-emptyness test</td><td><code>ranges::empty(d)</code> compiles</td></tr><tr><td>data</td><td>raw pointer to first element</td><td>iterator type of <code>D</code> satisfies <code>contiguous_iterator</code></td></tr><tr><td>size</td><td>number of elements</td><td><code>D</code> satisfies <code>forward_range</code> and its sentinel and iterator type satisfy <code>sized_sentinel_for</code></td></tr><tr><td>front</td><td>reference to first element</td><td><code>D</code> satisfies <code>forward_range</code>.</td></tr><tr><td>back</td><td>reference to last element</td><td><code>D</code> satisfies <code>bidirectional_range</code> and <code>common_range</code>.</td></tr><tr><td>operator[]</td><td>reference to nth element</td><td><code>D</code> satisfies <code>random_access_range</code>.</td></tr></tbody></table><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e>//                      V    use public inheritance
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyStringView</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>public</span> std<span style=color:#f92672>::</span>ranges<span style=color:#f92672>::</span>view_interface<span style=color:#f92672>&lt;</span>MyStringView<span style=color:#f92672>&gt;</span> {};</span></span></code></pre></div><button>copy</button></div><h2 id=core-concept-rangesviewable_range>core concept <code>ranges::viewable_range</code></h2><p>A very funny observation is that <code>std::vector&lt;int></code> satisfies <code>range</code>, but is expensive to copy, so it doesn&rsquo;t satisifes <code>view</code>.
On the other hand <code>std::vector&lt;int>&</code> is cheap to copy, and satisfies <code>range</code> as well - it&rsquo;s almost a <code>view</code> - except that
<code>view</code> concept requires <code>std::movable</code> which requires object type, thus all reference types are ruled out.</p><p>But it doesn&rsquo;t rule out man-made reference - <code>reference_wrapper</code>-alike pimpl wrapper for <code>range</code>.</p><p>Class template <code>ranges::ref_view</code> does exactly that:
hold a pointer/reference to a <code>range</code> and delegate calls (e.g. <code>begin()</code>, <code>end()</code>) to the referenced object.</p><p>For whatever <code>T</code> that satisfies <code>range</code>, <code>ranges::ref_view&lt;T></code> satisfies <code>view</code>.
It&rsquo;s instances are small thus cheap to move. For x86_64 libstdc++ it&rsquo;s always size of a pointer, i.e. 8 byte.</p><p>Due to the referencing nature of <code>ref_view</code>, and the referencing nature of all <code>view</code>, its usage is vulnerable to dangling when the underlying range destructs first.
It&rsquo;s programmer&rsquo;s responsibility to guarantee that a <code>view</code> does not outlive its underlying (<code>view</code> or non-<code>view</code>) <code>range</code>.</p><p><code>ref_view</code> ctor takes any <code>range</code>, apparently when the argument is an rvalue expression, it dangles immediately:</p><ul><li>Every <code>viewable_range</code> is <code>range</code>.</li><li>There is no subset or superset relationship between <code>viewable_range</code> and <code>view</code>.<ul><li>There can be <code>viewable_range</code> that is not a <code>view</code>. There can be <code>view</code> that is not a <code>viewable_range</code>.</li></ul></li></ul><p>A <code>view</code> is a reference to a subsequence of a <code>range</code>.
Due to its referencing nature,</p><p>As a library author, when your function takes a <code>view</code>-constrained parameter, there are some cases you know it will NEVER dangle:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>template</span><span style=color:#f92672>&lt;</span>std<span style=color:#f92672>::</span>ranges<span style=color:#f92672>::</span>view T<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#66d9ef>void</span> foo(T t) {}</span></span></code></pre></div><button>copy</button></div><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>using</span> ref_view_vector_int_t <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>ranges<span style=color:#f92672>::</span>ref_view<span style=color:#f92672>&lt;</span>std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;&gt;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>constexpr</span> (std<span style=color:#f92672>::</span>ranges<span style=color:#f92672>::</span>view<span style=color:#f92672>&lt;</span>ref_view_vector_int_t<span style=color:#f92672>&gt;</span>) {     <span style=color:#75715e>// true
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span><span style=color:#75715e></span>    std<span style=color:#f92672>::</span>puts(<span style=color:#e6db74>&#34;ref_view&lt;std::vector&lt;int&gt;&gt; satisfies view&#34;</span>);
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#75715e>// sizeof(std::ranges::ref_view&lt;vec&gt;) = 8
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span><span style=color:#75715e></span>std<span style=color:#f92672>::</span>printf(<span style=color:#e6db74>&#34;sizeof(std::ranges::ref_view&lt;vec&gt;) = %lu</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>    <span style=color:#66d9ef>sizeof</span>(std<span style=color:#f92672>::</span>ranges<span style=color:#f92672>::</span>ref_view<span style=color:#f92672>&lt;</span>ref_view_vector_int_t<span style=color:#f92672>&gt;</span>));</span></span></code></pre></div><button>copy</button></div><blockquote><p>The viewable_Â­range concept specifies the requirements of a range type that can be converted to a view safely.
<cite><a href=https://eel.is/c++draft/range.refinements>[range.refinements]</a></cite></p></blockquote><p>It&rsquo;s mandatory implementation roughly states that a range further satisfies <code>viewable_range</code> if either:</p><ol><li>it&rsquo;s simply a view, e.g. <code>std::string_view</code>, or</li><li>it&rsquo;s an lvalue reference (even when its reference-removed type is not a view), e.g. <code>std::vector&lt;int>&</code>, or</li><li>it&rsquo;s a movable object type (i.e. not reference type), e.g. <code>std::vector&lt;int></code></li></ol><h2 id=view--range-factories>view / range factories</h2><p>These are pairs of (class template <code>X</code> , variable template <code>x</code>),
where instantiations of <code>x&lt;T></code> is a variable of type <code>X&lt;T></code> which models <code>view&lt;T></code> (thus <code>range&lt;T></code>):</p><table><thead><tr><th>class template <code>X&lt;T></code></th><th>variable template <code>x&lt;T></code></th><th><code>X&lt;T></code> satisfies <code>view</code> and semantically &mldr;</th></tr></thead><tbody><tr><td>ranges::empty_view</td><td>views::empty</td><td>an empty <code>view</code> with no elements</td></tr><tr><td>ranges::single_view</td><td>views::single (CPO)</td><td>a <code>view</code> that contains a single element of a specified value</td></tr><tr><td>ranges::iota_view</td><td>views::iota (CPO)</td><td>a <code>view</code> consisting of a sequence generated by repeatedly incrementing an initial value</td></tr><tr><td>ranges::basic_istream_view</td><td>views::istream (CPO)</td><td>a <code>view</code> consisting of the elements obtained by successive application of <code>operator>></code> on the associated input stream</td></tr><tr><td>ranges::repeat_view</td><td>views::repeat (CPO)</td><td>a <code>view</code> consisting of a generated sequence by repeatedly producing the same value</td></tr><tr><td>ranges::cartesian_product_view</td><td>views::cartesian_product (CPO)</td><td>a <code>view</code> consisting of tuples of results calculated by the n-ary cartesian product of the adapted views</td></tr></tbody></table><h1 id=range-adaptors>Range adaptors</h1><ul><li>A <em>range adaptor closure object</em> is a function object whose <code>operator()</code> accepts a single parameter of <code>viewable_range</code> and returns a <code>view</code>.<ul><li>such object must also provide <code>operator|</code>s in order for view pipelining to work.</li></ul></li><li>A <em>range adaptor object</em> is a function object whose <code>operator()</code> accepts a <code>viewable_range</code> as its first parameter and returns a <code>view</code>.<ul><li>such object must also provide an second <code>operator()</code> to specialize itself into a RACO.</li></ul></li></ul><h2 id=rao-range-adaptor-object>RAO (Range Adaptor Object)</h2><p>Specification requires RAO to provide a second <code>operator()</code> to &ldquo;specialize&rdquo; itself into an RACO, by fixing arguments other than the range to operate on.
It&rsquo;s result can then used in the view pipelining.</p><p>In libstdc++, all RAO class inherit from a CRTP base <code>T : public __adaptor::_RangeAdaptor&lt;T></code> which provide this second <code>operator()</code>.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span> dt{<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>};
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#66d9ef>auto</span> square <span style=color:#f92672>=</span> [](<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> <span style=color:#f92672>&amp;</span>x){<span style=color:#66d9ef>return</span> x<span style=color:#f92672>*</span>x;};
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span>std<span style=color:#f92672>::</span>views<span style=color:#f92672>::</span>transform(range, square);   <span style=color:#75715e>// use RAO views::transform directly
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#75715e></span><span style=color:#66d9ef>auto</span> square_transform <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>views<span style=color:#f92672>::</span>transform(square);      <span style=color:#75715e>// call the second operator() to bind an argument
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span><span style=color:#75715e></span>square_transform(dt);                   <span style=color:#75715e>// use RACO generated from RAO
</span></span></span></code></pre></div><button>copy</button></div><h2 id=raco-range-adaptor-closure-object>RACO (Range Adaptor Closure Object)</h2><p>Given an <code>R r</code> modeling <code>viewable_range</code> and a RACO <code>C c</code>,
specification requires <code>r | c</code> (<code>operator|(r, c)</code> or <code>r.operator|(c)</code>) to be equivalent to <code>c(r)</code> (i.e. <code>c.operator()(r)</code>).</p><p>Given an <code>R r</code> modeling <code>viewable_range</code>, and 2 RACO <code>C1 c1</code> and <code>C2 c2</code>,
specification requires <code>r | c1 | c2</code> is equivalent to <code>r | (c1 | c2)</code>.</p><p>i.e. RACO must have 2 <code>operator|</code>, one takes <code>viewable_range</code> and the other takes another RACO.</p><p>In libstdc++, all RACO class inherit from <code>_RangeAdaptorClosure</code> which provides these 2 <code>operator|</code> implementations.</p><h2 id=pipelining>pipelining</h2><p>i.e. for an RAO <code>D d</code>, this means the following expression are equivalent:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span>d(r, arg...)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>d(arg...)(r)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>r <span style=color:#f92672>|</span> d(arg...)</span></span></code></pre></div><button>copy</button></div><p><code>operator|</code> of RACO return another <code>view</code> (and also <code>viewable_range</code>), thus a source viewable_range and RACOs can be pipelined as:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e>// source_range | RACO1 | RACO2 | RACO3 | ...
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e></span>std<span style=color:#f92672>::</span>vector<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>int</span><span style=color:#f92672>&gt;</span>{<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>} <span style=color:#f92672>|</span> std<span style=color:#f92672>::</span>views<span style=color:#f92672>::</span>transform([](<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>int</span> <span style=color:#f92672>&amp;</span>x){<span style=color:#66d9ef>return</span> x<span style=color:#f92672>*</span>x;}) <span style=color:#f92672>|</span> std<span style=color:#f92672>::</span>views<span style=color:#f92672>::</span>reverse</span></span></code></pre></div><button>copy</button></div><p>As far as C++20, there is no way for user to define their own range adaptor object, and only those provided by the standard library are available.</p><p><a href=https://stackoverflow.com/questions/64649664/how-you-create-your-own-views-that-interact-with-existing-views-with-operator>https://stackoverflow.com/questions/64649664/how-you-create-your-own-views-that-interact-with-existing-views-with-operator</a></p><p>These are pairs of (range adaptor object <code>c</code>, class template <code>A&lt;T></code>).
For <code>R r</code> modelling <code>viewable_range</code>, calling <code>c(r, args...)</code> will delegate to constructor <code>A&lt;decltype(r), decltype(args)...>(range, args...)</code>,
i.e. <code>c(r, ...)</code> returns an instance of <code>A&lt;R, ... ></code>.</p><p>Note that <code>decltype(c)</code> is an implementation detail.
e.g. in GNU&rsquo;s libstdc++, RAO <code>views::transform</code> is of type <code>struct _Transform : __adaptor::_RangeAdaptor&lt;_Transform></code>.</p><table><thead><tr><th>range adaptor object <code>c</code></th><th>view implementation <code>A&lt;R></code></th><th>return a <code>view</code> on the original <code>range</code> &mldr;</th></tr></thead><tbody><tr><td>views::transform</td><td>ranges::transform_view</td><td>applies a transformation function to each element</td></tr><tr><td>views::reverse</td><td>ranges::reverse_view</td><td>reverse. Original range must be bidirectional.</td></tr><tr><td>views::take</td><td>ranges::take_view</td><td>take first <code>N</code> elements</td></tr><tr><td>views::take_while</td><td>ranges::take_while_view</td><td>take first few elements until predicate returns false</td></tr><tr><td>views::drop</td><td>ranges::drop_view</td><td>skip first <code>N</code> elements</td></tr><tr><td>views::drop_while</td><td>ranges::drop_while_view</td><td>skip first few elements until predicate returns false</td></tr><tr><td>views::filter</td><td>ranges::filter_view</td><td>elements satisfies a predicate</td></tr><tr><td>views::join_with</td><td>ranges::join_with_view</td><td><code>[a,b,c]</code> to <code>[a,x,b,x,c,x]</code></td></tr><tr><td>views::split</td><td>ranges::split_view</td><td><code>[a,x,b,x,c,x]</code> to <code>[a,b,c]</code></td></tr><tr><td>views::lazy_split</td><td>ranges::lazy_split_view</td><td>ditto but split lazily, losing properties of the original view e.g. random access</td></tr><tr><td>views::keys</td><td>ranges::keys_view</td><td><code>[[k1,v1],[k2,v2]]</code> to <code>[k1,k2]</code></td></tr><tr><td>views::values</td><td>ranges::values_view</td><td><code>[[k1,v1],[k2,v2]]</code> to <code>[v1,v2]</code></td></tr><tr><td>views::elements</td><td>ranges::elements_view</td><td><code>[[1,2,3],[a,b,c]]</code> to <code>[1,a]</code> or <code>[2,b]</code>,or <code>[3,c]</code></td></tr><tr><td>views::zip</td><td>ranges::zip_view</td><td><code>[[1,2,3],[a,b,c]]</code> to <code>[[1,a],[2,b],[3,c]]</code></td></tr><tr><td>views::zip_transform</td><td>ranges::zip_transform_view</td><td><code>[[1,2,3],[a,b,c]]</code> to <code>[f(1,a),f(2,b),f(3,c)]</code></td></tr><tr><td>views::adjacent</td><td>ranges::adjacent_view</td><td><code>[1,2,3,4]</code> to <code>[[1,2],[2,3],[3,4]]</code></td></tr><tr><td>views::adjacent_transform</td><td>ranges::adjacent_transform_view</td><td><code>[1,2,3,4]</code> to <code>[f(1,2),f(2,3),f(3,4)]</code></td></tr><tr><td>views::join</td><td>ranges::join_view</td><td><code>[[1,2,3],[a,b,c]]</code> to <code>[1,2,3,a,b,c]</code></td></tr><tr><td>views::common</td><td>ranges::common_view</td><td>to <code>common_range</code></td></tr><tr><td>views::slide</td><td>ranges::slide_view</td><td>TODO</td></tr><tr><td>views::stride</td><td>ranges::stride_view</td><td>TODO</td></tr><tr><td>views::chunk</td><td>ranges::chunk_view</td><td>TODO</td></tr><tr><td>views::chunk_by</td><td>ranges::chunk_by_view</td><td>TODO</td></tr><tr><td>views::as_const</td><td>ranges::as_const_view</td><td>TODO</td></tr><tr><td>views::as_rvalue</td><td>ranges::as_rvalue_view</td><td>TODO</td></tr><tr><td>views:all</td><td>n/a (only alias <code>views::all_t</code>)</td><td>a view that includes all elements of a range. Spec reserves <code>A</code>&rsquo;s name for</td></tr><tr><td></td><td></td><td>future change, only alias <code>decltype&lt;viwes:all(r,...)></code> to <code>views::all_t</code></td></tr><tr><td>- user constructed -</td><td>ranges::ref_view</td><td>a view of the elements of some other range</td></tr><tr><td>- user constructed -</td><td>ranges::owning_view</td><td>a view with unique ownership of some range</td></tr><tr><td>- user constructed -</td><td>views::counted</td><td>creates a subrange from an iterator and a count</td></tr></tbody></table><h1 id=companion-concepts-type-constraints>companion concepts (type constraints)</h1><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e>// For object t of type T, T satisfies ... if
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>borrowed_range          <span style=color:#75715e>// specifies that a type is a range and iterators obtained from an expression of it can be safely returned without danger of dangling
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>sized_range             <span style=color:#75715e>// specifies that a range knows its size in constant time
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>input_range             <span style=color:#75715e>// specifies a range whose iterator type satisfies input_iterator
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>output_range            <span style=color:#75715e>// specifies a range whose iterator type satisfies output_iterator
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>forward_range           <span style=color:#75715e>// specifies a range whose iterator type satisfies forward_iterator
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>bidirectional_range     <span style=color:#75715e>// specifies a range whose iterator type satisfies bidirectional_iterator
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>random_access_range     <span style=color:#75715e>// specifies a range whose iterator type satisfies random_access_iterator
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>contiguous_range        <span style=color:#75715e>// specifies a range whose iterator type satisfies contiguous_iterator
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>common_range            <span style=color:#75715e>// specifies that a range has identical iterator and sentinel types
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>constant_range          <span style=color:#75715e>// specifies that a range has read-only elements
</span></span></span></code></pre></div><button>copy</button></div><h1 id=utility-function-templates>utility function templates</h1><p>Due to TAD, call to these function templates feels just like function.</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>ranges<span style=color:#f92672>::</span>begin       <span style=color:#75715e>// returns an iterator to the beginning of a range
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>end         <span style=color:#75715e>// returns a sentinel indicating the end of a range
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>cbegin      <span style=color:#75715e>// returns an iterator to the beginning of a read-only range
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>cend        <span style=color:#75715e>// returns a sentinel indicating the end of a read-only range
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>rbegin      <span style=color:#75715e>// returns a reverse iterator to a range
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>rend        <span style=color:#75715e>// returns a reverse end iterator to a range
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>crbegin     <span style=color:#75715e>// returns a reverse iterator to a read-only range
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>crend       <span style=color:#75715e>// returns a reverse end iterator to a read-only range
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>size        <span style=color:#75715e>// returns an integer equal to the size of a range
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>ssize       <span style=color:#75715e>// returns a signed integer equal to the size of a range
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>empty       <span style=color:#75715e>// checks whether a range is empty
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>data        <span style=color:#75715e>// obtains a pointer to the beginning of a contiguous range
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#75715e></span>ranges<span style=color:#f92672>::</span>cdata       <span style=color:#75715e>// obtains a pointer to the beginning of a read-only contiguous range
</span></span></span></code></pre></div><button>copy</button></div><h1 id=type-traits-meta-programming-helper>type traits (meta programming helper)</h1><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#75715e>// foobar2000
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#75715e></span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>T</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#66d9ef>using</span> iterator_t <span style=color:#f92672>=</span> <span style=color:#66d9ef>decltype</span>(ranges<span style=color:#f92672>::</span>begin(std<span style=color:#f92672>::</span>declval<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&amp;&gt;</span>()));
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#75715e>// foobar2000
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#75715e></span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>range R<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#66d9ef>using</span> const_iterator_t <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>const_iterator<span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>iterator_t<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&gt;&gt;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#75715e>// foobar2000
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#75715e></span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>range R<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#66d9ef>using</span> sentinel_t <span style=color:#f92672>=</span> <span style=color:#66d9ef>decltype</span>(ranges<span style=color:#f92672>::</span>end(std<span style=color:#f92672>::</span>declval<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&amp;&gt;</span>()));
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#75715e>// foobar2000
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#75715e></span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>sized_range R<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#66d9ef>using</span> range_size_t <span style=color:#f92672>=</span> <span style=color:#66d9ef>decltype</span>(ranges<span style=color:#f92672>::</span>size(std<span style=color:#f92672>::</span>declval<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&amp;&gt;</span>()));
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#75715e>// foobar2000
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#75715e></span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>range R<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#66d9ef>using</span> range_difference_t <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>iter_difference_t<span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>iterator_t<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&gt;&gt;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#75715e>// foobar2000
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span><span style=color:#75715e></span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>range R<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span><span style=color:#66d9ef>using</span> range_value_t <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>iter_value_t<span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>iterator_t<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&gt;&gt;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span><span style=color:#75715e>// foobar2000
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span><span style=color:#75715e></span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>range R<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span><span style=color:#66d9ef>using</span> range_reference_t <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>iter_reference_t<span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>iterator_t<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&gt;&gt;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span><span style=color:#75715e>// foobar2000
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span><span style=color:#75715e></span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>range R<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span><span style=color:#66d9ef>using</span> range_const_reference_t <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>iter_const_reference_t<span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>iterator_t<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&gt;&gt;</span>;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span><span style=color:#75715e>// foobar2000
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span><span style=color:#75715e></span><span style=color:#66d9ef>template</span> <span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>range R<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span><span style=color:#66d9ef>using</span> range_rvalue_reference_t <span style=color:#f92672>=</span> std<span style=color:#f92672>::</span>iter_rvalue_reference_t<span style=color:#f92672>&lt;</span>ranges<span style=color:#f92672>::</span>iterator_t<span style=color:#f92672>&lt;</span>R<span style=color:#f92672>&gt;&gt;</span>;</span></span></code></pre></div><button>copy</button></div><h1 id=projection>Projection</h1><p>Projection <code>[defns.projection]</code> is defined to be a <em>unary function object</em> that takes an element in a range, performs a transformation, and return the transformed result, <em>before any other algorithm</em> are applied to the range.</p><h1 id=misc>misc</h1><p>Namespace <code>std::ranges::views</code> is aliased to <code>std::views</code> for convenience:</p><div class=codeblock-hook><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#66d9ef>namespace</span> std {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span>    <span style=color:#66d9ef>namespace</span> views <span style=color:#f92672>=</span> ranges<span style=color:#f92672>::</span>views;
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>}</span></span></code></pre></div><button>copy</button></div></div></article></main><footer>Unless otherwise noted, content of this site is licensed under
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ style=text-decoration:underline>the CC BY-NC-SA 4.0</a>.<br>cesun.info copyright 2024.</footer></body></html>