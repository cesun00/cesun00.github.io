<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>DDR4 Overview | Infinity Architect</title>
<link rel=stylesheet href=/main.css><script type=importmap>
  {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.167.1/+esm"
      }
  }
  </script><script type=module src=/theme.mjs></script><style>.tag-android{background-color:hsl(0deg 80% 70%)}.dark .tag-android{background-color:hsl(0deg 80% 20%)}.tag-annotation{background-color:hsl(50deg 80% 70%)}.dark .tag-annotation{background-color:hsl(50deg 80% 20%)}.tag-assembly{background-color:hsl(100deg 80% 70%)}.dark .tag-assembly{background-color:hsl(100deg 80% 20%)}.tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 70%)}.dark .tag-asymmetrical-cryptography{background-color:hsl(150deg 80% 20%)}.tag-awk{background-color:hsl(200deg 80% 70%)}.dark .tag-awk{background-color:hsl(200deg 80% 20%)}.tag-bootloader{background-color:hsl(250deg 80% 70%)}.dark .tag-bootloader{background-color:hsl(250deg 80% 20%)}.tag-bytecode{background-color:hsl(300deg 80% 70%)}.dark .tag-bytecode{background-color:hsl(300deg 80% 20%)}.tag-c{background-color:hsl(350deg 80% 70%)}.dark .tag-c{background-color:hsl(350deg 80% 20%)}.tag-cxx{background-color:hsl(40deg 80% 70%)}.dark .tag-cxx{background-color:hsl(40deg 80% 20%)}.tag-cxx-stl{background-color:hsl(90deg 80% 70%)}.dark .tag-cxx-stl{background-color:hsl(90deg 80% 20%)}.tag-cgroup{background-color:hsl(140deg 80% 70%)}.dark .tag-cgroup{background-color:hsl(140deg 80% 20%)}.tag-cheetsheet{background-color:hsl(190deg 80% 70%)}.dark .tag-cheetsheet{background-color:hsl(190deg 80% 20%)}.tag-clang{background-color:hsl(240deg 80% 70%)}.dark .tag-clang{background-color:hsl(240deg 80% 20%)}.tag-coding-theory{background-color:hsl(290deg 80% 70%)}.dark .tag-coding-theory{background-color:hsl(290deg 80% 20%)}.tag-compression{background-color:hsl(340deg 80% 70%)}.dark .tag-compression{background-color:hsl(340deg 80% 20%)}.tag-concept{background-color:hsl(30deg 80% 70%)}.dark .tag-concept{background-color:hsl(30deg 80% 20%)}.tag-cpu{background-color:hsl(80deg 80% 70%)}.dark .tag-cpu{background-color:hsl(80deg 80% 20%)}.tag-crawler{background-color:hsl(130deg 80% 70%)}.dark .tag-crawler{background-color:hsl(130deg 80% 20%)}.tag-cryptography{background-color:hsl(180deg 80% 70%)}.dark .tag-cryptography{background-color:hsl(180deg 80% 20%)}.tag-css{background-color:hsl(230deg 80% 70%)}.dark .tag-css{background-color:hsl(230deg 80% 20%)}.tag-database{background-color:hsl(280deg 80% 70%)}.dark .tag-database{background-color:hsl(280deg 80% 20%)}.tag-deflate{background-color:hsl(330deg 80% 70%)}.dark .tag-deflate{background-color:hsl(330deg 80% 20%)}.tag-design{background-color:hsl(20deg 80% 70%)}.dark .tag-design{background-color:hsl(20deg 80% 20%)}.tag-dns{background-color:hsl(70deg 80% 70%)}.dark .tag-dns{background-color:hsl(70deg 80% 20%)}.tag-dom{background-color:hsl(120deg 80% 70%)}.dark .tag-dom{background-color:hsl(120deg 80% 20%)}.tag-driver{background-color:hsl(170deg 80% 70%)}.dark .tag-driver{background-color:hsl(170deg 80% 20%)}.tag-elastic{background-color:hsl(220deg 80% 70%)}.dark .tag-elastic{background-color:hsl(220deg 80% 20%)}.tag-elf{background-color:hsl(270deg 80% 70%)}.dark .tag-elf{background-color:hsl(270deg 80% 20%)}.tag-elk{background-color:hsl(320deg 80% 70%)}.dark .tag-elk{background-color:hsl(320deg 80% 20%)}.tag-flex{background-color:hsl(10deg 80% 70%)}.dark .tag-flex{background-color:hsl(10deg 80% 20%)}.tag-gc{background-color:hsl(60deg 80% 70%)}.dark .tag-gc{background-color:hsl(60deg 80% 20%)}.tag-gcc{background-color:hsl(110deg 80% 70%)}.dark .tag-gcc{background-color:hsl(110deg 80% 20%)}.tag-gnu{background-color:hsl(160deg 80% 70%)}.dark .tag-gnu{background-color:hsl(160deg 80% 20%)}.tag-go{background-color:hsl(210deg 80% 70%)}.dark .tag-go{background-color:hsl(210deg 80% 20%)}.tag-gzip{background-color:hsl(260deg 80% 70%)}.dark .tag-gzip{background-color:hsl(260deg 80% 20%)}.tag-hash{background-color:hsl(310deg 80% 70%)}.dark .tag-hash{background-color:hsl(310deg 80% 20%)}.tag-http{background-color:hsl(0deg 80% 70%)}.dark .tag-http{background-color:hsl(0deg 80% 20%)}.tag-huffman{background-color:hsl(50deg 80% 70%)}.dark .tag-huffman{background-color:hsl(50deg 80% 20%)}.tag-java{background-color:hsl(100deg 80% 70%)}.dark .tag-java{background-color:hsl(100deg 80% 20%)}.tag-java-module{background-color:hsl(150deg 80% 70%)}.dark .tag-java-module{background-color:hsl(150deg 80% 20%)}.tag-javascript{background-color:hsl(200deg 80% 70%)}.dark .tag-javascript{background-color:hsl(200deg 80% 20%)}.tag-jdk{background-color:hsl(250deg 80% 70%)}.dark .tag-jdk{background-color:hsl(250deg 80% 20%)}.tag-js{background-color:hsl(300deg 80% 70%)}.dark .tag-js{background-color:hsl(300deg 80% 20%)}.tag-jvm{background-color:hsl(350deg 80% 70%)}.dark .tag-jvm{background-color:hsl(350deg 80% 20%)}.tag-kernel{background-color:hsl(40deg 80% 70%)}.dark .tag-kernel{background-color:hsl(40deg 80% 20%)}.tag-lexer{background-color:hsl(90deg 80% 70%)}.dark .tag-lexer{background-color:hsl(90deg 80% 20%)}.tag-linux{background-color:hsl(140deg 80% 70%)}.dark .tag-linux{background-color:hsl(140deg 80% 20%)}.tag-log4j2{background-color:hsl(190deg 80% 70%)}.dark .tag-log4j2{background-color:hsl(190deg 80% 20%)}.tag-lz77{background-color:hsl(240deg 80% 70%)}.dark .tag-lz77{background-color:hsl(240deg 80% 20%)}.tag-make{background-color:hsl(290deg 80% 70%)}.dark .tag-make{background-color:hsl(290deg 80% 20%)}.tag-makefile{background-color:hsl(340deg 80% 70%)}.dark .tag-makefile{background-color:hsl(340deg 80% 20%)}.tag-maven{background-color:hsl(30deg 80% 70%)}.dark .tag-maven{background-color:hsl(30deg 80% 20%)}.tag-memory{background-color:hsl(80deg 80% 70%)}.dark .tag-memory{background-color:hsl(80deg 80% 20%)}.tag-multithreading{background-color:hsl(130deg 80% 70%)}.dark .tag-multithreading{background-color:hsl(130deg 80% 20%)}.tag-mybatis{background-color:hsl(180deg 80% 70%)}.dark .tag-mybatis{background-color:hsl(180deg 80% 20%)}.tag-mysql{background-color:hsl(230deg 80% 70%)}.dark .tag-mysql{background-color:hsl(230deg 80% 20%)}.tag-nasm{background-color:hsl(280deg 80% 70%)}.dark .tag-nasm{background-color:hsl(280deg 80% 20%)}.tag-node{background-color:hsl(330deg 80% 70%)}.dark .tag-node{background-color:hsl(330deg 80% 20%)}.tag-nodejs{background-color:hsl(20deg 80% 70%)}.dark .tag-nodejs{background-color:hsl(20deg 80% 20%)}.tag-openssl{background-color:hsl(70deg 80% 70%)}.dark .tag-openssl{background-color:hsl(70deg 80% 20%)}.tag-playwright{background-color:hsl(120deg 80% 70%)}.dark .tag-playwright{background-color:hsl(120deg 80% 20%)}.tag-posix{background-color:hsl(170deg 80% 70%)}.dark .tag-posix{background-color:hsl(170deg 80% 20%)}.tag-powershell{background-color:hsl(220deg 80% 70%)}.dark .tag-powershell{background-color:hsl(220deg 80% 20%)}.tag-programming-langauge{background-color:hsl(270deg 80% 70%)}.dark .tag-programming-langauge{background-color:hsl(270deg 80% 20%)}.tag-programming-language{background-color:hsl(320deg 80% 70%)}.dark .tag-programming-language{background-color:hsl(320deg 80% 20%)}.tag-qemu{background-color:hsl(10deg 80% 70%)}.dark .tag-qemu{background-color:hsl(10deg 80% 20%)}.tag-redis{background-color:hsl(60deg 80% 70%)}.dark .tag-redis{background-color:hsl(60deg 80% 20%)}.tag-retrocomputing{background-color:hsl(110deg 80% 70%)}.dark .tag-retrocomputing{background-color:hsl(110deg 80% 20%)}.tag-rfc{background-color:hsl(160deg 80% 70%)}.dark .tag-rfc{background-color:hsl(160deg 80% 20%)}.tag-sdram{background-color:hsl(210deg 80% 70%)}.dark .tag-sdram{background-color:hsl(210deg 80% 20%)}.tag-sed{background-color:hsl(260deg 80% 70%)}.dark .tag-sed{background-color:hsl(260deg 80% 20%)}.tag-slf4j{background-color:hsl(310deg 80% 70%)}.dark .tag-slf4j{background-color:hsl(310deg 80% 20%)}.tag-spring{background-color:hsl(0deg 80% 70%)}.dark .tag-spring{background-color:hsl(0deg 80% 20%)}.tag-spring-boot{background-color:hsl(50deg 80% 70%)}.dark .tag-spring-boot{background-color:hsl(50deg 80% 20%)}.tag-spring-data{background-color:hsl(100deg 80% 70%)}.dark .tag-spring-data{background-color:hsl(100deg 80% 20%)}.tag-spring-ioc{background-color:hsl(150deg 80% 70%)}.dark .tag-spring-ioc{background-color:hsl(150deg 80% 20%)}.tag-sql{background-color:hsl(200deg 80% 70%)}.dark .tag-sql{background-color:hsl(200deg 80% 20%)}.tag-streaming{background-color:hsl(250deg 80% 70%)}.dark .tag-streaming{background-color:hsl(250deg 80% 20%)}.tag-template{background-color:hsl(300deg 80% 70%)}.dark .tag-template{background-color:hsl(300deg 80% 20%)}.tag-testing{background-color:hsl(350deg 80% 70%)}.dark .tag-testing{background-color:hsl(350deg 80% 20%)}.tag-thymeleaf{background-color:hsl(40deg 80% 70%)}.dark .tag-thymeleaf{background-color:hsl(40deg 80% 20%)}.tag-tls{background-color:hsl(90deg 80% 70%)}.dark .tag-tls{background-color:hsl(90deg 80% 20%)}.tag-tomcat{background-color:hsl(140deg 80% 70%)}.dark .tag-tomcat{background-color:hsl(140deg 80% 20%)}.tag-transaction{background-color:hsl(190deg 80% 70%)}.dark .tag-transaction{background-color:hsl(190deg 80% 20%)}.tag-transistor{background-color:hsl(240deg 80% 70%)}.dark .tag-transistor{background-color:hsl(240deg 80% 20%)}.tag-ts{background-color:hsl(290deg 80% 70%)}.dark .tag-ts{background-color:hsl(290deg 80% 20%)}.tag-typescript{background-color:hsl(340deg 80% 70%)}.dark .tag-typescript{background-color:hsl(340deg 80% 20%)}.tag-unix{background-color:hsl(30deg 80% 70%)}.dark .tag-unix{background-color:hsl(30deg 80% 20%)}.tag-web{background-color:hsl(80deg 80% 70%)}.dark .tag-web{background-color:hsl(80deg 80% 20%)}.tag-x86{background-color:hsl(130deg 80% 70%)}.dark .tag-x86{background-color:hsl(130deg 80% 20%)}.tag-x86_64{background-color:hsl(180deg 80% 70%)}.dark .tag-x86_64{background-color:hsl(180deg 80% 20%)}.tag-x86-64{background-color:hsl(230deg 80% 70%)}.dark .tag-x86-64{background-color:hsl(230deg 80% 20%)}.tag-xpath{background-color:hsl(280deg 80% 70%)}.dark .tag-xpath{background-color:hsl(280deg 80% 20%)}.tag-zlib{background-color:hsl(330deg 80% 70%)}.dark .tag-zlib{background-color:hsl(330deg 80% 20%)}</style></head><body><script>localStorage.getItem("dark-theme")&&document.body.classList.add("dark")</script><header><h2 id=banner><a href=/>Infinity Architect</a></h2><div id=top-sections><a href=/android/ class=hoverable>Android </a><a href=/cxx/ class=hoverable>C/C++ </a><a href=/compression/ class=hoverable>Compression </a><a href=/cpu/ class=hoverable>CPU </a><a href=/crypto/ class=hoverable>Cryptography </a><a href=/db/ class=hoverable>Database </a><a href=/ee/ class=active>Electronic Engineering </a><a href=/linux/ class=hoverable>GNU/Linux </a><a href=/go/ class=hoverable>Golang </a><a href=/java/ class=hoverable>Java </a><a href=/microservice/ class=hoverable>Microservice </a><a href=/net/ class=hoverable>Network & Protocol </a><a href=/physics/ class=hoverable>Physics </a><a href=/retro/ class=hoverable>Retro-Computing </a><a href=/toy/ class=hoverable>Toys </a><a href=/windev/ class=hoverable>Window</a></div><div class=theme-switch style="align-self:center;margin:auto 20px"><input type=checkbox id=theme-checkbox>
<label for=theme-checkbox><div></div><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path fill-rule="evenodd" d="M9.528 1.718a.75.75.0 01.162.819A8.97 8.97.0 009 6a9 9 0 009 9 8.97 8.97.0 003.463-.69.75.75.0 01.981.98 10.503 10.503.0 01-9.694 6.46c-5.799.0-10.5-4.701-10.5-10.5.0-4.368 2.667-8.112 6.46-9.694a.75.75.0 01.818.162z" clip-rule="evenodd"/></svg>
</span><span><svg viewBox="0 0 24 24" fill="currentcolor" class="w-6 h-6"><path d="M12 2.25a.75.75.0 01.75.75v2.25a.75.75.0 01-1.5.0V3a.75.75.0 01.75-.75zM7.5 12a4.5 4.5.0 119 0 4.5 4.5.0 01-9 0zM18.894 6.166a.75.75.0 00-1.06-1.06l-1.591 1.59a.75.75.0 101.06 1.061l1.591-1.59zM21.75 12a.75.75.0 01-.75.75h-2.25a.75.75.0 010-1.5H21a.75.75.0 01.75.75zm-3.916 6.894a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 10-1.061 1.06l1.59 1.591zM12 18a.75.75.0 01.75.75V21a.75.75.0 01-1.5.0v-2.25A.75.75.0 0112 18zM7.758 17.303a.75.75.0 00-1.061-1.06l-1.591 1.59a.75.75.0 001.06 1.061l1.591-1.59zM6 12a.75.75.0 01-.75.75H3a.75.75.0 010-1.5h2.25A.75.75.0 016 12zm.697-4.243a.75.75.0 001.06-1.06l-1.59-1.591a.75.75.0 00-1.061 1.06l1.59 1.591z"/></svg></span></label></div></header><main><article class=basic-text><div style=font-family:monospace;font-size:1.5em><div class=basic-text>/<a href=/>HOME</a>/<a href=/ee/>Electronic Engineering</a>/<a href=/ee/mem/>Computer Memory</a>/
$</div></div><div style=margin-bottom:60px><h1 style=margin-bottom:0>DDR4 Overview</h1><p class=aux-text style=margin-top:0>Published at: July 4, 2023
| Last modification: July 11, 2023</p><div style=line-height:2em></div></div><div><p>DDR4 chips comes in x4/8/16/32 configuration, indicating the width of <code>DQ</code> bus being 4/8/16/32 lines.</p><p>For pin named <code>XX_n</code>, LOW voltage (referred to as 0) means active/enable, and HIGH (referred as 1) means inactive/disabled.</p><p>The operation of a DDR SDRAM chip requires a LOW <code>CS_n</code> signal, otherwise all input will be ignored.
This allows multiple chips to use the same command / address bus (as in a memory module), while only the selected one is active.</p><p>All discuss below assume a LOW <code>CS_n</code>.</p><h3 id=acronyms>acronyms</h3><p>DDP: Dual Die Package<br>TSV: Through-silicon via</p><h4 id=dual-die-packaging-ddp-aka-twindie>Dual Die Packaging (DDP) a.k.a TwinDie</h4><p>These chips have extra pins with suffix <code>1</code> defined; e.g. <code>ODT1</code>, <code>CS1_n</code>, since it contains 2 dies in the same package.</p><h2 id=pin-assignment>Pin Assignment</h2><p>x8 config defines the following pins:</p><p>powers:</p><ul><li>Vdd / Vss: and its ground</li><li>Vddq / Vssq: <code>DQ</code> bus power supply 1.2V and its ground</li><li>Vpp: DRAM activating power supply 2.5V</li></ul><p>Clock:</p><ul><li><code>CK_t / CK_c</code>: a pair of differential clock input. All inputs to the chip will be sampled on the up edge of <code>CK_t</code> and down edge of <code>CK_c</code>.</li><li>CKE: Clock Enabled.</li></ul><p>Command:</p><ul><li>WE_n: Write Enabled.</li><li>CAS_n / RAS_n</li></ul><p>Addressing:</p><ul><li><p>C0, C1, C2: select a layer in a 3DS design among up to 8 layers.</p></li><li><p>BG0-BG1: select a bank group among up to 4 bank groups</p></li><li><p>BA0-BG1: select a bank among up to 4 banks in a bank group</p></li><li><p>CS_n: Chip Select. ALL inputs are ignored when this pin is HIGH.</p><p>All chips on a DIMM shared the same CS_n. This allows memory controller in a multi rank setup to &mldr; TODO</p></li><li><p>A0-A16: address bus for both row and column address</p></li></ul><p>Management:</p><ul><li>ODT: On Die Termination.</li></ul><p>Data:</p><ul><li>DQ0-DQ7: bi-directional data bus for both read and write</li><li>DQS_c / DQS_t: <code>DQ</code> strobe. A pair of differential &mldr;</li><li>TDQS_c / TDQS_t: Termination <code>DQ</code> Strobe.</li></ul><p>Misc:</p><ul><li>CKE1 / CS1_n / ODT1: DDP only alternative to CKE &mldr;</li><li>DM_n: (input) data musk.</li><li>DBI_n: data bus inversion.</li><li>ZQ: reference voltage for ZQ-calibration</li><li>TEN: Connectivity Test Mode Enable. TEN is required for x16 and optional for others. A x8 vendor may choose to ignore this pin.</li><li>ACT_n:</li><li>VREFCA: Reference voltage for CA.</li><li>AP: Auto-precharge.</li><li>BC_n: Burst Chop.</li><li>RESET_n:</li><li>ALERT_n:</li><li>PAR: (Command and Address) Parity Input.</li></ul><h2 id=organization>Organization</h2><h3 id=bank--bank-group>Bank & Bank Group</h3><p>All DDR chips are organized into &ldquo;banks&rdquo;.</p><p>DDR4 further organizes banks into <em>bank group</em>. <code>JESD79-4</code> requires that all DDR4:</p><ul><li><code>x4</code> or <code>x8</code> chip has 4 bank groups of 4 banks each, i.e. 16 banks</li><li><code>x16</code> chip has 2 bank groups with 4 banks each, i.e. 8 banks.</li></ul><p>Each bank has its own row of sense amplifier attached to its bitlines.</p><p>Bank is the unit of</p><ul><li>command handling. Each bank is able to handle a read &mldr;, while rows from other banks can be read simultaneously.</li><li>row open/close. Only one row can be opened per bank, but each bank can open its own row independently.</li></ul><p>The purpose of such bank-based division is to that &mldr;</p><h2 id=registers>Registers</h2><h3 id=mode-registers>Mode Registers</h3><p>DDR4 provides 7 mode registers named from <code>MR0</code> to <code>MR6</code>, each can be think as a 14-bit struct with bit field.
They store parameters that determine runtime behavior of the SDRAM chip.</p><p>To write to a mode register, issue the one-off <code>MRS</code> (mode register set) command, which uses the encoding:</p><ol><li>assert (lower) <code>RAS (A16)</code>, <code>CAS (A15)</code> and <code>WE (A14)</code></li><li><code>BG0 BA0 BA1</code> as register selection (with <code>BG1</code> must be 0 reserved for future). <code>000</code> means <code>MR0</code> and <code>110</code> means <code>MR6</code> etc.</li><li><code>A0 - A13</code> as OPCODE (with <code>A17</code> must be 0 reserved for future)</li></ol><p>There is no partial write, and an <code>MRS</code> always clobber all bits. It&rsquo;s memory controller&rsquo;s responsibility to keep the state.
Important time measures:</p><ol><li><code>t_MRD</code>: minimum time required between two MRS commands</li><li><code>t_MOD</code>: the minimum time required from an MRS command to a non-MRS command (except a <code>DESELECT</code>)</li></ol><h4 id=opcode-sematics-by-register><code>OPCODE</code> sematics by register</h4><ul><li>MR0:</li><li></li></ul><h3 id=general-purpose-registers>General Purpose Registers</h3><h2 id=chip-lifecycle>Chip Lifecycle</h2><h3 id=mr-default-reset><code>MR</code> default reset</h3><p>A common subroutine that sets critical MRs is often used during setup and reset:</p><p>SUBROUTINE: MR default reset</p><table><thead><tr><th>MR & pin</th><th>value</th><th>desc</th></tr></thead><tbody><tr><td>MR3 A[3]</td><td>0 = 1/2 rate</td><td>gear-down mode</td></tr><tr><td>MR3 A[4]</td><td>0 = disable</td><td>per-DRAM addressability</td></tr><tr><td>MR4 A[1]</td><td>0 = disable</td><td>maximum power-down</td></tr><tr><td>MR4 A[8:6]</td><td>000 = disable</td><td>CS to command/address latency</td></tr><tr><td>MR5 A[2:0]</td><td>000 = disable</td><td>CA parity latency mode</td></tr><tr><td>MR4 A[13]</td><td>0 = Disable</td><td>Hard Post Package Repair mode</td></tr><tr><td>MR4 A[5]</td><td>0 = Disable</td><td>Soft Post Package Repair mode</td></tr></tbody></table><h3 id=power-up-init>power up init</h3><ol><li>supply the 1.2V power to <code>Vdd</code> and <code>Vddq</code>.</li><li>deassert <code>RESET_n</code></li><li>wait 500us for SDRAM self-initialization; Micron guarantees to do the MR default reset during this, but not standardized.</li><li>start feeding the <code>CK_t</code> and <code>CK_c</code> diff clock</li><li><em>CRITICAL</em>: set <code>CKE</code> HIGH and keep it to start the synchronized world. The very next up edge of <code>CK_t</code> (thus down edge of <code>CK_c</code>) will be the first COMMAND the chip will interpret, must be <code>DESELECT</code></li><li>issue <code>MRS</code> to load (in order) <code>MR3</code>, <code>MR6</code>, <code>MR5</code>, <code>MR4</code>, <code>MR2</code>, <code>MR1</code> with application setting, wait <code>t_MRD</code> after each <code>MRS</code>.</li><li>issue <code>MRS</code> to load (in order) <code>MR0</code> with application setting, then wait <code>tMOD</code></li><li>Issue a <code>ZQCL</code> command to start ZQ calibration, then wait for <code>t_DLLK</code> and <code>t_ZQinit</code> for its completion</li><li>DONE. we good for all normal operation.</li></ol><h3 id=reset>reset</h3><p>TODO</p><h3 id=gear-down-mode>Gear-down mode</h3><h3 id=max-power-saving-mode>Max Power-saving mode</h3><h3 id=self-refresh-mode>Self Refresh mode</h3><h3 id=delay-locked-loop-dll-and-dll-off-mode>Delay-locked loop (DLL) and <code>DLL-off</code> mode</h3><h3 id=read--read-burst>read & Read Burst</h3><ol><li><p>MC registers the <code>ACTIVATE</code> command, i.e. open a row.</p><p>At the same up edge:</p><ul><li>lower <code>CS</code> and <code>ACT</code></li><li>address the row by <code>BG0-1</code>, <code>BA0-1</code>, <code>A0-A17</code> (<code>A17</code> unused for <code>x8</code>).</li></ul><p><code>RAS</code> doesn&rsquo;t involve, since it&rsquo;s the same pin as <code>A16</code>.</p></li><li><p>MC register the <code>READ</code> command.</p><p>At the same up edge:</p><ul><li>lower <code>CS</code> and <code>CAS (A15)</code></li><li>pick columns by <code>A0 - A9</code></li><li>indicate whether on-the-fly BC4 or BL8 mode by <code>BC (A12)</code></li><li>indicate Auto-precharge by <code>AP (A10)</code></li></ul></li></ol><h3 id=write--write-burst>write & write Burst</h3><p>TODO</p><h2 id=ddr4-memory-modules>DDR4 Memory Modules</h2><p>JEDEC also specifies what chip config a given DIMM design should use. They most commonly use the <code>x8</code> config in consumer PC DIMM.</p><p>All chips on the same memory module share the same <code>CS</code> signal, thus is either all selected or all deselected.</p><p>To the memory controller, the whole MM behaves like a single stack of logical superbanks:</p><ul><li>increasing the # of channels is equivalent to increasing the logical DQ & logical cell capacity (from 64 to 128 bits, etc.)</li><li>increasing the # of ranks per channel is equivalent to increase the # of banks</li></ul><h3 id=list-of-pins-288>List of pins (288)</h3><table><thead><tr><th>name</th><th>desc</th><th>running sum</th></tr></thead><tbody><tr><td>A0 - A17</td><td>address bus.</td><td>18</td></tr><tr><td>BA0, BA1</td><td>bank selection. (RS)</td><td>20</td></tr><tr><td>BG0, BG1</td><td>Bank group selection</td><td>22</td></tr><tr><td>RAS_n</td><td></td><td></td></tr><tr><td>CAS_n</td><td></td><td></td></tr><tr><td>WE_n</td><td></td><td></td></tr><tr><td>CS0_n, CS1_n</td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><ul><li><p>RAS_n, CAS_n:</p></li><li></li><li><p>CS0_n, CS1_n</p></li><li><p>ACT_B</p></li><li><p>ALERT_B</p></li><li><p>C[012]</p></li></ul></div></article></main><footer>Unless otherwise noted, content of this site is licensed under
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ style=text-decoration:underline>the CC BY-NC-SA 4.0</a>.<br>cesun.info copyright 2024.</footer></body></html>